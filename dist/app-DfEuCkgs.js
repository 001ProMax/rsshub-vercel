import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BwctkUCD.js";import{timezone as r}from"./timezone-CCdTtC9I.js";import{load as i}from"cheerio";const a=async a=>{let o=a.req.query(`limit`)?Number.parseInt(a.req.query(`limit`),10):7,s=`https://app.xinhuanet.com`,c=new URL(`news/index.html`,s).href,{data:l}=await n(c),u=i(l),d=u(`html`).prop(`lang`),f=u(`a.article-item`).slice(0,o).toArray().map(e=>{e=u(e);let t=e.find(`div.article-title`).text(),n=`xinhuanet-${e.prop(`data-uuid`)}`;return{title:t,link:e.prop(`href`),guid:n,id:n,language:d}});f=await Promise.all(f.map(a=>e.tryGet(a.link,async()=>{let{data:e}=await n(a.link),o=i(e),s=o(`div.article_title`).text(),c=o(`#detail-content`).html();a.title=s,a.description=c;let l=o(`div.article_auth div`).first();return a.author=l.text(),l.remove(),a.pubDate=r(t(o(`div.article_auth div`).first().text()),8),a.content={html:c,text:o(`#detail-content`).text()},a.language=d,a})));let p=u(`meta[itemprop="image"]`).prop(`content`);return{title:u(`title`).text(),description:u(`meta[name="description"]`).prop(`content`),link:c,item:f,allowEmpty:!0,image:p,author:u(`meta[itemprop="name"]`).prop(`content`),language:d}},o={path:`/app`,name:`客户端`,url:`app.xinhuanet.com`,maintainers:[`nczitzk`],handler:a,example:`/xinhuanet/app`,parameters:void 0,description:``,categories:[`traditional-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`app.xinhuanet.com`],target:`/app`}]};export{a as handler,o as route};