import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./proxy-kot7LoOQ.js";import{timezone as e}from"./timezone-CCdTtC9I.js";import{puppeteer_default as t}from"./puppeteer-DQCLzTv0.js";import{load as n}from"cheerio";const r={path:`/lordslibrary/type/:topic?`,categories:[`government`],example:`/parliament.uk/lordslibrary/type/research-briefing`,parameters:{topic:`research by topic, string, example: [research-briefing|buisness|economy]`},features:{requireConfig:!1,requirePuppeteer:!0,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`House of Lords Library`,maintainers:[`AntiKnot`],handler:i};async function i(r){let{topic:i}=r.req.param(),a=`https://lordslibrary.parliament.uk`,o=`${a}/type/${i}/`,s=await t(),c=await s.newPage();await c.setRequestInterception(!0),c.on(`request`,e=>{e.resourceType()===`document`?e.continue():e.abort()}),await c.goto(o,{waitUntil:`domcontentloaded`});let l=await c.evaluate(()=>document.documentElement.innerHTML);await c.close();let u=n(l),d=u(`div.l-box.l-box--no-border.card__text`).toArray().map(t=>({title:u(t).find(`.card__text a`).text().trim(),link:u(t).find(`.card__text a`).attr(`href`),description:u(t).find(`p`).last().text().trim(),pubDate:e(u(t).find(`.card__date time`).attr(`datetime`))}));return await s.close(),{title:`parliament - lordslibrary - ${i}`,link:o,item:d}}export{r as route};