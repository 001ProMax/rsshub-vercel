import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-BwctkUCD.js";const n={path:`/:id/:lang?`,radar:[{source:[`mangadex.org/title/:id/*`,`mangadex.org/title/:id`],target:`/:id`}],name:`Unknown`,maintainers:[`vzz64`],handler:r};async function r(n){let{id:r,lang:i}=n.req.param(),{data:a}=await t.get(`https://api.mangadex.org/manga/${r}`);if(a.result===`error`)throw Error(a.errors[0].detail);a=a.data;let o;i&&(o=a.attributes.title[i],o||=a.attributes.altTitles.find(e=>e[i])?.[i]),o||(o=a.attributes.title[a.attributes.originalLanguage],o||(o=a.attributes.altTitles.find(e=>e[a.attributes.originalLanguage])?.[a.attributes.originalLanguage],o||=Object.values(a.attributes.title)[0]));let s;i&&(s=a.attributes.description[i]),s||(s=a.attributes.description[a.attributes.originalLanguage],s||=Object.values(a.attributes.description)[0]);let c=`https://api.mangadex.org/manga/${r}/feed?order[publishAt]=desc`;if(i&&(c+=`&translatedLanguage[]=${i}`),a=(await t.get(c)).data,a.result===`error`)throw Error(a.errors[0].detail);return{title:`${o} - MangaDex`,link:`https://mangadex.org/title/${r}`,description:s,allowEmpty:!0,item:a.data.map(t=>{let n=[];return t.attributes.volume&&n.push(`Vol. ${t.attributes.volume}`),t.attributes.chapter&&n.push(`Ch. ${t.attributes.chapter}`),t.attributes.title&&n.push(t.attributes.title),{title:n.join(` `),link:`https://mangadex.org/chapter/${t.id}`,pubDate:e(t.attributes.publishAt)}}),language:i}}export{n as route};