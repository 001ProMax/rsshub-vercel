import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r,parseRelativeDate as i}from"./parse-date-DHsdom8D.js";import{got_default as a}from"./got-BwctkUCD.js";import{timezone as o}from"./timezone-CCdTtC9I.js";import s from"node:path";import{load as c}from"cheerio";t();const l={path:`/author/:id`,categories:[`reading`],example:`/qidian/author/9639927`,parameters:{id:`作者 id, 可在作者页面 URL 找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`my.qidian.com/author/:id`]}],name:`作者`,maintainers:[`miles170`],handler:u};async function u(t){let l=t.req.param(`id`),u=`https://my.qidian.com`,d=`${u}/author/${l}/`,f=await a(d),p=c(f.data),m=p(`.header-msg h1`).contents().first().text().trim(),h=p(`.author-work .author-item`).toArray().map(t=>{t=p(t);let a=t.find(`.author-item-msg`),c=a.find(`.author-item-update span`).text().replace(`·`,``).trim();return{title:a.find(`.author-item-title`).text().trim(),author:m,category:a.find(`.author-item-exp a`).first().text().trim(),description:n(s.join(e,`templates/description-9e9a1db4.art`),{description:a.find(`.author-item-update a`).attr(`title`),image:t.find(`a img`).attr(`src`)}),pubDate:o(/(今|昨)/.test(c)?i(c):r(c,`YYYY-MM-DD HH:mm`),8),link:a.find(`.author-item-update a`).attr(`href`)}});return{title:`${m} - 起点中文网`,description:p(`.header-msg-desc`).text().trim(),link:d,item:h}}export{l as route};