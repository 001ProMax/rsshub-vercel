import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BwctkUCD.js";import"./config-not-found-QwO11ree.js";import{defaultDomain as r,getRootUrl as i}from"./utils-mZb_kFeu.js";import{load as a}from"cheerio";const o={path:`/album/:id`,categories:[`anime`],example:`/18comic/album/292282`,parameters:{id:`专辑 id，可在专辑页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`jmcomic.group/`]}],name:`专辑`,maintainers:[`nczitzk`],handler:s,url:`jmcomic.group/`,description:`::: tip
  专辑 id 不包括 URL 中标题的部分。
:::`};async function s(o){let s=o.req.param(`id`),{domain:c=r}=o.req.query(),l=i(c),u=`${l}/album/${s}`,d=await n({method:`get`,url:u}),f=a(d.data),p=f(`span[data-type="tags"]`).first().find(`a`).toArray().map(e=>f(e).text()),m=f(`span[data-type="author"]`).first().find(`a`).toArray().map(e=>f(e).text()).join(`, `),h=f(`.btn-toolbar`).first().find(`a`).toArray().map(e=>(e=f(e),{title:e.text(),link:`${l}${e.attr(`href`)}`,guid:`https://18comic.org${e.attr(`href`)}`,pubDate:t(e.find(`.hidden-xs`).text())}));return h=await Promise.all(h.map(t=>e.tryGet(t.guid,async()=>{let e=await n({method:`get`,url:t.link}),r=a(e.data);return r(`.tab-content`).remove(),t.author=m,t.category=p,t.description=`<img src="${r(`.thumb-overlay-albums img[data-original]`).toArray().map(e=>r(e).attr(`data-original`)).join(`"><img src="`)}">`,t}))),{title:f(`title`).text(),link:u,item:h,description:f(`meta[property="og:description"]`).attr(`content`)}}export{o as route};