import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BwctkUCD.js";import{load as r}from"cheerio";const i=`https://cpc.ey.gov.tw`,a={xwg:{name:`新闻稿`,url:`/Page/A3412E2A5A7B398F`},xfzx:{name:`消费资讯`,url:`/Page/E414CC218269CCE8`}},o={path:`/:type?`,categories:[`government`],example:`/cpcey/xwg`,parameters:{type:"默认为 `xwg`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`消费资讯`,maintainers:[`Fatpandac`],handler:s,description:`| 新闻稿 | 消费资讯 |
| :----: | :------: |
|   xwg  |   xfzx   |`};async function s(o){let s=o.req.param(`type`)??`xwg`,c=i+a[s].url,l=await n.get(c),u=r(l.data),d=u(`div.words > ul > li`).map((e,n)=>{let r=u(n).find(`span`).text(),a=r.split(`-`),o=Number.parseInt(a[0])+1911+`/`+a[1]+`/`+a[2];return{link:i+u(n).find(`a`).attr(`href`),title:u(n).find(`a`).attr(`title`),pubDate:t(o,`YYYY/MM/DD`)}}).get(),f=await Promise.all(d.map(async t=>{let i=``,a=!t.link.includes(`.html`);return a&&(i=await e.tryGet(t.link,async()=>{let e=await n.get(t.link),i=r(e.data),a=i(`div.words > div.graybg.ail > div`).html();return a})),t.description=i,t}));return{title:`行政院消费者保护会-${a[s].name}`,link:c,item:f}}export{o as route};