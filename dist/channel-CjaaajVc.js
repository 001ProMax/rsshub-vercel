import"./esm-shims-CtP6w_ML.js";import{config as e}from"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{cache_default as t}from"./cache-CvppK6AM.js";import"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{invalid_parameter_default as r}from"./invalid-parameter-CvwVNf6G.js";import{config_not_found_default as i}from"./config-not-found-QwO11ree.js";import{utils_default$30 as a}from"./utils-WUWAI-ZE.js";const o={path:`/channel/:id/:routeParams?`,categories:[`social-media`],example:`/youtube/channel/UCDwDMPOZfxVV0x_dz0eQ8KQ`,parameters:{id:`YouTube channel id`,routeParams:`Extra parameters, see the table below`},radar:[{source:[`www.youtube.com/channel/:id`],target:`/channel/:id`}],name:`Channel with id`,maintainers:[`DIYgod`,`pseudoyu`],handler:s,description:`:::tip Parameter
| Name       | Description                                                                         | Default |
| ---------- | ----------------------------------------------------------------------------------- | ------- |
| embed      | Whether to embed the video, fill in any value to disable embedding                  | embed   |
| filterShorts | Whether to filter out shorts from the feed, fill in any falsy value to show shorts | true    |
:::

::: tip
YouTube provides official RSS feeds for channels, for instance [https://www.youtube.com/feeds/videos.xml?channel_id=UCDwDMPOZfxVV0x_dz0eQ8KQ](https://www.youtube.com/feeds/videos.xml?channel_id=UCDwDMPOZfxVV0x_dz0eQ8KQ).
:::`,features:{requireConfig:[{name:`YOUTUBE_KEY`,description:" YouTube API Key, support multiple keys, split them with `,`, [API Key application](https://console.developers.google.com/)"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1}};async function s(o){if(!e.youtube||!e.youtube.key)throw new i(`YouTube RSS is disabled due to the lack of <a href="https://docs.rsshub.app/deploy/config#route-specific-configurations">relevant config</a>`);let s=o.req.param(`id`),c=o.req.param(`routeParams`),l=new URLSearchParams(c),u=!l.get(`embed`),d=l.get(`filterShorts`),f=d===null||d===``||d===`true`;if(!a.isYouTubeChannelId(s))throw new r(`Invalid YouTube channel ID. 
You may want to use <code>/youtube/user/:id</code> instead.`);let p=f?null:(await a.getChannelWithId(s,`contentDetails`,t)).data.items[0].contentDetails.relatedPlaylists.uploads,m=f?a.getPlaylistWithShortsFilter(s):p,h=(await a.getPlaylistItems(m,`snippet`,t)).data.items;return{title:`${h[0].snippet.channelTitle} - YouTube`,link:`https://www.youtube.com/channel/${s}`,description:`YouTube channel ${h[0].snippet.channelTitle}`,item:h.filter(e=>e.snippet.title!==`Private video`&&e.snippet.title!==`Deleted video`).map(e=>{let t=e.snippet,r=t.resourceId.videoId,i=a.getThumbnail(t.thumbnails);return{title:t.title,description:a.renderDescription(u,r,i,a.formatDescription(t.description)),pubDate:n(t.publishedAt),link:`https://www.youtube.com/watch?v=${r}`,author:t.videoOwnerChannelTitle,image:i.url}})}}export{o as route};