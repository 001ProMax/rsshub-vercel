import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import{logger_default as e}from"./logger-BlLSmUdl.js";import"./proxy-kot7LoOQ.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as t}from"./cache-CvppK6AM.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{got_default as r}from"./got-BwctkUCD.js";import{puppeteer_default as i}from"./puppeteer-DQCLzTv0.js";import{load as a}from"cheerio";import{CookieJar as o}from"tough-cookie";const s={path:`/ygafz/:type?`,categories:[`university`],example:`/sysu/ygafz`,parameters:{type:"分类，见下表，默认为 `notice`"},features:{requireConfig:!1,requirePuppeteer:!0,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`ygafz.sysu.edu.cn/:type?`]}],name:`粤港澳发展研究院`,description:`| 人才招聘   | 人才培养      | 新闻动态 | 通知公告 | 专家观点 |
| ---------- | ------------- | -------- | -------- | -------- |
| jobopening | personnelplan | news     | notice   | opinion  |

| 研究成果 | 研究论文 | 学术著作 | 形势政策 |
| -------- | -------- | -------- | -------- |
| results  | papers   | writings | policy   |`,maintainers:[`TonyRL`],handler:c};async function c(s){let{type:c=`notice`}=s.req.param(),l=`https://ygafz.sysu.edu.cn`,u=`${l}/${c}`,d=await i(),f=await d.newPage();await f.setRequestInterception(!0),f.on(`request`,e=>{e.resourceType()===`document`||e.resourceType()===`script`?e.continue():e.abort()}),e.http(`Requesting ${u}`),await f.goto(u,{waitUntil:`domcontentloaded`}),await f.waitForSelector(`[data-block-plugin-id]`);let p=await f.content(),m=new o,h=await f.cookies();h.reduce((e,t)=>(e.setCookie(`${t.name}=${t.value}`,u),e),m),await d.close();let g=a(p),_=g(`.list-content a`).toArray().map(e=>(e=g(e),{title:e.find(`p`).text(),link:`${l}${e.attr(`href`)}`,pubDate:n(e.find(`.date`).text())})),v=await Promise.all(_.map(e=>t.tryGet(e.link,async()=>{let{data:t}=await r(e.link,{cookieJar:m}),n=a(t);return e.author=n(`.article-submit`).text().match(/发布人：(.*)/)[1],e.description=n(`div[data-block-plugin-id="entity_field:node:body"]`).html(),e})));return{title:g(`title`).text(),link:u,item:v}}export{s as route};