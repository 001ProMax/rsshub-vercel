import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BwctkUCD.js";import{load as r}from"cheerio";const i={path:`/:category?`,categories:[`new-media`],example:`/kuwaitlocal/article`,parameters:{category:"Category name, can be found in URL, `latest` by default"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`kuwaitlocal.com/news/categories/:category`],target:`/:category`}],name:`Categorised News`,maintainers:[`TonyRL`],handler:a,url:`kuwaitlocal.com/news/latest`};async function a(i){let a=`https://kuwaitlocal.com`,{category:o=`latest`}=i.req.param(),s=`${a}/news/${o===`latest`?o:`categories/${o}`}`,{data:c}=await n(s),l=r(c),u=l(`a.ggrid`).toArray().map(e=>(e=l(e),{title:e.find(`.txt`).text().trim(),link:e.attr(`href`)})),d=await Promise.all(u.map(i=>e.tryGet(i.link,async()=>{let{data:e}=await n(i.link),a=r(e);return i.pubDate=t(a(`.single_news_meta span`).eq(0).text().trim()),i.category=a(`.tags .tag`).toArray().map(e=>a(e).text().trim()),a(`[id^=div-gpt-ad]`).remove(),a(`.tags_sec2, .tags_sec, .comment`).remove(),i.description=a(`.single_news_img`).html()+a(`#news_description`).html(),i})));return{title:l(`head title`).text().trim(),description:l(`head meta[name="description"]`).attr(`content`).trim(),link:s,item:d,language:`en`}}export{i as route};