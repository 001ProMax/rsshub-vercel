import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{got_default as i}from"./got-BwctkUCD.js";import a from"node:path";import o from"crypto-js";t();const s={m3u8:`x-mpegURL`,mp3:`mpeg`,mp4:`mp4`,m4a:`mp4`},c={path:`/album/:id`,categories:[`multimedia`],example:`/radio/album/15682090498666`,parameters:{id:`专辑 id，可在对应专辑页面的 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!0,supportScihub:!1},name:`专辑`,maintainers:[`nczitzk`],handler:l,description:"如果订阅 [中国相声榜](https://www.radio.cn/pc-portal/sanji/detail.html?columnId=15682090498666)，其 URL 为 `https://www.radio.cn/pc-portal/sanji/detail.html?columnId=15682090498666`，可以得到 `columnId` 为 `15682090498666`\n\n  所以对应路由为 [`/radio/album/15682090498666`](https://rsshub.app/radio/album/15682090498666)\n\n::: tip\n  部分专辑不适用该路由，此时可以尝试 [节目](#yun-ting-jie-mu) 路由\n:::"};async function l(t){let c=`f0fc4c668392f9f9a447e48584c214ee`,l=t.req.param(`id`),u=t.req.query(`limit`)??`100`,d=`https://www.radio.cn`,f=`${d}/pc-portal/sanji/detail.html?columnId=${l}`,p=`https://ytmsout.radio.cn`,m=Date.now(),h=`id=${l}`,g=`${p}/web/appAlbum/detail/${l}?${h}`,_=await i({method:`get`,url:g,headers:{sign:o.MD5(`${h}&timestamp=${m}&key=${c}`).toString().toUpperCase(),timestamp:m,"Content-Type":`application/json`,equipmentId:`0000`,platformCode:`WEB`}}),v=`albumId=${l}&pageNo=0&pageSize=${u}`,y=`${p}/web/appSingle/pageByAlbum?${v}`,b=await i({method:`get`,url:y,headers:{sign:o.MD5(`${v}&timestamp=${m}&key=${c}`).toString().toUpperCase(),timestamp:m,"Content-Type":`application/json`,equipmentId:`0000`,platformCode:`WEB`}}),x=b.data.data.data,S=x.map(t=>{let i=t.playUrlHigh??t.playUrlLow;i=/\.m3u8$/.test(i)?t.downloadUrl:i;let o=new URL(i).pathname.split(`.`).pop(),c=o?`audio/${s[o]}`:``;return{guid:t.id,title:t.name,link:i,description:n(a.join(e,`templates/description-3cdbaffc.art`),{description:t.des,enclosure_url:i,enclosure_type:c}),pubDate:r(t.publishTime),enclosure_url:i,enclosure_type:c,enclosure_length:t.fileSize,itunes_duration:t.duration,itunes_item_image:_.data.data.image}});return{title:`云听 - ${_.data.data.name}`,link:f,item:S,image:_.data.data.image,description:_.data.data.des??_.data.data.desSimple,itunes_author:_.data.data.ownerNickName||`radio.cn`}}export{c as route};