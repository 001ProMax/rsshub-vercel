import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-BwctkUCD.js";const n=async(n,r)=>{let i=`https://www.infoq.cn/public/v1/article/getDetail`,o=await Promise.all(n.map(async n=>{let o=n.uuid,s=await r.tryGet(o,async()=>{let r=`https://www.infoq.cn/article/${o}`,s=await t.post(i,{headers:{Referer:r},json:{uuid:o}}),c=s.data.data,l=c.author?c.author.map(e=>e.nickname).join(`,`):c.no_author,u=[...n.topic.map(e=>e.name),...n.label.map(e=>e.name)],d=c.content_url?(await t(c.content_url)).body:c.content;return{title:c.article_title,description:a(d),pubDate:e(n.publish_time,`x`),category:u,author:l,link:r}});return s}));return o},r=e=>i(e).join(``),i=e=>e.map(e=>{let t={doc:()=>i(e.content).map(e=>`<p>${e}</p>`).join(``),text:()=>e.text,heading:()=>{if(e.content){let t=e.attrs.level,n=r(e.content);return`<h${t}>${n}</h${t}>`}else return``},blockquote:()=>{if(e.content){let t=r(e.content);return`<blockquote>${t}</blockquote>`}else return``},image:()=>{let t=e.attrs.src;return`<img src="${t}"></img>`},codeblock:()=>{if(e.content){let t=e.attrs.lang,n=r(e.content);return`<code lang="${t}">${n}</code>`}else return``},link:()=>{let t=e.attrs.href,n=e.content?r(e.content):``;return`<a href="${t}">${n}</a>"`}};return e.type in t?t[e.type]():e.content?r(e.content):``});function a(e){let t=e.startsWith(`{"`);return t?r([JSON.parse(e)]):e}var o={ProcessFeed:n};export{o as utils_default$19};