import"./esm-shims-CtP6w_ML.js";import{config as e}from"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as t}from"./cache-CvppK6AM.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{got_default as r}from"./got-BwctkUCD.js";import{load as i}from"cheerio";const a=`https://chinafactcheck.com`,o=e=>(e(`*[style]`).removeAttr(`style`),e(`br`).remove(),e(`span:empty`).remove(),e(`span`).each((t,n)=>{e(n).html().trim()===`&nbsp;`&&e(n).remove()}),e(`p:empty`).remove(),e(`p`).each((t,n)=>{e(n).html().trim()===``&&e(n).remove()}),e),s=async t=>{let a=await r(t,{headers:{"user-agent":e.trueUA}}),s=o(i(a.data)),l=s(`.content-head h2`).text().trim(),u=s(`.content-persons p span:last`).text().trim(),d=n(s(`.content-time`).text().trim(),`YYYY-MM-DD`),f=s(`div[class=content-list-box]`).html(),p=s(`.content-tags a[rel="tag"]`).toArray().map(e=>s(e).text().trim());return new c(l,u,d,f,p)};var c=class{constructor(e,t,n,r,i){this.title=e,this.author=t,this.pubDate=n,this.description=r,this.category=i}},l={siteLink:a,cleanDom:o,getArticleDetail:s,ArticleDetail:c,trueUA:e.trueUA};const u={path:`/`,radar:[{source:[`chinafactcheck.com/`],target:``}],name:`Unknown`,maintainers:[`kdanfly`],handler:d,url:`chinafactcheck.com/`};async function d(){let e=await r(l.siteLink,{headers:{"user-agent":l.trueUA}}),n=i(e.data),a=n(`.post-info-box .post-thumb a`).toArray().map(e=>({link:n(e).attr(`href`)})),o=await Promise.all(a.map(e=>t.tryGet(e.link,async()=>{let{title:t,author:n,pubDate:r,description:i,category:a}=await l.getArticleDetail(e.link);return e.title=t,e.author=n,e.pubDate=r,e.description=i,e.category=a,e})));return{title:n(`head title`).text(),link:l.siteLink,item:o}}export{u as route};