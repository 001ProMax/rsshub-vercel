import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as e}from"./ofetch-CWQqZcqz.js";import{cache_default as t}from"./cache-CvppK6AM.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{load as r}from"cheerio";const i={path:`/:category?`,categories:[`new-media`],radar:[{source:[`www.copernicium.tw`]}],name:`分类`,example:`/copernicium/环球视角`,parameters:{category:`分类名`},maintainers:[`dzx-dzx`],handler:a};async function a(i){let a=i.req.param(`category`),o;if(a){let t=new Map([[`环球视角`,`4_1`],[`人文叙述`,`4_3`],[`观点评论`,`4_5`],[`专题报道`,`4_7`]]);if(!t.get(a))throw Error(`The requested category does not exist or is not supported.`);let n={args:{_jcp:t.get(a),m31pageno:1},type:0};o=await e(`http://www.copernicium.tw/nr.jsp`,{query:{_reqArgs:n}})}else o=await e(`http://www.copernicium.tw/sys-nr/`,{query:{_reqArgs:{args:{},type:15}}});let s=r(o),c=s(`.J_newsResultLine a.mixNewsStyleTitle`).toArray().map(e=>(e=s(e),{title:e.text(),link:e.attr(`href`)})),l=await Promise.all(c.map(i=>t.tryGet(i.link,async()=>{let t=await e(i.link),a=r(t);return{pubDate:n(a(`span.newsInfo`).text().substring(5)),description:a(`.richContent`).html(),...i}})));return{title:`日新说 - ${a??`全部文章`}`,link:`http://www.copernicium.tw`,item:l}}export{i as route};