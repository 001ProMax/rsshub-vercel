import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import{rand_user_agent_default as n}from"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as r}from"./ofetch-CWQqZcqz.js";import{cache_default as i}from"./cache-CvppK6AM.js";import{art as a}from"./render-DE4LRFBD.js";import{parseDate as o}from"./parse-date-DHsdom8D.js";import s from"node:path";import{load as c}from"cheerio";t();const l=n({browser:`chrome`,os:`android`,device:`mobile`}),u=async t=>{let n=await Promise.all(t.map(t=>i.tryGet(t.link,async()=>{let n=t.link,i=await r(n,{headers:{"User-Agent":l}}),u=c(i),d=JSON.parse(u(`script#__NEXT_DATA__`).text()),f=d.props.pageProps.urqlState,p=Object.keys(f).filter(e=>f[e].data.includes(`content`));d=JSON.parse(f[p].data).article,t.title=d.shareTitle,t.category=d.categories.map(e=>e.slug);for(let e of d.channels)t.category.push(e.slug);return t.content=d.content.filter(e=>e.innerHtml!==void 0&&e.innerHtml!==``),t.caption=d.dek,d.leadArt&&(t.imgUrl=d.leadArt.image?.url,t.imgAlt=d.leadArt.image?.altText,t.imgCaption=d.leadArt.image?.attributionText),t.description=a(s.join(e,`templates/article-description-c1053caf.art`),{item:t}),{title:t.title,pubDate:o(t.pubDate),link:t.link,description:t.description}})));return n},d={path:`/:category`,categories:[`traditional-media`],example:`/theatlantic/latest`,parameters:{category:`category, see below`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.theatlantic.com/:category`]}],name:`News`,maintainers:[`EthanWng97`,`pseudoyu`],handler:f,description:`| Popular      | Latest | Politics | Technology | Business |
| ------------ | ------ | -------- | ---------- | -------- |
| most-popular | latest | politics | technology | business |

  More categories (except photo) can be found within the navigation bar at [https://www.theatlantic.com](https://www.theatlantic.com)`};async function f(e){let t=`https://www.theatlantic.com`,n=e.req.param(`category`),i=`${t}/${n}/`,a=await r(i),o=c(a),s=JSON.parse(o(`script#__NEXT_DATA__`).text()).props.pageProps.urqlState,l=Object.keys(s).filter(e=>s[e].data.includes(n)),d=JSON.parse(s[l].data),f=Object.values(d)[0].river.edges;f=f.filter(e=>!e.node.url.startsWith(`https://www.theatlantic.com/photo`)),f=f.map(e=>{let t={};return t.link=e.node.url,t.pubDate=e.node.datePublished,t});let p=await u(f);return{title:`The Atlantic - ${n.toUpperCase()}`,link:i,description:`The Atlantic - ${n.toUpperCase()}`,item:p}}export{d as route};