import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as e}from"./ofetch-CWQqZcqz.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";const n={path:`/feeds/:category?`,categories:[`programming`],example:`/bestblogs/feeds/featured`,parameters:{category:"the category of articles. Can be `programming`, `ai`, `product`, `business` or `featured`. Default is `featured`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`文章列表`,maintainers:[`zhenlohuang`],handler:i};var r=class{keyword;qualifiedFilter;sourceId;category;timeFilter;language;userLanguage;sortType;currentPage;pageSize;constructor({keyword:e=``,qualifiedFilter:t=`true`,sourceId:n=``,category:r=``,timeFilter:i=`1w`,language:a=`all`,userLanguage:o=`zh`,sortType:s=`default`,currentPage:c=1,pageSize:l=10}={}){this.keyword=e,this.qualifiedFilter=t,this.sourceId=n,this.category=r,this.timeFilter=i,this.language=a,this.userLanguage=o,this.sortType=s,this.currentPage=c,this.pageSize=l}toJson(){let e={keyword:this.keyword,qualifiedFilter:this.qualifiedFilter,sourceId:this.sourceId,category:this.category,timeFilter:this.timeFilter,language:this.language,userLanguage:this.userLanguage,sortType:this.sortType,currentPage:this.currentPage,pageSize:this.pageSize};return JSON.stringify(e)}};async function i(n){let i=100,a=`1w`,{category:o=`featured`}=n.req.param(),s=new r({category:o,pageSize:i,qualifiedFilter:o===`featured`?`true`:`false`,timeFilter:a}),c=`https://api.bestblogs.dev/api/resource/list`,l=await e(c,{headers:{"Content-Type":`application/json`},method:`POST`,body:s.toJson()});if(!l||!l.data||!l.data.dataList)throw Error(`Invalid API response: `+JSON.stringify(l));let u=l.data.dataList,d=u.map(e=>({title:e.title,link:e.url,description:e.summary,pubDate:t(e.publishDateTimeStr),author:Array.isArray(e.authors)?e.authors.map(e=>({name:e})):[{name:e.authors}],category:e.category}));return{title:`Bestblogs.dev`,link:`https://www.bestblogs.dev/feeds`,item:d}}export{n as route};