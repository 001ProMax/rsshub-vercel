import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{got_default as e}from"./got-BwctkUCD.js";import*as t from"node:url";import{load as n}from"cheerio";const r=`https://www.douban.com/explore/column/`,i={path:`/explore/column/:id`,name:`Unknown`,maintainers:[],handler:a};async function a(i){let a=i.req.param(`id`),o=t.resolve(r,a),s=await e.get(o),c=n(s.data),l=c(`div.h1`).text(),u=c(`div.item`).slice(0,10).map(function(){let e={title:c(this).find(`div.title a`).text(),link:c(this).find(`div.title a`).attr(`href`),author:c(this).find(`div.usr-pic a`).text()};return e}).get();for(let e=u.length-1;e>=0;e--)u[e].author===`[已注销]`&&u.splice(e,1);let d=await Promise.all(u.map(async t=>{let r=t.title,i=t.author,a=t.link,o=await e.get(a),s=n(o.data),c=s(`#link-report`).html(),l={title:r,link:a,description:c,author:i};return l}));return{title:`${l}-豆瓣发现`,link:o,item:d}}export{i as route};