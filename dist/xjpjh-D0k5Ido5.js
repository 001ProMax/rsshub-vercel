import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import{got_default as t}from"./got-BwctkUCD.js";import*as n from"node:url";import{load as r}from"cheerio";const i=`http://jhsjk.people.cn`,a={path:`/xjpjh/:keyword?/:year?`,categories:[`traditional-media`],example:`/people/xjpjh`,parameters:{keyword:`关键词，默认不填`,year:`年份，默认 all`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`people.com.cn/`],target:`/:site?/:category?`}],name:`习近平系列重要讲话`,maintainers:[],handler:o,url:`people.com.cn/`};async function o(a){let o=a.req.param(`keyword`)||`all`,s=a.req.param(`year`)||0,c=`习近平系列重要讲话`;c=c+`-`+o,o===`all`&&(o=``),s===0?c+=`-all`:(c=c+`-`+s,s-=1811);let l=`http://jhsjk.people.cn/result?keywords=${o}&year=${s}`,u=await t.get(l),d=r(u.data),f=d(`ul.list_14.p1_2.clearfix li`).slice(0,10).map(function(){let e={title:d(this).find(`a`).text(),link:d(this).find(`a`).attr(`href`)};return e}).get(),p=await Promise.all(f.map(async a=>{let o=a.title,s=n.resolve(i,a.link),c=await e.get(s);if(c)return JSON.parse(c);let l=await t.get(s),u=r(l.data),d=u(`div.d2txt_con.clearfix`).html().trim(),f={title:o,link:s,description:d};return e.set(s,JSON.stringify(f)),f}));return{title:c,link:l,item:p}}export{a as route};