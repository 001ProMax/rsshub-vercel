import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as e}from"./ofetch-CWQqZcqz.js";import{cache_default as t}from"./cache-CvppK6AM.js";import*as n from"cheerio";const r=`http://www.jjmhw.cc`,i=()=>t.tryGet(`freexcomic:getLatestAddress`,async()=>{let t=await e(`https://www.freexcomic.com`),r=n.load(t),i=new URL(r(`.alert-btn`).attr(`href`)).href.replace(`http:`,`https:`),a=await e(i),o=n.load(a);return o(`p.ta-c.mb10 a`).toArray().map(e=>o(e).attr(`href`))}),a=async a=>{let{id:o}=a.req.param(),s=Number.parseInt(a.req.query(`limit`),10)||10,c=await i(),l=`${c[0]}book/${o}`,u=await e(l),d=n.load(u),f=d(`#detail-list-select > li > a`).toArray().reverse().slice(0,s).map(e=>{let t=d(e);return{title:t.text(),link:new URL(t.attr(`href`),c[Math.floor(Math.random()*c.length)]).href,guid:new URL(t.attr(`href`),r).href}}),p=await Promise.all(f.map(r=>t.tryGet(r.link,async()=>{let t=await e(r.link),i=n.load(t),a=i(`.comicpage`);return a.find(`img`).each((e,t)=>{t.attribs.src=t.attribs[`data-original`]}),r.description=a.html(),r})));return{title:`漫小肆 ${d(`div.info > h1`).text()}`,link:l,description:`漫小肆 ${d(`div.info .content span span`).text()}`,image:d(`.banner_detail .cover img`).attr(`src`),item:p}},o={path:`/book/:id`,example:`/freexcomic/book/90`,parameters:{id:`漫画id，漫画主页的地址栏中`},radar:[{source:[`www.jjmhw.cc/book/:id`]}],name:`漫画更新`,maintainers:[`junfengP`],handler:a,url:`www.jjmhw.cc`};export{o as route};