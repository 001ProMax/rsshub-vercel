import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as e}from"./ofetch-CWQqZcqz.js";import{cache_default as t}from"./cache-CvppK6AM.js";import{load as n}from"cheerio";const r={path:`/product/:id`,categories:[`shopping`],example:`/smzdm/product/zm5vzpe`,parameters:{id:`商品 id，网址上直接可以看到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wiki.smzdm.com/p/:id`],target:`/product/:id`}],name:`商品`,maintainers:[`chesha1`],handler:i};async function i(r){let i=`https://wiki.smzdm.com/p/${r.req.param(`id`)}`,a=await e(i),o=n(a),s=o(`title`).text(),c=o(`ul#feed-main-list li`).toArray().map(e=>{let t=o(e).find(`img`).attr(`alt`),n=o(e).find(`h5.feed-block-title a`).attr(`href`),r=o(e).find(`.z-highlight`).text(),i=t+` `+r,a=o(e).find(`.feed-block-descripe`).text().replaceAll(/\s+/g,``);return{title:i,link:n,description:a}}),l=await Promise.all(c.map(r=>t.tryGet(r.link,async()=>{let t=await e(r.link),i=n(t);if(i(`span.old`).length>0)return null;{let e=i(`meta[name="weibo:webpage:create_at"]`).attr(`content`);return r.pubDate=e,r.description===`阅读全文`&&(r.description=i(`p[itemprop="description"]`).first().html()),r}}))),u=l.filter(e=>e!==null);return{title:s,link:i,item:u}}export{r as route};