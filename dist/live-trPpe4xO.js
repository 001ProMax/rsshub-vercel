import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-BwctkUCD.js";import{ViewType as n}from"./types-Bi82qguM.js";const r=`kimne78kx3ncx6brgo4mv6wki5h1ko`,i={path:`/live/:login`,categories:[`live`,`popular`],view:n.Notifications,example:`/twitch/live/riotgames`,parameters:{login:`Twitch username`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Live`,maintainers:[`hoilc`],handler:a};async function a(n){let i=n.req.param(`login`),a=await t({method:`post`,url:`https://gql.twitch.tv/gql`,headers:{Referer:`https://player.twitch.tv`,"Client-ID":r},json:[{operationName:`ChannelShell`,extensions:{persistedQuery:{version:1,sha256Hash:`c3ea5a669ec074a58df5c11ce3c27093fa38534c94286dc14b68a25d5adcbf55`}},variables:{login:i,lcpVideosEnabled:!1}},{operationName:`StreamMetadata`,extensions:{persistedQuery:{version:1,sha256Hash:`059c4653b788f5bdb2f5a2d2a24b0ddc3831a15079001a3d927556a96fb0517f`}},variables:{channelLogin:i}},{operationName:`RealtimeStreamTagList`,extensions:{persistedQuery:{version:1,sha256Hash:`a4747cac9d8e8bf6cf80969f6da6363ca1bdbd80fe136797e71504eb404313fd`}},variables:{channelLogin:i}}]}),o=a.data[0].data,s=a.data[1].data,c=a.data[2].data;if(!o.userOrError.id)throw Error(o.userOrError.__typename);let l=o.userOrError.displayName,u=[];return s.user.stream&&u.push({title:s.user.lastBroadcast.title,author:l,category:c.user.stream.freeformTags.map(e=>e.name),description:`<img style="max-width: 100%;" src="https://static-cdn.jtvnw.net/previews-ttv/live_user_${i}.jpg">`,pubDate:e(s.user.stream.createdAt),guid:s.user.stream.id,link:`https://www.twitch.tv/${i}`}),{title:`Twitch - ${l} - Live`,link:`https://www.twitch.tv/${i}`,item:u,allowEmpty:!0}}export{i as route};