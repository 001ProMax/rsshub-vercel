import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-BwctkUCD.js";import{timezone as n}from"./timezone-CCdTtC9I.js";import{load as r}from"cheerio";const i=`mydrivers.com`,a=`https://m.${i}`,o=`https://rss.${i}`,s=new URL(`m/newsvote.ashx`,a).href,c=`快科技`,l={new:`最新`,hot:`热门`,zhibo:`直播`},u=e=>{let t=e.split(`/`),n=[];for(let[e,r]of t.reduce((e,t,n)=>(n%2==0?e.push([t]):e.at(-1).push(t),e),[]))n.push(`${e}=${r}`);return`?${n.join(`&`)}`},d=(e,n,i)=>n(e,async()=>{let{data:n}=await t(e),o=r(n),s=new URL(o(`link[rel="apple-touch-icon-precomposed"]`).prop(`href`),a).href,l=`https:${o(`div.logo a img`).prop(`src`)}`,u=o(`div.hottime a`).toArray().map(e=>o(e).text());return{title:`${c} - ${i!==void 0&&u?u[i]:o(`a[data-id="${e.split(/=/).pop()}"]`).text()||o(`#newsEventSwitch a.cur`).text()}`,link:e,description:o(`meta[name="description"]`).prop(`content`),language:`zh-cn`,image:l,icon:s,logo:s,subtitle:o(`meta[name="keywords"]`).prop(`content`),author:c,allowEmpty:!0}}),f=async(o,c)=>await Promise.all(o.map(o=>c(`${i}#${o.guid}`,async()=>{let{data:c}=await t(`${a}/newsview/${o.guid}.html`),{data:l}=await t.post(s,{json:{Tid:o.guid}}),u=r(c);return o.title=u(`div.news_t`).text()||o.title,o.description=u(`#content`).html()??o.description,o.author=u(`li.writer`).text()||o.author,o.category=[...o.category??[],...u(`div.bqian1 a`).toArray().map(e=>u(e).contents().last().text().trim())].filter(Boolean),o.guid=`${i}#${o.guid}`,o.pubDate=o.pubDate??n(e(u(`li.writer`).next().text().trim(),`YYYY年MM月DD日 HH:mm`),8),o.upvotes=l.NewsSupport?Number.parseInt(l.NewsSupport,10):0,o.downvotes=l.NewsOppose?Number.parseInt(l.NewsOppose,10):0,o.comments=u(`#tpinglun`).text()?Number.parseInt(u(`#tpinglun`).text(),10):0,o})));export{l as categories,u as convertToQueryString,d as getInfo,f as processItems$8,o as rootRSSUrl,a as rootUrl$16,c as title};