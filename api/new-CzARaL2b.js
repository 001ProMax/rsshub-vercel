import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CDAeBYLA.js";import"./helpers-RrXnNmv1.js";import{parseDate as e}from"./parse-date-B2cCVoGk.js";import{got_default as t}from"./got-Cw4D6IS5.js";import{invalid_parameter_default as n}from"./invalid-parameter-0LlYSQjk.js";import{ViewType as r}from"./types-DygLf1a3.js";import{load as i}from"cheerio";const a=`https://www.dlsite.com`,o={home:{type:`home`,name:`「DLsite 同人」`,url:`/home/new`},comic:{type:`comic`,name:`「DLsite コミック」`,url:`/comic/new`},soft:{type:`soft`,name:`「DLsite PCソフト」`,url:`/soft/new`},maniax:{type:`maniax`,name:`「DLsite 同人 - R18」`,url:`/maniax/new`},books:{type:`books`,name:`「DLsite 成年コミック - R18」`,url:`/books/new`},pro:{type:`pro`,name:`「DLsite 美少女ゲーム」`,url:`/pro/new`},girls:{type:`girls`,name:`「DLsite 乙女」`,url:`/girls/new`},bl:{type:`bl`,name:`「DLsite BL」`,url:`/bl/new`}},s={path:`/new/:type`,categories:[`anime`,`popular`],view:r.Articles,example:`/dlsite/new/home`,parameters:{type:{description:`类型`,options:Object.values(o).map(e=>({value:e.type,label:e.name}))}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Current Release`,maintainers:[`cssxsh`],handler:c,description:`| Doujin | Comics | PC Games | Doujin (R18) | Adult Comics | H Games | Otome | BL |
| ------ | ------ | -------- | ------------ | ------------ | ------- | ----- | -- |
| home   | comic  | soft     | maniax       | books        | pro     | girls | bl |`};async function c(r){let s=o[r.req.param(`type`)];if(s===void 0)throw new n(`不支持指定类型！`);let c=s.url.slice(1),l=await t(new URL(c,a),{method:`GET`}),u=l.data,d=i(u),f=d(`title`).text(),p=d(`meta[name="description"]`).attr(`content`),m=d(`.n_worklist_item`),h=d(`.work_update`).text().trim().replaceAll(/（.*）/g,``),g=e(h,`YYYY年M月D日`),_=m.toArray().map(e=>{let t=d(`.work_name`,e).text(),n=d(`.work_name > a`,e).attr(`href`);d(`a`,e).each((e,t)=>{d(t).attr(`target`,`_blank`)});let r=d(e).html(),i=d(`.search_tag`,e),a=d(`a`,i).toArray().map(e=>d(e).text()),o=d(`.maker_name`,e).text(),s={title:t,link:n,description:r,category:a,author:o,pubDate:g};return s});return{title:f,link:c,description:p,language:`ja-jp`,item:_}}export{s as route};