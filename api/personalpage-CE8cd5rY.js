import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{got_default as e}from"./got-BwctkUCD.js";const t={path:`/personalpage/:uid`,categories:[`new-media`],example:`/guancha/personalpage/243983`,parameters:{uid:`用户id， 可在URL中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`个人主页文章`,maintainers:[`Jeason0228`],handler:n};async function n(t){let n=t.req.param(`uid`),r=`https://user.guancha.cn`,i=`https://app.guancha.cn/user/get-published-list?page_size=20&page_no=1&uid=${n}`,a=await e({method:`get`,url:i,headers:{Referer:r}}),o=a.data.data.items,s=o[0].user_nick;function c(e){let t=/(\d+)\s*分钟前/,n=/(\d+)\s*小时前/,r=/昨天\s*(\d+):(\d+)/,i=/(\d+)-(\d+)\s*(\d+):(\d+)/,a=-8*3600*1e3,o=new Date().getTimezoneOffset()*60*1e3,s=o-a,c;if(e===`刚刚`)c=new Date;else if(t.test(e)){let n=t.exec(e);c=new Date(Date.now()-Number.parseInt(n[1])*60*1e3)}else if(n.test(e)){let t=n.exec(e);c=new Date(Date.now()-Number.parseInt(t[1])*60*60*1e3)}else if(r.test(e)){let t=r.exec(e);c=new Date(Date.now()-86400*1e3+s),c.setHours(Number.parseInt(t[1]),Number.parseInt(t[2]),0,0),c=new Date(c.getTime()-s)}else if(i.test(e)){let t=i.exec(e),n=new Date(Date.now()+s),r=n.getFullYear();c=new Date(r,Number.parseInt(t[1])-1,Number.parseInt(t[2]),Number.parseInt(t[3]),Number.parseInt(t[4])),c=new Date(c.getTime()-s)}else c=new Date(e);return c}return{title:`${s}-观察者-风闻社区`,link:i,description:`${s} 的个人主页`,item:o.map(e=>({title:e.title,description:e.summary,pubDate:c(e.pass_at),link:`https://user.guancha.cn/main/content?id=${e.id}`,author:e.user_nick}))}}export{t as route};