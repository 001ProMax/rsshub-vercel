import"./esm-shims-CtP6w_ML.js";import{config as e}from"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CDAeBYLA.js";import"./helpers-RrXnNmv1.js";import{cache_default as t}from"./cache-7MGQxbL-.js";import{parseDate as n}from"./parse-date-B2cCVoGk.js";import{got_default as r}from"./got-Cw4D6IS5.js";import{ViewType as i}from"./types-DygLf1a3.js";import{timezone as a}from"./timezone-1BLOtscE.js";const o={path:`/topic/:id`,categories:[`finance`,`popular`],view:i.Articles,example:`/jin10/topic/396`,parameters:{id:`N`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`xnews.jin10.com/topic/:id`]}],name:`主题文章`,maintainers:[`miles170`],handler:s,url:`jin10.com/`};async function s(i){let o=i.req.param(`id`),s=await t.tryGet(`jin10:topic:${o}`,async()=>{let{data:e}=await r(`https://reference-api.jin10.com/topic/getById?id=${o}`,{headers:{"x-app-id":`g93rhHb9DcDptyPb`,"x-version":`1.0.1`}});return e.data},e.cache.routeExpire,!1),c=await Promise.all(s.list.map(e=>t.tryGet(`jin10:reference:${e.id}`,async()=>{let{data:t}=await r(`https://reference-api.jin10.com/reference/getOne?id=${e.id}&type=news`,{headers:{"x-app-id":`g93rhHb9DcDptyPb`,"x-version":`1.0.1`}});return{title:e.title,description:t.data.content,author:e.author.nick,pubDate:a(n(e.display_datetime),8),link:`https://xnews.jin10.com/details/${e.id}`}})));return{title:s.title,link:`https://xnews.jin10.com/topic/${o}`,description:s.introduction,item:c}}export{o as route};