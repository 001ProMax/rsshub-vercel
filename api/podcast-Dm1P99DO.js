import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as e}from"./ofetch-CWQqZcqz.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{ViewType as n}from"./types-Bi82qguM.js";import{load as r}from"cheerio";const i={path:`/podcast/:id`,categories:[`multimedia`,`popular`],view:n.Audios,example:`/xiaoyuzhou/podcast/6021f949a789fca4eff4492c`,parameters:{id:`播客 id 或单集 id，可以在小宇宙播客的 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`xiaoyuzhoufm.com/podcast/:id`,`xiaoyuzhoufm.com/episode/:id`]}],name:`播客`,maintainers:[`hondajojo`,`jtsang4`,`pseudoyu`],handler:a,url:`xiaoyuzhoufm.com/`};async function a(n){let i=n.req.param(`id`),a,o,s,c;try{a=`https://www.xiaoyuzhoufm.com/podcast/${i}`,o=await e(a),s=r(o);let t=s(`#__NEXT_DATA__`).get(0);if(c=JSON.parse(t.children[0].data),!c.props.pageProps.podcast?.episodes)throw Error(`No episodes found in podcast data`)}catch{a=`https://www.xiaoyuzhoufm.com/episode/${i}`,o=await e(a),s=r(o);let t=s(`a[href^="/podcast/"].name`).attr(`href`);if(t){let n=t.split(`/`).pop();a=`https://www.xiaoyuzhoufm.com/podcast/${n}`,o=await e(a),s=r(o);let i=s(`#__NEXT_DATA__`).get(0);c=JSON.parse(i.children[0].data)}}let l=c.props.pageProps.podcast.episodes.map(e=>({title:e.title,enclosure_url:e.enclosure.url,itunes_duration:e.duration,enclosure_type:`audio/mpeg`,link:`https://www.xiaoyuzhoufm.com/episode/${e.eid}`,pubDate:t(e.pubDate),description:e.shownotes,itunes_item_image:(e.image||e.podcast?.image)?.smallPicUrl}));return{title:c.props.pageProps.podcast.title,link:`https://www.xiaoyuzhoufm.com/podcast/${c.props.pageProps.podcast.pid}`,itunes_author:c.props.pageProps.podcast.author,itunes_category:``,image:c.props.pageProps.podcast.image.smallPicUrl,item:l,description:c.props.pageProps.podcast.description}}export{i as route};