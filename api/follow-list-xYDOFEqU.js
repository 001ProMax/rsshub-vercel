import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import"./cache-CvppK6AM.js";import{art as n}from"./render-DE4LRFBD.js";import{got_default as r}from"./got-BwctkUCD.js";import"./config-not-found-QwO11ree.js";import{cache_default$2 as i}from"./cache-BLQYecDy.js";import a from"node:path";t();const o=(t,r)=>n(a.join(e,`templates/description-d08e0099.art`),{description:t,images:r}),s={path:`/bbs/follow-list/:uid`,categories:[`game`],example:`/mihoyo/bbs/follow-list/77005350`,parameters:{uid:`用户uid`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`米游社 - 用户关注`,maintainers:[`CaoMeiYouRen`],handler:c};async function c(e){let t=e.req.param(`uid`),n=e.req.query(`limit`)||`20`,a={gids:2,uid:t,page_size:n},s=`https://www.miyoushe.com/ys/accountCenter/followList?id=${t}`,c=`https://bbs-api.miyoushe.com/user/wapi/following`,l=await r({method:`get`,url:c,searchParams:a,headers:{Origin:`https://www.miyoushe.com`,Referer:s}}),u=l?.data?.data?.result;if(!u)throw Error(`未获取到数据！`);let{nickname:d}=await i.getUserFullInfo(e,t),f=`米游社 - ${d} 的关注`,p=u.map(e=>{let t=e.user.nickname,n=`https://www.miyoushe.com/ys/accountCenter/postList?id=${e.user.uid}`,r=o(`${e.user.certification.label||``}\n${e.user.introduce||``}`.trim(),[e.user.avatar_url]);return{title:t,link:n,description:r}}),m={title:f,link:s,item:p};return m}export{s as route};