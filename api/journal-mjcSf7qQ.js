import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{art as n}from"./render-DE4LRFBD.js";import{got_default as r}from"./got-BwctkUCD.js";import i from"node:path";import{load as a}from"cheerio";import{CookieJar as o}from"tough-cookie";t();const s=new o,c={path:`/:journal`,categories:[`journal`],example:`/mdpi/analytica`,parameters:{journal:`Journal Name, get it from the journal homepage`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.mdpi.com/journal/:journal`]}],name:`Journal`,maintainers:[`Derekmini`],handler:l};async function l(t){let o=t.req.param(`journal`),c=`https://www.mdpi.com`,l=`${c}/journal/${o}`,u=await r(l,{cookieJar:s}),d=a(u.data),f=d(`.journal__description`).find(`h1`).text(),p=`${c}${d(`.side-menu-ul`).find(`a`).eq(1).attr(`href`)}`,m=await r(p,{cookieJar:s}),h=a(m.data),g=h(`.content__container`).find(`h1`).text().trim(),_=h(`.article-item`).map((e,t)=>{let n=h(t).find(`.title-link`).text(),r=`${c}${h(t).find(`.title-link`).attr(`href`)}`,i=h(t).find(`.authors`).find(`.inlineblock`).text(),a=h(t).find(`.color-grey-dark`).find(`a`).attr(`href`),o=``;a!==void 0&&(o=a.replace(`https://doi.org/`,``)),h(t).find(`.abstract-full`).find(`a`).remove();let s=h(t).find(`.abstract-full`).text().trim(),l=`${c}${h(t).find(`.openpopupgallery`).find(`img`).attr(`data-src`)}`;return{title:n,authors:i,link:r,doi:o,abstract:s,issue:g,img:l}}).get(),v=t=>n(i.join(e,`templates/description-d979b276.art`),{item:t}),y=_.map(e=>(e.description=v(e),e));return{title:f,link:l,item:y}}export{c as route};