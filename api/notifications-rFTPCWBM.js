import"./esm-shims-CtP6w_ML.js";import{config as e}from"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as t}from"./ofetch-CWQqZcqz.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{config_not_found_default as r}from"./config-not-found-QwO11ree.js";const i=`https://api.github.com`,a={path:`/notifications`,categories:[`programming`],example:`/github/notifications`,features:{requireConfig:[{name:`GITHUB_ACCESS_TOKEN`,description:``}]},radar:[{source:[`github.com/notifications`]}],name:`Notifications`,maintainers:[`zhzy0077`],handler:o,url:`github.com/notifications`};async function o(a){if(!e.github||!e.github.access_token)throw new r(`GitHub trending RSS is disabled due to the lack of <a href="https://docs.rsshub.app/deploy/config#route-specific-configurations">relevant config</a>`);let o={Accept:`application/vnd.github.v3+json`,Authorization:`Bearer ${e.github.access_token}`,"X-GitHub-Api-Version":`2022-11-28`},s=await t.raw(`${i}/notifications`,{headers:o}),c=s._data,l=c.map(e=>{let t=e.subject.url?e.subject.url.replace(`https://api.github.com/repos/`,`https://github.com/`):`https://github.com/notifications`;return t.includes(`/releases/`)&&(t=t.replace(/\/releases\/\d+$/,`/releases`)),{title:e.subject.title,description:e.subject.title,pubDate:n(e.updated_at),guid:e.id,link:t}});return a.set(`json`,{title:`Github Notifications`,item:c,rateLimit:{limit:Number.parseInt(s.headers[`x-ratelimit-limit`]),remaining:Number.parseInt(s.headers[`x-ratelimit-remaining`]),reset:n(Number.parseInt(s.headers[`x-ratelimit-reset`]),`X`),resoure:s.headers[`x-ratelimit-resource`],used:Number.parseInt(s.headers[`x-ratelimit-used`])}}),{title:`Github Notifications`,link:`https://github.com/notifications`,item:l}}export{a as route};