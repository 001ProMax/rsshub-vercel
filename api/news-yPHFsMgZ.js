import"./esm-shims-CtP6w_ML.js";import{config as e}from"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as t}from"./cache-CvppK6AM.js";import"./render-DE4LRFBD.js";import{got_default as n}from"./got-BwctkUCD.js";import{processItems$10 as r}from"./utils-Bm2r3HYa.js";const i={path:`/news/:lang?/:id?`,categories:[`traditional-media`],example:`/dw/news`,parameters:{lang:`Language, see below, default to en`,id:`Category ID, see below, default to the id of the Top Stories Page of the language chosen`},features:{requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,requireConfig:!1},name:`News`,maintainers:[`quiniapiezoelectricity`],handler:s,description:`
::: tip
Parameters can be obtained from the official website, for instance:
For the site https://www.dw.com/de/deutschland/s-12321 the language code would be \`de\` and the category ID would be \`s-1432\`.
:::
`,radar:[{source:[`www.dw.com/:lang/:name/:id`],target:`/news/:lang/:id`}]},a=`https://www.dw.com/graph-api/en/content/navigation/9097`,o=new Set([`Article`,`Liveblog`,`Video`]);async function s(i){let s=i.req.param(`lang`)??`en`,c=i.req.param(`id`);if(/^s-\d+$/.test(c))c=c.match(/^s-(\d+)$/i)[1];else if(c===void 0){let r=await t.tryGet(`dw:navigation`,async()=>{let e=await n(a);return e.data.data.content.topStoriesNavigations},e.cache.routeExpire,!1);c=r.map(e=>e.namedUrl.split(`/`)).find(e=>e[1]===s)[3].match(/^s-(\d+)$/i)[1]}let l=await n(`https://www.dw.com/graph-api/${s}/content/navigation/${c}`),u=l.data.data.content;t.set(`dw:navigation`,u.topStoriesNavigations,e.cache.routeExpire);let d=u.contentComposition.informationSpaces.flatMap(e=>Object.values(e).flatMap(e=>e[0]?.contents||[])).filter(e=>o.has(e.__typename)&&e.id),f=await r(d.map(e=>(e.link=new URL(e.namedUrl,`https://www.dw.com`).href,e.pubDate=e.contentDate,e.description=e.teaser,e.language=s,e.type=e.__typename.toLowerCase(),e)));return{title:`DW | ${u.title}`,link:u.canonicalUrl,description:u.metaDescription,language:u.topStoriesNavigations.find(e=>e.namedUrl.startsWith(`/${s}/`))?.localeLang??s,item:f}}export{i as route};