import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{art as n}from"./render-DE4LRFBD.js";import{got_default as r}from"./got-BwctkUCD.js";import i from"node:path";import{load as a}from"cheerio";t();const o=`https://www.patagonia.com`,s={mens:[`mens-new`,`mens-new-arrivals`],womens:[`womens-new`,`womens-new-arrivals`],kids:[`kids-new-arrivals`,`kids-baby-new-arrivals`],luggage:[`luggage-new-arrivals`,`luggage-new-arrivals`]};function c(e){let t=new URL(e),n=t.searchParams.get(`sfrm`);return t.search=new URLSearchParams({sfrm:n}).toString(),t.toString()}const l={path:`/new-arrivals/:category`,categories:[`shopping`],example:`/patagonia/new-arrivals/mens`,parameters:{category:`category, see below`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`New Arrivals`,maintainers:[],handler:u,description:`| Men's | Women's | Kids' & Baby | Packs & Gear |
| ----- | ------- | ------------ | ------------ |
| mens  | womens  | kids         | luggage      |`};async function u(t){let l=t.req.param(`category`),u=`${o}/on/demandware.store/Sites-patagonia-us-Site/en_US/Search-LazyGrid`,d=await r({method:`get`,url:u,searchParams:{cgid:s[l][0],isLazyGrid:!0}}),f=d.data,p=a(f),m=p(`.product`).map(function(){let t={};t.title=p(this).find(`.product-tile`).data(`tealium`).product_name[0];let r=new URL(p(this).find(`[itemprop="image"]`).attr(`content`));r=c(r);let a=p(this).find(`[itemprop="price"]`).eq(0).text();return t.link=o+`/`+p(this).find(`[itemprop="url"]`).attr(`href`),t.description=a+n(i.join(e,`templates/product-description-5678e430.art`),{imgUrl:r}),t.category=p(this).find(`[itemprop="category"]`).attr(`content`),t}).get();return{title:`Patagonia - New Arrivals - ${l.toUpperCase()}`,link:`${o}/shop/${s[l][1]}`,description:`Patagonia - New Arrivals - ${l.toUpperCase()}`,item:m.map(e=>({title:e.title,description:e.description,link:e.link,category:e.category}))}}export{l as route};