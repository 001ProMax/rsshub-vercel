import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{got_default as e}from"./got-BwctkUCD.js";import{load as t}from"cheerio";const n=new Set([`all`,`magnet`,`ed2k`,`baidu`,`subhd`,`quark`,`115`]),r={path:`/portfolio/:id`,categories:[`multimedia`],example:`/zimuxia/portfolio/我们这一天`,parameters:{id:`剧集名，可在剧集页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`zimuxia.cn/portfolio/:id`]}],name:`剧集`,maintainers:[`nczitzk`],handler:i,description:"::: tip\n本路由以 `magnet` 为默认 linktype，可以通过在路由后方加上 `?linktype=链接类型` 指定导出的链接类型。比如路由为 [`/zimuxia/portfolio/我们这一天?linktype=baidu`](https://rsshub.app/zimuxia/portfolio/我们这一天?linktype=baidu) 来导出百度盘链接。目前，你可以选择的 `链接类型` 包括: `magnet`(默认), `all`(所有), `ed2k`(电驴), `baidu`(百度盘), `quark`(夸克盘), `115`(115 盘), `subhd`(字幕).\n:::"};async function i(r){let i=r.req.param(`id`),a=r.req.query(`linktype`)??`magnet`;a=n.has(a)?a:`magnet`,a=a===`all`?`.`:a;let o=`https://www.zimuxia.cn`,s=`${o}/portfolio/${i}`,c=await e({method:`get`,url:s,https:{rejectUnauthorized:!1}}),l=t(c.data),u=l(`a`).filter((e,t)=>l(t).attr(`href`)?.match(RegExp(a))).toArray().map(e=>{e=l(e);let t=l.html(e.parent().children()[e.prevAll(`br`).first().index()+1]),n=e.parent().contents().toArray().map(e=>l.html(l(e))),r=n[n.indexOf(t)-1].trim().replace(/\s.*|&nbsp;.*/,``);return{link:s,title:r,description:`<p>${e.parent().html()}</p>`,enclosure_url:e.attr(`href`),enclosure_type:`application/x-bittorrent`,guid:`${s}#${r}`}}).reverse();return{title:`${l(`.content-page-title`).text()} - FIX字幕侠`,link:s,item:u}}export{r as route};