import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{got_default as i}from"./got-BwctkUCD.js";import a from"node:path";import{load as o}from"cheerio";t();const s=`61a2f329348b3bf77`,c=`xinpianchang.com`,l=`https://www.${c}`,u=`https://mod-api.${c}`,d=(e,t)=>t(e,async()=>{let{data:t}=await i(e),n=o(t),r=new URL(`favicon.ico`,l).href,a=n(`meta[property="og:site_name"]`).prop(`content`);return{data:{title:n(`span.bg-clip-text`).text()||`${a}Â·${n(`meta[property="og:title"]`).prop(`content`).split(`-`)[0]}`,link:e,description:n(`meta[property="og:description"]`).prop(`content`),language:n(`html`).prop(`lang`),image:n(`meta[property="og:image"]`).prop(`content`),icon:r,logo:r,subtitle:n(`meta[property="og:description"]`).prop(`content`),author:a,itunes_author:a,itunes_category:`TV &amp Film`,allowEmpty:!0},response:t}}),f=async(t,o)=>(t=t.map(e=>({title:e.title,link:e.web_url,description:e.content,author:e.author.userinfo.username,category:e.categories.flatMap(e=>[e.category_name,e.sub?.category_name]).filter(Boolean),guid:`xinpianchang-${e.id}`,pubDate:r(e.publish_time*1e3),itunes_item_image:e.cover,itunes_duration:e.duration,enclosure_url:e.video_library_id,upvotes:e.count.count_liked??e.count.count_like,comments:e.count.count_comment??0})),await Promise.all(t.map(t=>o(t.guid,async()=>{let r=new URL(`mod/api/v2/media/${t.enclosure_url}?appKey=${s}`,u).href,{data:o}=await i(r),c=o.data,l=c.resource?.progressive?c.resource.progressive[0]:void 0;return t.title=c.title??t.title,t.description=n(a.join(e,`templates/description-f6d7881b.art`),{content:t.description,cover:c.cover??t.itunes_item_image,enclousure:l}),t.author=c.owner.username??t.author,t.category=[...new Set([...t.category,...c.categories??[],...c.keywords??[]])],t.itunes_item_image=c.cover??t.itunes_item_image,t.itunes_duration=c.duration??t.itunes_duration,l&&(t.enclosure_url=l.url??l.backupUrl,t.enclosure_length=l.filesize,t.enclosure_type=l.mime),t}))));export{d as getData$3,f as processItems$9,l as rootUrl$17};