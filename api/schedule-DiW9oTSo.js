import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{got_default as e}from"./got-BwctkUCD.js";import{invalid_parameter_default as t}from"./invalid-parameter-CvwVNf6G.js";const n=`kimne78kx3ncx6brgo4mv6wki5h1ko`,r={path:`/schedule/:login`,categories:[`live`],example:`/twitch/schedule/riotgames`,parameters:{login:`Twitch username`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.twitch.tv/:login/schedule`]}],name:`Stream Schedule`,maintainers:[`hoilc`],handler:i};async function i(r){let i=r.req.param(`login`),a=new Date,o=new Date(a.getTime()+864e5*7),s=await e({method:`post`,url:`https://gql.twitch.tv/gql`,headers:{Referer:`https://player.twitch.tv`,"Client-ID":n},json:[{operationName:`ChannelShell`,extensions:{persistedQuery:{version:1,sha256Hash:`c3ea5a669ec074a58df5c11ce3c27093fa38534c94286dc14b68a25d5adcbf55`}},variables:{login:i,lcpVideosEnabled:!1}},{operationName:`StreamSchedule`,variables:{login:i,startingWeekday:`MONDAY`,utcOffsetMinutes:480,startAt:a.toISOString(),endAt:o.toISOString()},extensions:{persistedQuery:{version:1,sha256Hash:`01925339777a81111ffac469430bc4ea4773c18a3c1642f1b231e61e2278ea41`}}}]}),c=s.data[0].data,l=s.data[1].data;if(!l.user.id)throw new t(`Username does not exist`);let u=c.userOrError.displayName,d=l.user.channel.schedule.segments?.map(e=>({title:e.title,guid:e.id,link:`https://www.twitch.tv/${i}`,author:u,description:`StartAt: ${e.startAt}</br>EndAt: ${e.endAt}`,category:e.categories.map(e=>e.name)}));return{title:`Twitch - ${u} - Schedule`,link:`https://www.twitch.tv/${i}`,item:d,allowEmpty:!0}}export{r as route};