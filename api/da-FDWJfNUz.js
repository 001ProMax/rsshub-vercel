import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BwctkUCD.js";import{load as r}from"cheerio";import i from"iconv-lite";const a=`http://www.design.zjut.edu.cn/`,o=`http://www.design.zjut.edu.cn/BigClass.jsp?`,s=new Map([[1,{id:`bigclassid=16`,title:`学院新闻 - 浙工大设建学院`}],[2,{id:`bigclassid=18`,title:`公告通知 - 浙工大设建学院`}],[3,{id:`bigclassid=5&sid=25`,title:`科研申报 - 浙工大设建学院`}],[4,{id:`bigclassid=5&sid=26`,title:`科研成果 - 浙工大设建学院`}],[5,{id:`bigclassid=5&sid=27`,title:`文件与资源 - 浙工大设建学院`}],[6,{id:`bigclassid=20`,title:`学术交流 - 浙工大设建学院`}]]),c={path:`/da/:type`,categories:[`university`],example:`/zjut/da/1`,parameters:{type:`分类，见下表`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`设计与建筑学院`,maintainers:[`yikZero`],url:`www.design.zjut.edu.cn`,handler:l,description:`| 学院新闻 | 公告通知 | 科研申报 | 科研成果 | 文件与资源 | 学术交流 |
| -------- | -------- | -------- | -------- | -------- | -------- |
| 1        | 2        | 3        | 4        | 5        | 6        |`};async function l(c){let l=Number.parseInt(c.req.param(`type`)),u=s.get(l)?.id,d=await n(`${o}${u}`,{responseType:`buffer`});d.data=i.decode(d.data,`gbk`);let f=r(d.data),p=f(`td[class='newstd'] .news2`).map((e,n)=>{n=f(n);let r=n.find(`a`).text(),i=n.find(`a`).attr(`href`);if(!i)return null;i.startsWith(`http`)||(i=a+i);let o=n.next().text().replace(`[`,``).replace(`]`,``);return{title:r,description:``,pubDate:t(o),link:i}}).get(),m=await Promise.all(p.map(t=>e.tryGet(t.link,async()=>{let e=await n(t.link),i=r(e.data);return t.description=i(`div[style="line-height:27px;"]`).html(),t})));return{title:s.get(l)?.title,link:`${o}${u}`,item:m}}export{c as route};