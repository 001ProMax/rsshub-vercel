import"./esm-shims-CtP6w_ML.js";import{config as e}from"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CDAeBYLA.js";import"./helpers-RrXnNmv1.js";import{cache_default as t}from"./cache-7MGQxbL-.js";import{got_default as n}from"./got-Cw4D6IS5.js";import{ViewType as r}from"./types-DygLf1a3.js";import{timezone as i}from"./timezone-1BLOtscE.js";import{fallback as a,queryToBoolean as o}from"./readable-social-Dld9apEb.js";import{utils_default$10 as s}from"./utils-BZW6UCpZ.js";import c from"querystring";const l={path:`/keyword/:keyword/:routeParams?`,categories:[`social-media`,`popular`],view:r.SocialMedia,example:`/weibo/keyword/RSSHub`,parameters:{keyword:`你想订阅的微博关键词`,routeParams:`额外参数；请参阅上面的说明和表格`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`关键词`,maintainers:[`DIYgod`,`Rongronggg9`],handler:u};async function u(r){let l=r.req.param(`keyword`),u=await t.tryGet(`weibo:keyword:${l}`,async()=>{let e=await n({method:`get`,url:`https://m.weibo.cn/api/container/getIndex?containerid=100103type%3D61%26q%3D${encodeURIComponent(l)}%26t%3D0`,headers:{Referer:`https://m.weibo.cn/p/searchall?containerid=100103type%3D1%26q%3D${encodeURIComponent(l)}`,"MWeibo-Pwa":1,"X-Requested-With":`XMLHttpRequest`,"User-Agent":`Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1`}});return e.data.data.cards},e.cache.routeExpire,!1),d=c.parse(r.req.param(`routeParams`));return s.sinaimgTvax({title:`又有人在微博提到${l}了`,link:`http://s.weibo.com/weibo/${encodeURIComponent(l)}&b=1&nodup=1`,description:`又有人在微博提到${l}了`,item:u.filter(e=>e.mblog).map(e=>(e.mblog.created_at=i(e.mblog.created_at,8),e.mblog.retweeted_status&&e.mblog.retweeted_status.created_at&&(e.mblog.retweeted_status.created_at=i(e.mblog.retweeted_status.created_at,8)),s.formatExtended(r,e.mblog,void 0,{showAuthorInTitle:a(void 0,o(d.showAuthorInTitle),!0),showAuthorInDesc:a(void 0,o(d.showAuthorInDesc),!0)})))})}export{l as route};