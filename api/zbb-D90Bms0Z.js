import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-BwctkUCD.js";import{timezone as n}from"./timezone-CCdTtC9I.js";import{load as r}from"cheerio";const i={path:`/zbb/:type`,categories:[`university`],example:`/nju/zbb/cgxx`,parameters:{type:`分类名`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`招标办公室`,maintainers:[`ret-1`],handler:a,description:`| 采购信息 | 成交公示 | 政府采购意向公开 |
| -------- | -------- | ---------------- |
| cgxx     | cjgs     | zfcgyxgk         |`};async function a(i){let a=i.req.param(`type`);if(a===`zfcgyxgk`){let i=`https://zbb.nju.edu.cn/zfcgyxgk/index.chtml`,a=await t({method:`get`,url:i}),o=a.data,s=r(o),c=s(`dd[cid]`);return{title:`政府采购意向公开`,link:i,item:c.map((t,r)=>(r=s(r),{title:r.find(`a`).attr(`title`),description:r.find(`a`).first().text(),link:`https://zbb.nju.edu.cn`+r.find(`a`).attr(`href`),pubDate:n(e(r.find(`span`).first().text(),`YYYY-MM-DD`),8)})).get()}}else{let i={cgxx:`采购信息`,cjgs:`成交公示`},o={hw:`货物类`,gc:`工程类`,fw:`服务类`},s=await Promise.all(Object.keys(o).map(async i=>{let s=await t({method:`get`,url:`https://zbb.nju.edu.cn/${a}${i}/index.chtml`}),c=s.data,l=r(c),u=l(`dd[cid]`);return u.map((t,r)=>(r=l(r),{title:r.find(`a`).attr(`title`),description:r.find(`a`).first().text(),link:`https://zbb.nju.edu.cn`+r.find(`a`).attr(`href`),pubDate:n(e(r.find(`span`).first().text(),`YYYY-MM-DD`),8),category:o[i]})).get()}));return{title:i[a],link:`https://zbb.nju.edu.cn/${a}hw/index.chtml`,item:[...s[0],...s[1],...s[2]]}}}export{i as route};