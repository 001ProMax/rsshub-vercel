import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BwctkUCD.js";import{load as r}from"cheerio";const i=100,a=`https://layoffs.fyi`,o=`https://airtable.com/embed/shrqYt5kSqMzHV9R5/tbl8c8kanuNB6bPYr`,s=`https://airtable.com`,c=function(e){let t=new Map,n=new Map;for(let r in e)`name`in e[r]&&`id`in e[r]&&(n.set(e[r].name,e[r].id),t.set(e[r].id,e[r].name));return[t,n]},l={path:`/`,radar:[{source:[`layoffs.fyi/`],target:``}],name:`Unknown`,maintainers:[`BrandNewLifeJackie26`],handler:u,url:`layoffs.fyi/`};async function u(){let l={"x-airtable-application-id":`app1PaujS9zxVGUZ4`,"x-airtable-inter-service-client":`webClient`,"x-requested-with":`XMLHttpRequest`,"x-time-zone":`America/Los_Angeles`},u=await e.get(o),d=!1,f;if(u)try{f=await n({method:`get`,url:u,headers:l}),f.statusCode>=400&&(d=!0)}catch{d=!0}else d=!0;if(d){let t=await n({method:`get`,url:o}),i=r(t.data);u=s+i(`script`).text().match(/urlWithParams: "(.*?)"/)[1].replaceAll(String.raw`\u002F`,`/`),e.set(o,u),f=await n({method:`get`,url:u,headers:l})}let p=f.data.data,m=p.table,h=c(m.columns)[1],g=h.get(`Company`),_=h.get(`Date Added`),v=h.get(`# Laid Off`),y=h.get(`Source`),b=h.get(`Country`),x=c(m.columns.find(e=>e.name===`Country`).typeOptions.choices)[0],S=m.rows.slice(0,i);return{title:`Tech layoff data feed from layoffs.fyi`,link:a,description:`This feed gets tech layoff data from layoffs.fyi and display them in a user friendly way`,item:S.map(e=>{let n=e.cellValuesByColumnId,r=n[g],i=t(n[_]),a=n[y],o=n[v]||`some`,s=x.get(n[b]),c=`${r} Layoffs Happening!`,l=`${r} lays off ${o} employees in ${s}. For more details, please visit ${a}.`;return{title:c,description:l,pubDate:i,link:a}})}}export{l as route};