import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CDAeBYLA.js";import"./helpers-RrXnNmv1.js";import{parseDate as e}from"./parse-date-B2cCVoGk.js";import{got_default as t}from"./got-Cw4D6IS5.js";import{ViewType as n}from"./types-DygLf1a3.js";import{load as r}from"cheerio";const i={path:`/html_clip/:user/:tag`,example:`/inoreader/html_clip/1005137674/user-favorites`,categories:[`reading`,`popular`],view:n.Articles,name:`HTML Clip`,maintainers:[`EthanWng97`],handler:a};async function a(n){let i=`html`,a=n.req.param(`user`),o=n.req.param(`tag`),s=n.req.query(`limit`)||20,c=`https://www.inoreader.com/stream`,l=`${c}/user/${a}/tag/${o}/view/${i}?n=${s}`,u=await t({method:`get`,url:l}),d=u.data,f=r(d),p=f(`#snip_body>.article_content`);return{title:f(`.header_text`).text().trim(),link:l,item:p.map((t,n)=>{let r=f(n).clone(),i=f(n).prev(),a=f(`div.article_author .au1`,i).contents().filter((e,t)=>t.nodeType===3).text().replace(/posted (on|at) /,``).replace(/UTC.*/,``);return{title:f(`a.title_link`,i).text().trim(),link:f(`a.title_link`,i).attr(`href`),author:f(`div.article_author span span`,i).text().trim()+` via `+f(`div.article_author a.feed_link`,i).text().trim(),pubDate:e(a,[`MMM DD YYYY HH:mm:ss`,`HH:mm:ss`]),description:f(r).html()}}).get(),allowEmpty:!0}}export{i as route};