import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CDAeBYLA.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-7MGQxbL-.js";import"./parse-date-B2cCVoGk.js";import{got_default as t}from"./got-Cw4D6IS5.js";import{invalid_parameter_default as n}from"./invalid-parameter-0LlYSQjk.js";import{ViewType as r}from"./types-DygLf1a3.js";import{baseUrl$5 as i,getPlurk as a}from"./utils-BnUKTxwS.js";const o=new Set([`topReplurks`,`topFavorites`,`topResponded`]),s={path:`/top/:category?/:lang?`,categories:[`social-media`,`popular`],view:r.SocialMedia,example:`/plurk/top/topReplurks`,parameters:{category:"Category, see the table below, `topReplurks` by default",lang:"Language, see the table below, `en` by default"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Top`,maintainers:[`TonyRL`],handler:c,description:`| Top Replurks | Top Favorites | Top Responded |
| ------------ | ------------- | ------------- |
| topReplurks  | topFavorites  | topResponded  |

| English | 中文（繁體） |
| ------- | ------------ |
| en      | zh           |`};async function c(r){let{category:s=`topReplurks`,lang:c=`en`}=r.req.param();if(!o.has(s))throw new n(`Invalid category: ${s}`);let{data:l}=await t(`${i}/Stats/${s}`,{searchParams:{period:`day`,lang:c,limit:r.req.query(`limit`)?Number(r.req.query(`limit`)):90}}),u=await Promise.all(l.stats.map(e=>e[1]).map(t=>a(`plurk:${t.plurk_id}`,t,t.owner.display_name,e.tryGet)));return{title:`Top Plurk - Plurk`,image:`https://s.plurk.com/2c1574c02566f3b06e91.png`,link:`${i}/top#${s}`,item:u,language:c}}export{s as route};