import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{got_default as t}from"./got-BwctkUCD.js";import{timezone as n}from"./timezone-CCdTtC9I.js";import{load as r}from"cheerio";const i=async i=>{let{year:a=new Date().getFullYear()}=i.req.param(),o=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`),10):52,s=`https://www.niid.go.jp`,c=new URL(`niid/ja/idwr-dl/${a}.html`,s).href,{data:l}=await t(c),u=r(l),d=u(`html`).prop(`lang`),f=u(`div.items-row`).slice(0,o).toArray().map(t=>{t=u(t),t.find(`div.item-separator`).remove();let r=t.find(`div.item p`).first().text(),i=t.find(`div.item`).html(),o=t.find(`p.body1 a`).prop(`href`);return{title:r,description:i,pubDate:e(t.find(`p.contents`).text().match(/(\d{4}年\d{1,2}月\d{1,2}日)発行/)?.[1]??r.match(/(\d{4})年/)?.[1]??a,[`YYYY年M月D日`,`YYYY`]),link:o,content:{html:i,text:t.find(`div.item`).text()},updated:n(e(t.find(`.time`).prop(`datetime`)),8),language:d,enclosure_url:o,enclosure_type:o?`application/${o.split(/\./).pop()}`:void 0,enclosure_title:o?r:void 0}}),p=new URL(`niid/templates/gk_memovie/images/main_header.jpg`,s).href;return{title:`感染症発生動向調査週報ダウンロード${u(`title`).text()}`,description:`感染症発生動向調査週報ダウンロード`,link:c,item:f,allowEmpty:!0,image:p,author:`NIID国立感染症研究所`,language:d}},a={path:`/niid/idwr-dl/:year?`,name:`感染症発生動向調査週報ダウンロード`,url:`www.niid.go.jp`,maintainers:[`nczitzk`],handler:i,example:`/go/niid/idwr-dl/:year?`,parameters:{year:`Year, current year by default`},description:"::: tip\n  If you subscribe to [感染症発生動向調査週報ダウンロード2024年](https://www.niid.go.jp/niid/ja/idwr-dl/2024.html)，where the URL is `https://www.niid.go.jp/niid/ja/idwr-dl/2024.html`, extract the part `https://www.niid.go.jp/niid/ja/idwr-dl/` to the end, which is `.html`, and use it as the parameter to fill in. Therefore, the route will be [`/go/niid/idwr-dl/2024`](https://rsshub.app/go/niid/idwr-dl/2024).\n:::",categories:[`government`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.niid.go.jp/niid/ja/idwr-dl/:year`],target:e=>{let t=e.year;return`/niid/idwr-dl/${t?`/${t}`:``}`}}]};export{i as handler,a as route};