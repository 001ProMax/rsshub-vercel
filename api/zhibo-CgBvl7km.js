import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{got_default as i}from"./got-BwctkUCD.js";import a from"node:path";import o from"crypto-js";t();const s={m3u8:`x-mpegURL`,mp3:`mpeg`,mp4:`mp4`,m4a:`mp4`},c={path:`/zhibo/:id`,categories:[`multimedia`],example:`/radio/zhibo/1395528`,parameters:{id:`直播 id，可在对应点播页面的 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!0,supportScihub:!1},name:`直播`,maintainers:[`nczitzk`],handler:l,description:"如果订阅 [新闻和报纸摘要](http://www.radio.cn/pc-portal/sanji/zhibo_2.html?name=1395528)，其 URL 为 `http://www.radio.cn/pc-portal/sanji/zhibo_2.html?name=1395528`，可以得到 `name` 为 `1395528`\n\n  所以对应路由为 [`/radio/zhibo/1395528`](https://rsshub.app/radio/zhibo/1395528)\n\n::: tip\n  查看更多电台直播节目，可前往 [电台直播](http://www.radio.cn/pc-portal/erji/radioStation.html)\n:::"};async function l(t){let c=`f0fc4c668392f9f9a447e48584c214ee`,l=t.req.param(`id`),u=t.req.query(`limit`)??`100`,d=`columnId=${l}&pageNo=0&pageSize=${u}`,f=`https://www.radio.cn`,p=`https://ytmsout.radio.cn`,m=`${f}/pc-portal/image/icon_32.jpg`,h=`${f}/pc-portal/sanji/zhibo_2.html?name=${l}`,g=`${p}/web/appProgram/pageByColumn?${d}`,_=Date.now(),v=o.MD5(`${d}&timestamp=${_}&key=${c}`).toString().toUpperCase(),y=await i({method:`get`,url:g,headers:{sign:v,timestamp:_,"Content-Type":`application/json`,equipmentId:`0000`,platformCode:`WEB`}}),b=y.data.data.data,x=b.map(t=>{let i=t.playUrlHigh??t.playUrlLow;i=/\.m3u8$/.test(i)?t.downloadUrl:i;let o=new URL(i).pathname.split(`.`).pop(),c=o?`audio/${s[o]}`:``,l=new Date(t.startTime),u=`${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()}`;return{guid:t.id,title:`${u} ${t.name}`,link:i,description:n(a.join(e,`templates/description-3cdbaffc.art`),{description:t.des,enclosure_url:i,enclosure_type:c}),pubDate:r(t.startTime),enclosure_url:i,enclosure_type:c,itunes_duration:t.durationStr,itunes_item_image:m}});return{title:`云听 - ${b[0].name}`,link:h,item:x,image:m,itunes_author:`radio.cn`,description:b[0].des}}export{c as route};