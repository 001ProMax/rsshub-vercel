import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as n}from"./cache-CvppK6AM.js";import{art as r}from"./render-DE4LRFBD.js";import{got_default as i}from"./got-BwctkUCD.js";import a from"node:path";import{load as o}from"cheerio";const s=`https://oreno3d.com`;async function c(e){let t=`article.g-main-video-article`,n=`header > figure.video-figure > a `,r=`header > h1.video-h1 `,a=`section:nth-child(4) > a > div.video-center`,c=`section:nth-child(5) > a > div.video-center`,l=`section:nth-child(6) > a > div.video-center`,u=`section:nth-child(7) > ul > li > a div.tag-text`,d=`section blockquote.video-information-comment`,f=`header > figure.video-figure > a`,p=await i(e),m=o(p.data),h=[],g=[],_=[],v=[],y=s+m(n).find(`img`).attr(`src`),b=m(r).text();m(t).find(a).each(function(e){g[e]=m(this).text(),g[e].replace(` `,``),g[e].trim()}),m(t).find(c).each(function(e){_[e]=m(this).text(),_[e].replace(` `,``),_[e].trim()}),m(t).find(l).each(function(e){v[e]=m(this).text(),v[e].replace(` `,``),v[e].trim()}),m(t).find(u).each(function(e){h[e]=m(this).text(),h[e].replace(` `,``),h[e].trim()});let x=m(t).find(d).text(),S=m(f).attr(`href`);return{raw_pic_link:y,video_name:b,authors:g.join(` `),origins:_.join(` `),characters:v.join(` `),tags:h.join(` `),desc:x,iwara_link:S,oreno3d_link:e}}var l=c;t();const u=`https://oreno3d.com`,d={favorites:`高評価`,hot:`急上昇`,latest:`新着`,popularity:`人気`};function f(e,t,n){let r=``;if(t.req.param(`keyword`)){let i=t.req.param(`keyword`);r=`${e}/search?sort=${n}&keyword=${i}`}else if(t.req.param(`characterid`)){let i=t.req.param(`characterid`);r=`${e}/characters/${i}?sort=${n}`}else if(t.req.param(`authorid`)){let i=t.req.param(`authorid`);r=`${e}/authors/${i}?sort=${n}`}else if(t.req.param(`tagid`)){let i=t.req.param(`tagid`);r=`${e}/tags/${i}?sort=${n}`}else if(t.req.param(`originid`)){let i=t.req.param(`originid`);r=`${e}/origins/${i}?sort=${n}`}return r}const p={path:[`/authors/:authorid/:sort/:pagelimit?`,`/characters/:characterid/:sort/:pagelimit?`,`/origins/:originid/:sort/:pagelimit?`,`/search/:keyword/:sort/:pagelimit?`,`/tags/:tagid/:sort/:pagelimit?`],categories:[`anime`],example:`/oreno3d/authors/3189/latest/1`,parameters:{authorid:`Author id, can be found in URL`,sort:`Sort method, see the table above`,pagelimit:`The maximum number of pages to be crawled, the default is 1`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Author Search`,maintainers:[`xueli_sherryli`],handler:m,description:`| favorites | hot | latest | popularity |
| --------- | --- | ------ | ---------- |
| favorites | hot | latest | popularity |`};async function m(t){function s(e){let t=`a.box`,n=o(e.data),r=n(`div.g-main-list`).find(`h1.main-h`).text(),i=n(t);return{title:r,list:i}}async function c(t){let i=o(t.data),c=s(t).title,u=s(t).list,d=await Promise.all(u.map(async(t,o)=>{let s=i(o).attr(`href`),c=await l(s),u=c.raw_pic_link,d=c.video_name,f=c.authors,p=c.origins,m=c.characters,h=c.tags,g=c.desc,_=c.iwara_link,v=c.oreno3d_link,y=r(a.join(e,`templates/description-cefeafec.art`),{raw_pic_link:u,video_name:d,authors:f,origins:p,characters:m,tags:h,desc:g,iwara_link:_,oreno3d_link:v}),b=`${d} - ${f}`,x=await n.tryGet(v,()=>{let e={title:b,author:f,link:v,category:h.split(` `),description:y};return e});return x}).get());return{items:d,title:c}}let p=t.req.param(`sort`),m=t.req.param(`pagelimit`)??1,h=f(u,t,p),g=await i(h),_=o(g.data),v=`div.container > main > div.g-main-list > ul.pagination > li:last-child > a`;if(_(v)){let e=new URLSearchParams(_(v).attr(`href`)),t=e.get(`page`);Number.parseInt(m)>=Number.parseInt(t)&&(m=t)}else m=1;let y=[];y.push(g);let b=[];for(let e=1;e<m;e++)b.push(`${h}&page=${e+1}`);await Promise.all(b.map(async e=>{let t=await i(e);y.push(t)}));let x=[];await Promise.all(y.map(async e=>{let t=await c(e);x.push(t)}));let S=[];for(let e of x)S=[...S,...e.items];let C={title:x[0].title,item:S};return{title:`${C.title} - ${d[p]}(Page 1-${m})`,link:h,item:C.item}}export{p as route};