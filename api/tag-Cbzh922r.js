import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BwctkUCD.js";import{timezone as r}from"./timezone-CCdTtC9I.js";import{load as i}from"cheerio";const a=`https://www.ithome.com/`,o={path:`/tag/:name`,categories:[`new-media`],example:`/ithome/tag/win11`,parameters:{name:`标签名称，可从网址链接中获取`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`ithome.com/tag/:name`]}],name:`标签`,maintainers:[`Fatpandac`],handler:s};async function s(o){let s=o.req.param(`name`),c=`${a}tag/${s}`,l=await n(c),u=i(l.data),d=u(`ul.bl > li`).map((e,n)=>({title:u(n).find(`h2 > a`).text(),link:u(n).find(`h2 > a`).attr(`href`),pubDate:r(t(u(n).find(`div.c`).attr(`data-ot`)),8)})).get(),f=await Promise.all(d.map(t=>e.tryGet(t.link,async()=>{let e;try{e=await n(t.link)}catch{}if(!e)return;let r=i(e.data),a=r(`div.post_content`);return a.find(`img[data-original]`).each((e,t)=>{t=u(t),t.attr(`src`,t.attr(`data-original`)),t.removeAttr(`class`),t.removeAttr(`data-original`)}),t.description=a.html(),t.author=r(`span.author_baidu > strong`).text(),t})));return{title:`IT之家 - ${s}标签`,link:c,item:f.filter(Boolean)}}export{o as route};