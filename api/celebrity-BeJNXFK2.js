import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{got_default as e}from"./got-BwctkUCD.js";import{load as t}from"cheerio";const n={path:`/celebrity/:id/:sort?`,categories:[`social-media`],example:`/douban/celebrity/1274261`,parameters:{id:`电影人 id`,sort:"排序方式，缺省为 `time`（时间排序），可为 `vote` （评价排序）"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`豆瓣电影人`,maintainers:[`minimalistrojan`],handler:r};async function r(n){let r=n.req.param(`id`),i=n.req.param(`sort`)||`time`,a=await e({method:`get`,url:`https://movie.douban.com/celebrity/${r}/movies?sortby=${i}`}),o=a.data,s=t(o),c=s(`div.grid_view > ul li`),l=s(`#content > h1`).text().replace(/的全部作品（\d+）/,``),u;return{title:`豆瓣电影人 - ${l}`,link:`https://movie.douban.com/celebrity/${r}/movies?sortby=${i}`,item:c&&c.map((e,t)=>(t=s(t),u=t.find(`img`).attr(`src`),{title:`《`+t.find(`h6 > a`).text()+`》`+t.find(`h6 > span`).text().replace(`(`,`（`).replace(`)`,`）`).replace(`[`,`【`).replace(`]`,`】`),description:`<img src="${u}"/><br/>主演：${t.find(`dl > dd`).last().text()}<br/>评分：${t.find(`.star > span:nth-child(2)`).text()}`,link:t.find(`dt > a`).attr(`href`)})).get()}}export{n as route};