import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BwctkUCD.js";import{load as r}from"cheerio";const i={path:`/transcripts`,name:`Transcripts`,url:`reactiflux.com/transcripts`,maintainers:[`nczitzk`],handler:a,example:`/reactiflux/transcripts`,categories:[`programming`],radar:[{source:[`www.reactiflux.com/transcripts`],target:`/transcripts`}]};async function a(i){let a=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`),10):30,o=`https://www.reactiflux.com`,s=new URL(`transcripts`,o).href,{data:c}=await n(s),l=r(c),u=`Reactiflux`,d=`en`,f=l(`meta[property="og:image"]`).prop(`content`),p=JSON.parse(c.match(/__NEXT_DATA__" type="application\/json">(.*?)<\/script>/)?.[1]??`{}`)?.props.pageProps.all.slice(0,a).map(e=>{let t=e.title,n=`reactiflux-${e.path.replace(/\/transcripts\//,``)}`;return{title:t,link:new URL(e.path,o).href,author:u,guid:n,id:n,image:f,banner:f,language:d}})??[];return p=await Promise.all(p.map(r=>e.tryGet(r.link,async()=>{let{data:e}=await n(r.link),i=JSON.parse(e.match(/__NEXT_DATA__" type="application\/json">(.*)<\/script>/)?.[1]??`{}`);if(!i.props)return r;let a=i.props.pageProps,s=a.title,c=a.html,l=`reactiflux-${i.query.slug}`;return r.title=s,r.description=c,r.pubDate=t(a.date),r.link=new URL(`transcripts/${i.query.slug}`,o).href,r.author=u,r.guid=l,r.id=l,r.content={html:c,text:a.description},r.image=f,r.banner=f,r.language=d,r}))),{title:`${u} - ${l(`title`).text()}`,description:l(`meta[property="og:description"]`).prop(`content`),link:s,item:p,allowEmpty:!0,image:f,author:u,language:d}}export{a as handler,i as route};