import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{parseDate as e}from"./parse-date-DHsdom8D.js";import{getSubPath as t}from"./common-utils-C27Jp3s6.js";import{got_default as n}from"./got-BwctkUCD.js";import{timezone as r}from"./timezone-CCdTtC9I.js";const i={path:`/yjxx/*`,radar:[{source:[`cneb.gov.cn/yjxx`,`cneb.gov.cn/`],target:`/yjxx`}],name:`Unknown`,maintainers:[],handler:a,url:`cneb.gov.cn/yjxx`};async function a(i){let a=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`)):200,o=decodeURI(t(i)).replace(/\/yjxx/,``).split(`/`);o.shift();let s=o.find(e=>/.*色$/.test(e))??``,c=o.filter(e=>!/.*色$/.test(e)).slice(0,2),l=`http://www.cneb.gov.cn`,u=`https://gdapi.cnr.cn`,d=`${l}/yjxx`,f=`${u}/yjwnews`,p=`${c.join(``)}${s}`,m=await n({method:`post`,url:f,json:{size:a,level:s?`${s}预警`:``,province:c.shift(),city:c.shift()}}),h=m.data.datas.map(t=>({title:t.doctitle,link:t.docpuburl,author:t.chnlname,description:t.doccontent,pubDate:r(e(t.docpubtime),8)}));return{title:`国家应急广播 - ${p}预警信息`,link:d,item:h,allowEmpty:!0}}export{i as route};