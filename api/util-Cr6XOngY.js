import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{got_default as i}from"./got-BwctkUCD.js";import a from"node:path";import o from"zlib";t();const s={labelHot:`热门`,labelImportant:`重要消息`,defaultType:`article`},c={article:`article`,event:`timeline`,news:`news`},l=`https://foresightnews.pro`,u=`https://api.foresightnews.pro`,d=`https://img.foresightnews.pro`,f=new URL(`foresight.ico`,l).href,p=new URL(`vertical_logo.png`,d).href,m=async(t,u,...d)=>{d={...d.reduce((e,t)=>({...e,...t}),{}),size:u};let f={column:``},{data:p}=await i(t,{searchParams:d}),m=JSON.parse(String(o.inflateSync(Buffer.from(p.data?.list??p.data,`base64`))));return m=(m?.list??m).slice(0,u).map(t=>{let i=t.source_type??(t.source_link?t.column?.title?`article`:`news`:t.event_type?`event`:s.defaultType);t=t.source_type?t[t.source_type]:t;let o=t.column?.title;f.column=f.column||o;let u=[o,t.event_type,t.is_hot?s.labelHot:void 0,t.is_important?t.important_tag?.name??s.labelImportant:``,t.label,...t.tags?.map(e=>e.name)??[]].filter((e,t,n)=>e&&n.indexOf(e)===t),d=new URL(`${c[i]}/detail/${t.id}`,l).href;return{title:t.title,link:d,description:n(a.join(e,`templates/description-d0fddedb.art`),{image:t.img.split(`?`)[0],description:t.content??t.brief,source:t.source_link}),author:t.column?.title??t.author?.username??void 0,category:u,guid:`foresightnews-${i}#${t.id}`,pubDate:t.published_at?r(t.published_at*1e3):void 0,updated:t.last_update_at?r(t.last_update_at*1e3):void 0}}),{items:m,info:f}};export{u as apiRootUrl$2,f as icon,p as image,m as processItems$1,l as rootUrl$5};