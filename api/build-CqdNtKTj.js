import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CDAeBYLA.js";import"./helpers-RrXnNmv1.js";import{md5 as e}from"./md5-BdV0DUA8.js";import{got_default as t}from"./got-Cw4D6IS5.js";import{ViewType as n}from"./types-DygLf1a3.js";function r(t){let n=Object.entries(t).map(e=>`${e[1].os}/${e[1].architecture},${e[1].digest}`).sort((e,t)=>e.localeCompare(t)),r=n.join(`|`);return e(r)}const i={path:`/build/:owner/:image/:tag?`,categories:[`program-update`,`popular`],view:n.Notifications,example:`/dockerhub/build/diygod/rsshub/latest`,parameters:{owner:`Image owner, the owner of the official image fills in the library, for example: /dockerhub/build/library/mysql`,image:`Image name`,tag:{description:`Image tag`,default:`latest`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Image New Build`,maintainers:[`HenryQW`],handler:a};async function a(e){let{owner:n,image:i,tag:a=`latest`}=e.req.param(),o=`${n}/${i}`,s=`https://hub.docker.com/r/${o}`,c=await t.get(`https://hub.docker.com/v2/repositories/${o}/tags/${a}`),l=await t.get(`https://hub.docker.com/v2/repositories/${o}/`),u=c.data;return{title:`${o}:${a} build history`,description:l.data.description,link:s,item:[{title:`${o}:${a} was built. ${(u.images[0].size/1e6).toFixed(2)} MB`,link:`https://hub.docker.com/layers/docker/${o}/${a}/images/${u.images[0].digest.replace(`:`,`-`)}`,author:n,pubDate:new Date(u.last_updated).toUTCString(),guid:r(u.images)}]}}export{i as route};