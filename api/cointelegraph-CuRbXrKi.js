import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import{logger_default as e}from"./logger-BlLSmUdl.js";import{ofetch_default as t}from"./ofetch-CWQqZcqz.js";import{cache_default as n}from"./cache-CvppK6AM.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{rss_parser_default as i}from"./rss-parser-YsVv5RZS.js";import{load as a}from"cheerio";const o={path:`/`,categories:[`finance`],example:`/cointelegraph`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`News`,maintainers:[`pseudoyu`],handler:s,radar:[{source:[`cointelegraph.com/`],target:`/`}],description:`Get latest news from Cointelegraph with full text.`};async function s(){let t=`https://cointelegraph.com/rss`,a=await i.parseURL(t),o=await Promise.all(a.items.filter(e=>e.link&&/\/news|\/explained|\/innovation-circle/.test(e.link)).map(e=>({...e,link:e.link?.split(`?`)[0]})).map(t=>n.tryGet(t.link,async()=>{let n=t.link,i=await c(n);return i||e.warn(`Failed to extract content from ${n}`),{title:t.title||`Untitled`,description:i||t.content,pubDate:t.pubDate?r(t.pubDate):void 0,link:n,author:t.creator||`CoinTelegraph`,category:t.categories?.map(e=>e.trim())||[],image:t.enclosure?.url}}))),s=o.filter(e=>e!==null);return{title:a.title||`CoinTelegraph News`,link:a.link||`https://cointelegraph.com`,description:a.description||`Latest news from CoinTelegraph`,language:a.language||`en`,item:s}}async function c(n){try{let e=await t(n),r=a(e),i=r(`script:contains("window.__NUXT__")`).text(),o=JSON.parse(i.match(/\.fullText=(".*?");/)?.[1]||`{}`),s=r(`.post-cover__image`);return s.find(`source`).remove(),s.find(`img`).removeAttr(`srcset`),s.find(`img`).attr(`src`,s.find(`img`).attr(`src`)?.match(/(https:\/\/s3\.cointelegraph\.com\/.+)/)?.[1]||``),s.html()+o||null}catch(t){return e.error(`Error fetching article content: ${t}`),null}}export{o as route};