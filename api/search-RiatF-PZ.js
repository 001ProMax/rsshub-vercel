import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{got_default as i}from"./got-BwctkUCD.js";import a from"node:path";import o from"aes-js";t();const s={path:`/search/:wd`,categories:[`shopping`],example:`/duozhuayu/search/JavaScript`,parameters:{wd:`搜索关键词`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`duozhuayu.com/search/book/:wd`]}],name:`搜索结果`,maintainers:[`fengkx`],handler:c};async function c(t){let s=t.req.param(`wd`),c=`https://www.duozhuayu.com`,l=`book`,u=`${c}/search/${l}/${s}`,d=[...`DkOliWvFNR7C4WvR`].map(e=>e.charCodeAt()),f=[...`GQWKUE2CVGOOBKXU`].map(e=>e.charCodeAt()),p=new o.ModeOfOperation.cfb(d,f),m=e=>{let t=o.utils.utf8.toBytes(e),n=p.encrypt(t);return o.utils.hex.fromBytes(n)},h=()=>{let e=Date.now(),t=0,n=Math.floor(1e8*Math.random()),r=m([e,t,n].join(`:`)),i=[t,e,Math.round(1e5*Math.random())].join(`-`);return{"x-api-version":`0.0.48`,"x-refer-request-id":i,"x-request-id":i,"x-request-misc":`{"platform":"browser","originSource":"search","originFrom":"normal","webVersion":"1.2.201774"}`,"x-request-token":r,"x-security-key":n,"x-timestamp":e,"x-user-id":t}},g=await i({method:`get`,url:`${c}/api/search/book`,searchParams:{type:`normal`,q:s},headers:h()}),_=g.data.data.filter(e=>e.type===l).map(({[l]:t})=>({title:t.title,link:`${c}/books/${t.id}`,pubDate:r(t.updated),description:n(a.join(e,`templates/book-97e9ed1e.art`),{item:t})}));return{title:`多抓鱼搜索-${s}`,link:u,description:`多抓鱼搜索-${s}`,item:_}}export{s as route};