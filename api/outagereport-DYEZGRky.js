import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{got_default as e}from"./got-BwctkUCD.js";const t=`https://outage.report/`,n={path:`/:name/:count?`,categories:[`forecast`],example:`/outagereport/ubisoft/5`,parameters:{name:`Service name, spelling format must be consistent with URL`,count:`Counting threshold, will only be written in RSS if the number of people who report to stop serving is not less than this number`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Report`,maintainers:[`cxumol`,`nczitzk`],handler:r,description:"Please skip the local service area code for `name`, for example `https://outage.report/us/verizon-wireless` to `verizon-wireless`."};async function r(n){let r=n.req.param(`name`),i=n.req.param(`count`)||10,a=`${t}${r}`,o=await e({method:`get`,url:a}),s=o.data,c=/class="Gauge__Count.*?>(\d+)<\/text>/,l=/class="Gauge__MessageWrapper.*?class="Gauge__Message.*?>(.*?)<\/span>/,u=/<p class="PageSubheader.*?>(.*?)<\/p>/,d=Number(s.match(c)[1]),f=s.match(l)[1],p=s.match(u)[1],m=[];if(d>=i){let e={title:`${r} appear to be (partially) down`,description:String(d)+` `+f,pubDate:new Date().toUTCString(),guid:Date.now(),link:a};m.push(e)}return{title:`Is ${r} Down Right Now?`,link:a,description:p,item:m,allowEmpty:!0}}export{n as route};