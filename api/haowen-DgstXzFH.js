import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as e}from"./ofetch-CWQqZcqz.js";import{cache_default as t}from"./cache-CvppK6AM.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{timezone as r}from"./timezone-CCdTtC9I.js";import{load as i}from"cheerio";const a={path:`/haowen/:day?`,categories:[`shopping`],example:`/smzdm/haowen/1`,parameters:{day:{description:"以天为时间跨度，默认为 `1`",options:[{value:`1`,label:`今日热门`},{value:`7`,label:`周热门`},{value:`30`,label:`月热门`}],default:`1`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`好文`,maintainers:[`LogicJake`,`pseudoyu`],handler:o};async function o(a){let o=a.req.param(`day`)??`1`,s=`https://post.smzdm.com/hot_${o}/`,c=await e(s),l=i(c),u=l(`li.filter-tab.active`).text(),d=l(`li.feed-row-wide`).toArray().map(e=>{let t=l(e);return{title:t.find(`h5.z-feed-title a`).text(),link:t.find(`h5.z-feed-title a`).attr(`href`),pubDate:r(n(t.find(`span.z-publish-time`).text()),8)}}),f=await Promise.all(d.map(a=>t.tryGet(a.link??``,async()=>{let t=await e(a.link??``),o=i(t),s=o(`#articleId`);s.find(`.item-name`).remove(),s.find(`.recommend-tab`).remove();let c=o(`meta[property="og:release_date"]`).attr(`content`),l={title:a.title,link:a.link,description:s.html()||``,pubDate:c?r(n(c),8):a.pubDate,author:o(`meta[property="og:author"]`).attr(`content`)||``};return l})));return{title:`${u}-什么值得买好文`,link:s,item:f.filter(e=>e!==null)}}export{a as route};