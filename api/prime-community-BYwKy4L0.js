import"./esm-shims-CtP6w_ML.js";import{config as e}from"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as t}from"./ofetch-CWQqZcqz.js";import{cache_default as n}from"./cache-CvppK6AM.js";const r={path:`/prime/community`,categories:[`new-media`],example:`/sspai/prime/community`,features:{requireConfig:[{name:`SSPAI_BEARERTOKEN`,optional:!1,description:"少数派会员账号认证 token。获取方式：登陆后打开少数派会员社区界面，打开浏览器开发者工具中 “网络”(Network) 选项卡，筛选 URL 找到任一个地址为 `sspai.com/api` 开头的请求，点击检查其 “消息头”，在 “请求头” 中找到Authorization字段，将其值复制填入配置即可。你的配置应该形如 `SSPAI_BEARERTOKEN: 'Bearer eyJxxxx......xx_U8'`。"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`sspai.com/community`]}],name:`会员社区`,maintainers:[`mintyfrankie`],handler:a},i=`Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjcyNzU3NiIsInR5cGUiOiJ1c2VyIiwiZXhwIjoxNzQ4NTI2MDEzfQ.di8RB-lxHI_JMBQHFd2xhcpk6Zd_3bvfQlAti6HAuZA`;async function a(){let r,a=await n.get(`sspai:token`);a?r=a:e.sspai.bearertoken?(r=e.sspai.bearertoken,n.set(`sspai:token`,e.sspai.bearertoken)):r=i;let o=`https://sspai.com/api/v1/community/page/get`,s={Authorization:r},c=await t(o,{headers:s}),l=c.data.map(e=>({title:e.title,link:`https://sspai.com/t/${e.id_hash}`,pubDate:new Date(e.created_at*1e3),author:e.author.nickname,category:e.channel.title,id_hash:e.id_hash})),u=await Promise.all(l.map(e=>n.tryGet(e.link,async()=>{let n=`https://sspai.com/api/v1/community/topic/single/info/get?id_hash=${e.id_hash}`,r=await t(n,{headers:s});return e.description=r.data.body||`No content`,e})));return{title:`少数派会员社区`,link:`https://sspai.com/community`,lang:`zh-CN`,description:`少数派会员社区`,item:u}}export{r as route};