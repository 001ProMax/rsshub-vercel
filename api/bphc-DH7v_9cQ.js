import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as e}from"./ofetch-CWQqZcqz.js";import{cache_default as t}from"./cache-CvppK6AM.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{getSubPath as r}from"./common-utils-C27Jp3s6.js";import{timezone as i}from"./timezone-CCdTtC9I.js";const a={"/project":{title:`项目介绍`,list:`/front/index/project/page`,detail:`/front/index/project`,link:`/#/communityDetail?id=`},"/announcement":{title:`通知公告`,list:`/front/announcement/page`,detail:`/front/announcement/`,link:`/#/announcementList/detail?id=`}},o={path:`/beijing/bphc/*`,name:`Unknown`,maintainers:[],handler:s};async function s(o){let s=`https://gycpt.bphc.com.cn`,c=`announcement`,l=r(o).replaceAll(/(^\/beijing\/bphc|\/$)/g,``),u=l===``?c:l.endsWith(`/`)?l.slice(0,-1):l,d=a[u],f=`${s}${d.list}`,p=await e(f),m=p.data?.records??[],h=await Promise.all(m.map(r=>{let a=`${s}${d.detail}/${r.id}`;return t.tryGet(a,async()=>{let t=await e(a),o=(t.data?.content||t.data?.introduction)??``,c={title:r.title||r.fullName,author:o.match(/来源：(.*?)</)?.[1].trim()??r.operator,link:`${s}${d.link}${r.id}`,description:o,pubDate:i(n(r.createTime),8)};return c})}));return{title:d.title,link:s,item:h}}export{o as route};