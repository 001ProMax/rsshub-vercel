import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CDAeBYLA.js";import"./helpers-RrXnNmv1.js";import{parseDate as e}from"./parse-date-B2cCVoGk.js";import{got_default as t}from"./got-Cw4D6IS5.js";import{ViewType as n}from"./types-DygLf1a3.js";import r from"crypto";import i from"crypto-js";import{KEYUTIL as a,KJUR as o,hextob64 as s}from"jsrsasign";const c=`MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCARnxLlrhTK28bEV7s2IROjT73KLSjfqpKIvV8L+Yhe4BrF0Ut4oOH728HZlbSF0C3N0vXZjLAFesoS4v1pYOjVCPXl920Lh2seCv82m0cK78WMGuqZTfA44Nv7JsQMHC3+J6IZm8YD53ft2d8mYBFgKektduucjx8sObe7eRyoQIDAQAB`,l=e=>{if(e>32)throw Error(`Max length is 32.`);return u().replaceAll(`-`,``).substring(0,e)},u=()=>r.randomUUID(),d=e=>i.MD5(e),f=(e,t)=>(typeof t==`string`&&(t=d(t)),i.AES.encrypt(i.enc.Utf8.parse(e),t,{mode:i.mode.ECB,padding:i.pad.Pkcs7}).toString()),p=(e,t)=>(typeof t==`string`&&(t=d(t)),i.AES.decrypt(e,t,{mode:i.mode.ECB,padding:i.pad.Pkcs7}).toString(i.enc.Utf8)),m=e=>{let t=`-----BEGIN PUBLIC KEY-----${c}-----END PUBLIC KEY-----`;return t=a.getKey(t),s(o.crypto.Cipher.encrypt(e,t))},h=e=>{let t=u();return{"content-type":`application/json`,"ovse-trace":u(),callertype:`USER`,fingerprint:f(t,d(e)),onetimeskey:m(e),timestamp:f(Date.now(),e),referer:`https://www.ainvest.com/`}},g={path:`/news`,categories:[`finance`,`popular`],example:`/ainvest/news`,parameters:{},view:n.Articles,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`ainvest.com/news`]}],name:`Latest News`,maintainers:[`TonyRL`],handler:_,url:`ainvest.com/news`};async function _(n){let r=l(16),{data:i}=await t(`https://api.ainvest.com/gw/news_f10/v1/newsFlash/getNewsData`,{headers:h(r),searchParams:{terminal:`web`,tab:`all`,page:1,size:n.req.query(`limit`)?Number.parseInt(n.req.query(`limit`),10):50,lastId:``,timestamp:Date.now()}}),{data:a}=JSON.parse(p(i,r)),o=a.content.map(t=>({title:t.title,description:t.content,link:t.sourceUrl,pubDate:e(t.publishTime,`x`),category:t.tagList.map(e=>e.nameEn),author:t.userInfo.nickname,upvotes:t.likeCount,comments:t.commentCount}));return{title:`AInvest - Latest News`,link:`https://www.ainvest.com/news`,language:`en`,item:o}}export{g as route};