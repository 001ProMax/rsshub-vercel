import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import{config as n}from"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as r}from"./cache-CvppK6AM.js";import{art as i}from"./render-DE4LRFBD.js";import{parseDate as a}from"./parse-date-DHsdom8D.js";import{got_default as o}from"./got-BwctkUCD.js";import{config_not_found_default as s}from"./config-not-found-QwO11ree.js";import c from"node:path";t();const l=`https://devapi.qweather.com/v7/weather/now?`,u={path:`/now/:location`,categories:[`forecast`],example:`/qweather/now/广州`,parameters:{location:`N`},features:{requireConfig:[{name:`HEFENG_KEY`,description:"访问 `https://www.qweather.com/` 注册开发 API Key。"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`实时天气`,maintainers:[`Rein-Ou`],handler:d};async function d(t){if(!n.hefeng.key)throw new s(`QWeather RSS is disabled due to the lack of <a href="https://docs.rsshub.app/zh/install/config#%E5%92%8C%E9%A3%8E%E5%A4%A9%E6%B0%94">relevant config</a>`);let u=await r.tryGet(`qweather:`+t.req.param(`location`)+`:id`,async()=>{let e=await o(`https://geoapi.qweather.com/v2/city/lookup?location=${t.req.param(`location`)}&key=${n.hefeng.key}`),r=e.data.location.map(e=>e);return r[0].id}),d=l+`key=`+n.hefeng.key+`&location=`+u,f=await r.tryGet(`qweather:`+t.req.param(`location`)+`:now`,async()=>{let e=await o(d);return e.data},3600,!1),p=[f.now],m=a(f.updateTime),h=m.toLocaleString();return{title:t.req.param(`location`)+`实时天气`,description:t.req.param(`location`)+`实时天气状况`,item:p.map(n=>({title:`观测时间：`+h,description:i(c.join(e,`templates/now-edaf8eec.art`),{item:n}),pubDate:m,guid:`位置:`+t.req.param(`location`)+`--时间：`+h,link:f.fxLink})),link:f.fxLink}}export{u as route};