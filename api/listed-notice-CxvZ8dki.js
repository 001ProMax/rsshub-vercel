import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import{ofetch_default as e}from"./ofetch-CWQqZcqz.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{timezone as n}from"./timezone-CCdTtC9I.js";import{ViewType as r}from"./types-Bi82qguM.js";import{load as i}from"cheerio";const a=async r=>{let{category:a=``}=r.req.param(),o=Number.parseInt(r.req.query(`limit`)??`50`,10),s=`https://www.szse.cn`,c=`https://disc.static.szse.cn`,l=new URL(`api/disc/announcement/annList`,s).href,u=new URL(`disclosure/listed/notice${a}`,s).href,d=await e(u),f=i(d),p=f(`html`).attr(`lang`)??`zh-CN`,m=await e(l,{method:`POST`,body:{seDate:[``,``],channelCode:[`listedNotice_disc`],pageSize:o,pageNum:1}}),h=m.data.slice(0,o).map(e=>{let r=e.title,i=e.publishTime,a=`disclosure/listed/bulletinDetail/index.html?${e.id}`,o=[...new Set([...e.secCode,...e.secName,e.bigCategoryId,e.bigIndustryCode,e.smallCategoryId].filter(Boolean))],l=`szse-${e.id}`,u=e.publishTime,d={title:r,pubDate:i?n(t(i),8):void 0,link:new URL(a,s).href,category:o,guid:l,id:l,updated:u?n(t(u),8):void 0,language:p},f=new URL(`download${e.attachPath}`,c).href;if(f){let t=`application/${e.attachFormat}`;d={...d,enclosure_url:f,enclosure_type:t,enclosure_title:r,enclosure_length:void 0}}return d}).filter(e=>!0);return{title:`深圳证券交易所 - 上市公司公告`,description:f(`meta[name="description"]`).attr(`content`),link:u,item:h,allowEmpty:!0,image:f(`a.navbar-brand img`).attr(`src`),author:f(`meta[name="author"]`).attr(`content`),language:p,id:u}},o={path:`/disclosure/listed/notice`,name:`上市公司公告`,url:`www.szse.cn`,maintainers:[`nczitzk`],handler:a,example:`/szse/disclosure/listed/notice`,parameters:void 0,description:void 0,categories:[`finance`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.szse.cn/disclosure/listed/notice/index.html`],target:`/disclosure/listed/notice`}],view:r.Articles};export{a as handler,o as route};