import"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as e}from"./cache-CvppK6AM.js";import"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{got_default as n}from"./got-BwctkUCD.js";import{ViewType as r}from"./types-Bi82qguM.js";import{extractArticle as i,extractWork as a}from"./utils-DhV4TxxQ.js";import{load as o}from"cheerio";const s=`https://www.zcool.com.cn`,c={path:`/top/:type`,categories:[`design`,`popular`],view:r.Pictures,example:`/zcool/top/design`,parameters:{type:{description:`推荐类型`,options:[{value:`design`,label:`作品榜单`},{value:`article`,label:`文章榜单`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`作品总榜单`,maintainers:[`yuuow`],handler:l};async function l(r){let c=r.req.param(`type`),l=`${s}/top/${c===`design`?`index.do`:`article.do?rankType=8`}`,{data:u}=await n(l),d=o(u),f=JSON.parse(d(`script#__NEXT_DATA__`).text()),p=f.props.pageProps.listResult.data.map(e=>({title:e.rankingTitle,author:e.member.name,category:[e.productCategoryStr,e.productSubCateStr,...e.tags],link:e.pageUrl,pubDate:t(e.rankingPublishTime)})),m=await Promise.all(p.map(r=>e.tryGet(r.link,async()=>{let{data:e}=await n(r.link),s=o(e),c=JSON.parse(s(`script#__NEXT_DATA__`).text());return r.pubDate=t(c.props.pageProps.data.publishTime,`x`),r.link.startsWith(`https://www.zcool.com.cn/article/`)?r.description=i(c):r.link.startsWith(`https://www.zcool.com.cn/work/`)&&(r.description=a(c)),r})));return{title:f.props.pageProps.seo.title,description:f.props.pageProps.seo.description,link:l,item:m}}export{c as route};