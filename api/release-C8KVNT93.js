import{__dirname as e,init_esm_shims as t}from"./esm-shims-CtP6w_ML.js";import"./config-DYqAlsU3.js";import"./logger-BlLSmUdl.js";import"./ofetch-CWQqZcqz.js";import"./helpers-RrXnNmv1.js";import{cache_default as n}from"./cache-CvppK6AM.js";import{art as r}from"./render-DE4LRFBD.js";import{parseDate as i}from"./parse-date-DHsdom8D.js";import{got_default as a}from"./got-BwctkUCD.js";import o from"node:path";import s from"markdown-it";t();const c={path:`/release/:user/:app/:distribution_group`,categories:[`program-update`],example:`/app-center/release/cloudflare/1.1.1.1-windows/beta`,parameters:{user:`User`,app:`App name`,distribution_group:`Distribution group`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`install.appcenter.ms/users/:user/apps/:app/distribution_groups/:distribution_group`,`install.appcenter.ms/orgs/:user/apps/:app/distribution_groups/:distribution_group`]}],name:`Release`,maintainers:[`Rongronggg9`],handler:l,description:`::: tip
  The parameters can be extracted from the Release page URL: \`https://install.appcenter.ms/users/:user/apps/:app/distribution_groups/:distribution_group\`
:::`};async function l(t){let c=t.req.param(`user`),l=t.req.param(`app`),u=t.req.param(`distribution_group`),d=`https://install.appcenter.ms/api/v0.1/apps`,f=`${d}/${c}/${l}/distribution_groups/${u}`,p=`${f}/public_releases?scope=tester`,m=`https://install.appcenter.ms/users/${c}/apps/${l}/distribution_groups/${u}`,h=await a(p),g=h.data.map(e=>({pubDate:i(e.uploaded_at),link:`${f}/releases/${e.id}?is_install_page=true`})),_=new s;g=await Promise.all(g.map(t=>n.tryGet(t.link,async()=>{let n=await a(t.link),i=n.data,s=i.owner.display_name,c=i.app_os,l=i.short_version,u=i.version,d=i.is_external_build,f=i.mandatory_update,p=(i.size/(1024*1024)).toFixed(2),h=i.uploaded_at,g=i.fingerprint,v=i.min_os,y=i.android_min_api_level,b=i.device_family,x=i.bundle_identifier,S=i.release_notes,C=i.download_url,w=i.install_url,T=i.fileExtension,E=i.app_display_name,D=i.distribution_group_id,O=i.distribution_groups.find(e=>e.id===D).display_name;t._feed_title=`${E} (${O}) for ${c} by ${s} - App Center Releases`,t._feed_icon=i.app_icon_url;let k=l&&u?`${l} (${u})`:l||u;return t.title=`${E}: `+(f?`[Mandatory]`:``)+(d?`[External Build]`:``)+`Version ${k}`,t.link=m,t.author=s,t.description=r(o.join(e,`templates/description-13bc6869.art`),{releaseDate:h,sizeInMBytes:p,minOS:v,deviceFamily:b,androidMinApiLevel:y,bundleId:x,downloadUrl:C,installUrl:w,fingerprint:g,appOS:c,fileExtension:T,releaseNotes:S&&_.render(S)},{minimize:!0}),t.guid=g,t})));let v=g&&g[0]._feed_icon,y=g&&g[0]._feed_title;return{title:y,link:m,description:y,image:v,item:g}}export{c as route};