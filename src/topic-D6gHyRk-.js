import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import{logger_default as e}from"./logger-CC3afzWM.js";import{parseDate as t}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{cache_default as n}from"./cache-GwMhal7i.js";import{ofetch_default as r}from"./ofetch-ZUQ1sEMc.js";import{timezone as i}from"./timezone-BrNu6iXe.js";import{load as a}from"cheerio";const o={path:`/topic/:id`,categories:[`programming`],example:`/modb/topic/44158`,parameters:{id:`合辑序号`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`合辑`,maintainers:[`yueneiqi`],handler:s};async function s(o){let s=`https://www.modb.pro`,c=o.req.param(`id`),l=await r(`${s}/api/columns/getKnowledge`,{query:{pageNum:1,pageSize:20,columnId:c}}),u=l.list.map(n=>{let r={},a={};switch(n.type){case 0:r=n.knowledge,a=`${s}/db`;break;case 1:r=n.dbDoc,a=`${s}/doc`;break;default:e.error(`unknown type ${n.type}`)}return{title:r.title,link:`${a}/${n.rid}`,pubDate:i(t(n.createdTime),8),author:r.createdByName,category:r.tags}}),d=await Promise.all(u.map(e=>n.tryGet(e.link,async()=>{let t=await r(e.link),n=a(t);return e.description=n(`div.editor-content-styl.article-style`).first().html(),e})));return{title:`墨天轮合辑`,link:`${s}/topic/${c}`,item:d}}export{o as route};