import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import{config as n}from"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as r}from"./parse-date-D4osZfpm.js";import"./proxy-C5Qog9Rm.js";import{cache_default as i}from"./cache-GwMhal7i.js";import{art as a}from"./render-DOz85fGU.js";import{puppeteer_default as o}from"./puppeteer-U-cQNky4.js";import s from"node:path";import{load as c}from"cheerio";t();const l={path:`/journal/:id`,radar:[{source:[`pubs.acs.org/journal/:id`,`pubs.acs.org/`]}],name:`Unknown`,maintainers:[`nczitzk`],handler:u};async function u(t){let l=t.req.param(`id`)??``,u=`https://pubs.acs.org`,d=`${u}/toc/${l}/0/0`,f=``,p=await o(),m=await i.tryGet(d,async()=>{let t=await p.newPage();await t.setRequestInterception(!0),t.on(`request`,e=>{e.resourceType()===`document`||e.resourceType()===`script`?e.continue():e.abort()}),await t.goto(d,{waitUntil:`domcontentloaded`}),await t.waitForSelector(`.toc`);let n=await t.evaluate(()=>document.documentElement.innerHTML);await t.close();let i=c(n);return f=i(`meta[property="og:title"]`).attr(`content`),i(`.issue-item`).toArray().map(t=>{t=i(t);let n=t.find(`.issue-item_title a`),o=t.find(`input[name="doi"]`).attr(`value`);return{doi:o,guid:o,title:n.text(),link:`${u}${n.attr(`href`)}`,pubDate:r(t.find(`.pub-date-value`).text(),`MMMM D, YYYY`),author:t.find(`.issue-item_loa li`).toArray().map(e=>i(e).text()).join(`, `),description:a(s.join(e,`templates/description-78b7ee2b.art`),{image:t.find(`.issue-item_img`).html(),description:t.find(`.hlFld-Abstract`).html()})}})},n.cache.routeExpire,!1);return await p.close(),{title:f,link:d,item:m}}export{l as route};