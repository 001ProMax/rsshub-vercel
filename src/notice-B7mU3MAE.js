import"./esm-shims-CGUM9TC6.js";import{config as e}from"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as t}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as n}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as r}from"./got-CB83B8oA.js";import{load as i}from"cheerio";async function a(n){let a=n;try{let n=await r.get(a,{headers:{"User-Agent":e.ua}}),o=n.body,s=i(o),c=s(`#page-wrap > div.maim_pages > div > div.leftmain_page > div > ul > li`);return c.toArray().map(e=>{let n=s(e).find(`a.bt`),r=s(e).find(`a.time`),i=n.attr(`title`),a=n.attr(`href`),o=r.text().trim();return{title:i,link:a,pubDate:t(o,`YYYY-MM-DD`)}})}catch{}return[]}async function o(t){let n=t.link;if(n.includes(`sem.tongji.edu.cn/semch`))try{let a=await r.get(n,{headers:{"User-Agent":e.ua}}),o=a.body,s=i(o),c=s(`#page-wrap > div.maim_pages > div > div.leftmain_page > div`);t.description=c?c.html():``}catch{}return t}const s={path:`/sem/:type?`,categories:[`university`],example:`/tongji/sem/notice`,parameters:{type:"通知类型，默认为 `notice`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`经济与管理学院通知`,maintainers:[`sitdownkevin`],url:`sem.tongji.edu.cn/semch`,handler:c,description:`| 学院通知 | 招生通知 | 学术观点 | 新闻 | 活动 | 视点 | 教师与行政人员招聘 |
| -------- | -------------- | ------------------ | ---- | ---------- | --------- | ------------------ |
| notice   | enrollment     | academic-paper     | news | events     | focus     | collegerecruitment |
`};async function c(e){let t=e.req.param(`type`)||`notice`,r=new Set([`enrollment`,`academic-paper`,`news`,`events`,`focus`,`collegerecruitment`]),i={notice:`学院通知`,enrollment:`招生通知`,"academic-paper":`学术观点`,news:`新闻`,events:`活动`,focus:`视点`,collegerecruitment:`教师与行政人员招聘`},s=`https://sem.tongji.edu.cn/semch/category/frontpage/${r.has(t)?t:`notice`}`,c=await a(s),l=await Promise.all(c.map(e=>n.tryGet(e.link,()=>o(e))));return{title:`同济大学经济与管理学院`,description:String(r.has(t)?i[t]:`学院通知`),image:`https://upload.wikimedia.org/wikipedia/zh/f/f8/Tongji_University_Emblem.svg`,icon:`https://upload.wikimedia.org/wikipedia/zh/f/f8/Tongji_University_Emblem.svg`,logo:`https://upload.wikimedia.org/wikipedia/zh/f/f8/Tongji_University_Emblem.svg`,link:`https://sem.tongji.edu.cn/semch`,item:l}}export{s as route};