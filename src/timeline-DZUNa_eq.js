import"./esm-shims-DtWyl6zt.js";import{config as e}from"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import"./dist-CKN2M7CD.js";import"./helpers-DzX-lcQO.js";import"./cache-BWStd97H.js";import"./render-CxhTJIsl.js";import"./parse-date-Bgabdhlb.js";import"./ofetch-CYKAhM9L.js";import{got_default as t}from"./got-pWlL3EH4.js";import{config_not_found_default as n}from"./config-not-found-BVqhRP9D.js";import{cache_default as r}from"./cache-BKLUEagl.js";import{post2item as i}from"./utils-C2bTTlx-.js";const a={path:`/bbs/timeline`,categories:[`game`],example:`/mihoyo/bbs/timeline`,parameters:{},features:{requireConfig:[{name:`MIHOYO_COOKIE`,description:``}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`miyoushe.com/:game/timeline`]}],name:`米游社 - 用户关注动态`,maintainers:[`CaoMeiYouRen`],handler:o,description:`::: warning
  用户关注动态需要米游社登录后的 Cookie 值，所以只能自建，详情见部署页面的配置模块。
:::`};async function o(a){if(!e.mihoyo.cookie)throw new n(`Miyoushe Timeline is not available due to the absense of [Miyoushe Cookie]. Check <a href="https://docs.rsshub.app/deploy/config#route-specific-configurations">relevant config tutorial</a>`);let o=a.req.query(`limit`)||`20`,s={gids:2,page_size:o},c=`https://www.miyoushe.com/ys/timeline`,l=await t({method:`get`,url:`https://bbs-api.miyoushe.com/painter/wapi/timeline/list`,searchParams:s,headers:{Referer:c,Cookie:e.mihoyo.cookie}}),u=l?.data?.data?.list;if(!u)throw Error(`未获取到数据！`);let{nickname:d}=await r.getUserFullInfo(a,``),f=`米游社 - ${d} 的关注动态`,p=u.map(e=>i(e)),m={title:f,link:c,item:p};return m}export{a as route};