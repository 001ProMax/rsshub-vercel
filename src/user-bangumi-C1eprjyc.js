import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./proxy-C5Qog9Rm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import"./cache-GwMhal7i.js";import"./render-DOz85fGU.js";import"./md5-4BNsOP-F.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as e}from"./got-CB83B8oA.js";import"./puppeteer-U-cQNky4.js";import"./utils-CGireMSe.js";import{cache_default as t}from"./cache-DCgBNGmu.js";const n={path:`/user/bangumi/:uid/:type?`,categories:[`social-media`],example:`/bilibili/user/bangumi/208259`,parameters:{uid:`用户 id`,type:`1为番，2为剧，留空为1`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`space.bilibili.com/:uid`],target:`/user/bangumi/:uid`}],name:`用户追番列表`,maintainers:[`wdssmq`],handler:r};async function r(n){let r=n.req.param(`uid`),i=Number(n.req.param(`type`)||1),a=(e=>[``,`bangumi`,`cinema`][e])(i),o=await t.getUsernameFromUID(r),s=await e({method:`get`,url:`https://api.bilibili.com/x/space/bangumi/follow/list?type=${i}&follow_status=0&pn=1&ps=15&vmid=${r}`,headers:{Referer:`https://space.bilibili.com/${r}/${a}`}}),c=s.data;if(c.code!==0)throw Error(`It looks like something went wrong when querying the Bilibili API: code = ${c.code}, message = ${c.message}`);return{title:`${o} 的追番列表`,link:`https://space.bilibili.com/${r}/${a}`,description:`${o} 的追番列表`,item:c.data&&c.data.list&&c.data.list.map(e=>({title:`[${e.new_ep.index_show}]${e.title}`,description:`${e.evaluate}<br><img src="${e.cover}">`,pubDate:new Date(e.new_ep.pub_time??Date.now()).toUTCString(),link:`https://www.bilibili.com/bangumi/play/`+(e.new_ep.id?`ep${e.new_ep.id}`:`ss${e.season_id}`)}))}}export{n as route};