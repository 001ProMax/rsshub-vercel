import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i=`http://www.cmse.sdu.edu.cn/`,a=[`通知公告`,`学院新闻`,`本科生教育`,`研究生教育`,`学术动态`],o=[`zxzx/tzgg.htm`,`zxzx/xyxw.htm`,`zxzx/bksjy.htm`,`zxzx/yjsjy.htm`,`zxzx/xsdt.htm`],s={path:`/cmse/:type?`,categories:[`university`],example:`/sdu/cmse/0`,parameters:{type:"默认为 `0`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`材料科学与工程学院通知`,maintainers:[`Ji4n1ng`],handler:c,description:`| 通知公告 | 学院新闻 | 本科生教育 | 研究生教育 | 学术动态 |
| -------- | -------- | ---------- | ---------- | -------- |
| 0        | 1        | 2          | 3          | 4        |`};async function c(s){let c=s.req.param(`type`)?Number.parseInt(s.req.param(`type`)):0,l=new URL(o[c],i).href,u=await n(l),d=r(u.data),f=d(`.article_list li`).toArray().map(t=>{t=d(t);let n=t.find(`a`);return{title:n.text().trim(),link:n.attr(`href`),pubDate:e(t.find(`.date`).text(),`YYYY/MM/DD`)}});return f=await Promise.all(f.filter(e=>e.link.startsWith(`../info`)).map(e=>(e.link=new URL(e.link.slice(`3`),i).href,t.tryGet(e.link,async()=>{let t=await n(e.link),i=r(t.data);return e.title=i(`.contentTitle`).text(),e.author=i(`.contentTitle2`).find(`span`).eq(1).text().trim().match(/作者：(.*)/)[1]||`山东大学材料科学与工程学院`,i(`.contentTitle, .contentTitle2`).remove(),e.description=i(`.content_detail`).html(),e})))),{title:`山东大学材料科学与工程学院${a[c]}`,description:d(`title`).text(),link:l,item:f}}export{s as route};