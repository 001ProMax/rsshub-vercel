import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i=`http://www.rodong.rep.kp`,a={path:`/news/:language?`,categories:[`traditional-media`],example:`/rodong/news`,parameters:{language:"Language, see below, `ko` by default"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`rodong.rep.kp/cn/index.php`,`rodong.rep.kp/en/index.php`,`rodong.rep.kp/ko/index.php`,`rodong.rep.kp/cn`,`rodong.rep.kp/en`,`rodong.rep.kp/ko`],target:`/news`}],name:`News`,maintainers:[`TonyRL`],handler:o,url:`rodong.rep.kp/cn/index.php`,description:`| 조선어 | English | 中文 |
| ------ | ------- | ---- |
| ko     | en      | cn   |`};async function o(a){let{language:o=`ko`}=a.req.param(),s=`${i}/${o}/index.php?MkBAMkAxQA==`,{data:c}=await n(s),l=r(c),u=l(`.date_news_list .row`).toArray().map(t=>(t=l(t),{title:t.find(`.media-body`).text(),link:`${i}/${o}/${t.find(`.media-body a`).attr(`href`)}`,author:t.find(`.col-sm-3`).text(),pubDate:e(t.find(`.news_date`).text(),`YYYY.M.D.`)})),d=await Promise.all(u.map(e=>t.tryGet(e.link,async()=>{let{data:t}=await n(e.link),i=r(t);return i(`.news_Title, .NewsDetail, .News_Detail, #moveNews`).remove(),e.description=i(`.col-sm-8`).html(),e})));return{title:l(`head title`).text(),description:l(`head meta[name="description"]`).attr(`content`),link:s,item:d}}export{a as route};