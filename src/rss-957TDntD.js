import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as e}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as t}from"./got-CB83B8oA.js";import{rss_parser_default as n}from"./rss-parser-CLRsacVu.js";import{load as r}from"cheerio";const i={path:`/rss/:id?`,categories:[`traditional-media`],example:`/cnbc/rss`,parameters:{id:"Channel ID, can be found in Official RSS URL, `100003114` (Top News) by default"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.cnbc.com/id/:id/device/rss/rss.html`],target:`/rss/:id`}],name:`Full article RSS`,maintainers:[`TonyRL`],handler:a,description:`Provides a better reading experience (full articles) over the official ones.

  Support all channels, refer to [CNBC RSS feeds](https://www.cnbc.com/rss-feeds/).`};async function a(i){let{id:a=`100003114`}=i.req.param(),o=await n.parseURL(`https://search.cnbc.com/rs/search/combinedcms/view.xml?partnerId=wrss01&id=${a}`),s=await Promise.all(o.items.filter(e=>e.link&&!e.link.startsWith(`https://www.cnbc.com/select/`)).map(n=>e.tryGet(n.link,async()=>{let{data:e}=await t(n.link),i=r(e);delete n.content,delete n.contentSnippet,delete n.isoDate,n.description=``,i(`.RenderKeyPoints-keyPoints`).length&&i(`.RenderKeyPoints-keyPoints`).html(),i(`.FeaturedContent-articleBody`).length&&(n.description+=i(`.FeaturedContent-articleBody`).html()),i(`.ArticleBody-articleBody`).length&&(n.description+=i(`.ArticleBody-articleBody`).html()),i(`.LiveBlogBody-articleBody`).length&&(n.description+=i(`.LiveBlogBody-articleBody`).html()),i(`.ClipPlayer-clipPlayer`).length&&(n.description+=i(`.ClipPlayer-clipPlayer`).html());let a=JSON.parse(i(`[type=application/ld+json]`).last().text());return n.author=a.author?a.author.name??a.author.map(e=>e.name).join(`, `):null,n.category=a.keywords,n})));return{title:o.title,link:o.link,description:o.description,item:s,language:o.language}}export{i as route};