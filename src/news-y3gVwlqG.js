import"./config-C9m9eBw5.js";import{logger_default as e}from"./logger-CC3afzWM.js";import{parseDate as t}from"./parse-date-D4osZfpm.js";import"./proxy-C5Qog9Rm.js";import{cache_default as n}from"./cache-GwMhal7i.js";import{puppeteer_default as r}from"./puppeteer-U-cQNky4.js";const i={path:`/news/:options?`,categories:[`game`],example:`/fortnite/news`,parameters:{options:`Params`},features:{requireConfig:!1,requirePuppeteer:!0,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`News`,maintainers:[`lyqluis`],handler:a,description:`-   \`options.lang\`, optional, language, eg. \`/fortnite/news/lang=en-US\`, common languages are listed below, more languages are available one the [official website](https://www.fortnite.com/news)

| English (default) | Spanish | Japanese | French | Korean | Polish |
| ----------------- | ------- | -------- | ------ | ------ | ------ |
| en-US             | es-ES   | ja       | fr     | ko     | pl     |`};async function a(i){let a=i.req.param(`options`)?.split(`&`).map(e=>e.split(`=`)),o=`https://www.fortnite.com`,s=`news`,c=a?.find(e=>e[0]===`lang`)[1]??`en-US`,l=`${o}/${s}?lang=${c}`,u=`https://www.fortnite.com/api/blog/getPosts?category=&postsPerPage=0&offset=0&locale=${c}&rootPageSlug=blog`,d=await r(),f=await d.newPage();await f.setRequestInterception(!0),f.on(`request`,e=>{e.resourceType()===`document`?e.continue():e.abort()});let p;f.on(`response`,async e=>{p=await e.json()}),e.http(`Requesting ${u}`),await f.goto(u,{waitUntil:`networkidle0`}),await f.close(),await d.close();let{blogList:m}=p,h=await Promise.all(m.map(e=>n.tryGet(e.link,()=>({title:e.title,link:`${o}/${s}/${e.slug}?lang=${c}`,pubDate:t(e.date),author:e.author,description:e.content}))));return{title:`Fortnite News`,link:l,item:h}}export{i as route};