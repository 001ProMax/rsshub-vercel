import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{ofetch_default as n}from"./ofetch-ZUQ1sEMc.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{URL as i}from"node:url";import{load as a}from"cheerio";const o={path:`/nea/sjzz/ghs`,categories:[`government`],example:`/gov/nea/sjzz/ghs`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`nea.gov.cn/sjzz/ghs/`],target:`/nea/sjzz/ghs`}],name:`发展规划司`,maintainers:[`nczitzk`,`pseudoyu`],handler:s,url:`www.nea.gov.cn/sjzz/ghs/`};async function s(o){let s=o.req.query(`limit`)?Number.parseInt(o.req.query(`limit`),10):35,c=`https://www.nea.gov.cn`,l=new i(`sjzz/ghs/`,c).href,u=await n(l),d=a(u),f=d(`ul#showData0`).attr(`data`)?.split(/:/).pop();if(!f)throw Error(`Data source ID not found`);let p=new i(`ds_${f}.json`,l).href,m=await n(p),h=m.datasource.slice(0,s).map(t=>{let n=new i(t.publishUrl,c).href,o=a(t.showTitle),s=o.text();return{title:s,link:n,pubDate:t.publishTime?r(e(t.publishTime),8):void 0,description:t.summary?.trim()||s,author:[...new Set([t.sourceText,t.author,t.editor,t.responsibleEditor].filter(Boolean))].map(e=>({name:e})),category:t.keywords.split(/,/)}}),g=await Promise.all(h.map(i=>t.tryGet(i.link,async()=>{try{let t=await n(i.link),o=a(t);i.title=o(`meta[name="ArticleTitle"]`).prop(`content`)||i.title,i.description=o(`td.detail`).html()||o(`div.article-content`).html()||i.description,i.category=[...new Set([...i.category??[],...o(`meta[name="keywords"]`).attr(`conetnt`)?.split(/,/)??[]])];let s=o(`meta[name="PubDate"]`).prop(`content`);i.pubDate=s?r(e(s),8):i.pubDate}catch{}return i}))),_=g.filter(Boolean);return{item:_,title:`国家能源局 - 发展规划司工作进展`,link:l,description:`国家能源局 - 发展规划司工作进展`}}export{o as route};