import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{ofetch_default as n}from"./ofetch-ZUQ1sEMc.js";import{load as r}from"cheerio";const i={path:`/news`,categories:[`game`],example:`/warhammer-community/news`,radar:[{source:[`www.warhammer-community.com/en-gb/all-news-and-features/`,`www.warhammer-community.com/en-gb/`]}],name:`News`,maintainers:[`TonyRL`],handler:a,url:`www.warhammer-community.com/en-gb/all-news-and-features/`};async function a(i){let a=`https://www.warhammer-community.com`,o=Number.parseInt(i.req.query(`limit`)||`16`,10),s=await n(`${a}/api/search/news/`,{method:`POST`,body:{sortBy:`date_desc`,category:``,collections:[`articles`],game_systems:[],index:`news`,locale:`en-gb`,page:0,perPage:o,topics:[]}}),c=s.news.map(t=>({title:t.title,link:`${a}/en-gb${t.uri}/`,description:t.excerpt,image:`https://assets.warhammer-community.com/${t.image.path}`,pubDate:e(t.date),category:t.topics.map(e=>e.title)})),l=await Promise.all(c.map(e=>t.tryGet(e.link,async()=>{let t=await n(e.link),i=r(t),a=i(`.article-content`);return a.find(`button`).remove(),e.description=a.html()||e.description,e})));return{title:`All News and Features - Warhammer Community`,link:`${a}/en-gb/all-news-and-features/`,image:`${a}/images/apple-favicon.png`,item:l}}export{i as route};