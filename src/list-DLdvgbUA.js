import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i=`https://www.zju.edu.cn/`,a={path:`/list/:type`,categories:[`university`],example:`/zju/list/xs`,parameters:{type:"`xs`为学术，`xw`为新闻，`5461`是图片新闻，`578`是浙大报道，具体参数参考左侧的菜单"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`普通栏目 如学术 / 图片 / 新闻等`,maintainers:[`Jeason0228`],handler:o};async function o(a){let o=a.req.param(`type`)??`xs`,s=i+o+`/list.htm`,c=await n({method:`get`,url:s,headers:{Referer:i}}),l=r(c.data);function u(e){return e.search(`redirect`)===-1?e:s}let d=l(`#wp_news_w7 ul.news li`).toArray().map(e=>{let t={title:l(e).find(`a`).attr(`title`),link:u(l(e).find(`a`).attr(`href`)),date:l(e).text().match(/\d{4}-\d{2}-\d{2}/)[0]};return t}),f=await Promise.all(d.map(a=>{let o=a.title,c=a.date,l=new URL(a.link,i).href;return t.tryGet(l,async()=>{let t=await n({method:`get`,url:l,headers:{Referer:s}}),i=r(t.data),a=i(`.right_content`).html();return{title:o,link:l,description:a,pubDate:e(c)}})}));return{title:`浙江大学`+l(`ul.submenu .selected`).text(),link:s,item:f}}export{a as route};