import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a=(t,a)=>a(t.link,async()=>{let{data:a}=await n(t.link),o=i(a),s=o(`div.info-box`);return t.author=s.find(`b:nth-child(4)`).text().trim(),t.pubDate=r(e(s.find(`i:last-child`).text()),8),t.description=o(`.article-main-contentraw`).html(),t}),o={news:`最新资讯`,review:`游戏评测`,video:`游戏视频`,special:`巴士首页特稿`,hardware:`硬件资讯`},s={path:`/list/:category`,parameters:{category:`列表分类，见下表`},categories:[`game`],example:`/tgbus/list/news`,radar:[{source:[`www.tgbus.com/list/:category/`],target:`/list/:category`}],name:`文章列表`,maintainers:[`Xzonn`],handler:c,description:`| 最新资讯 | 游戏评测 | 游戏视频 | 巴士首页特稿 | 硬件资讯 |
| -------- | -------- | -------- | ------------ | -------- |
| news     | review   | video    | special      | hardware |`};async function c(s){let c=s.req.param(`category`),l=`https://www.tgbus.com/list/${c}/`,u=await n(l),d=i(u.data),f=d(`div.special-infocard`).toArray().map(t=>{let n=d(t),i=n.find(`a`);return{title:n.find(`div.title`).text(),link:`https://www.tgbus.com${i.attr(`href`)}`,description:n.find(`div.content`).text(),pubDate:r(e(n.find(`div.info span:nth-child(3)`).text().trim()),8)}}),p=await Promise.all(f.map(e=>a(e,t.tryGet)));return{title:`${o[c]} - 电玩巴士`,description:d(`meta[name="description"]`).attr(`content`),link:l,item:p}}export{s as route};