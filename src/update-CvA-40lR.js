import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as e}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as t}from"./got-CB83B8oA.js";import{rootUrl as n}from"./utils-DqpTCHst.js";import{load as r}from"cheerio";import i from"p-map";const a={path:`/update`,categories:[`anime`],example:`/agefans/update`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`agemys.org/update`,`agemys.org/`]}],name:`最近更新`,maintainers:[`nczitzk`],handler:o,url:`agemys.org/update`};async function o(){let a=`${n}/update`,o=await t(a),s=r(o.data),c=s(`.video_item`).toArray().map(e=>{e=s(e);let t=e.find(`a`).attr(`href`).replace(`http://`,`https://`);return{title:e.text(),link:t,guid:`${t}#${e.find(`.video_item--info`).text()}`}}),l=await i(c,n=>e.tryGet(n.link,async()=>{let e=await t(n.link),i=r(e.data);return i(`img`).each((e,t)=>{t.attribs[`data-original`]&&(t.attribs.src=t.attribs[`data-original`],delete t.attribs[`data-original`])}),i(`.video_detail_collect`).remove(),n.description=i(`.video_detail_left`).html(),n}),{concurrency:3});return{title:s(`title`).text(),link:a,item:l}}export{a as route};