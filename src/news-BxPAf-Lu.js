import"./esm-shims-DtWyl6zt.js";import"./config-CT-9jq-j.js";import"./logger-BsClR5PH.js";import"./dist-Bbb0mfHh.js";import{cache_default as e}from"./cache-DNP0KCHb.js";import{rofetch as t}from"./ofetch-Dnmc-sKl.js";import{ViewType as n}from"./types-A5bA50Mg.js";import{load as r}from"cheerio";const i=`https://www.newyorker.com`,a={path:`/:category`,categories:[`traditional-media`],view:n.Articles,example:`/newyorker/latest`,parameters:{category:`tab name. can be found at url`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`newyorker.com/:category?`]}],name:`Articles`,maintainers:[`EthanWng97`,`pseudoyu`],handler:o};async function o(n){let{category:a}=n.req.param(),o=`${i}/${a}`,s=await t(o),c=r(s),l=JSON.parse(c(`script:contains("window.__PRELOADED_STATE__")`).text().match(/window\.__PRELOADED_STATE__ = (.*);/)?.[1]??`{}`),u=l.transformed.bundle.containers[0].items,d=await Promise.all(u.map(n=>{let a=`${i}${n.url}`;return e.tryGet(a,async()=>{let e=await t(a),i=r(e),o=i(`#main-content`);return o.find(`h1`).remove(),o.find(`.article-body__footer`).remove(),o.find(`.social-icons`).remove(),o.find(`div[class^="ActionBarWrapperContent-"]`).remove(),o.find(`div[class^="ContentHeaderByline-"]`).remove(),{title:n.dangerousHed,pubDate:n.pubDate,link:a,description:o.html()}})}));return{title:`The New Yorker - ${a}`,link:i,description:`Reporting, Profiles, breaking news, cultural coverage, podcasts, videos, and cartoons from The New Yorker.`,item:d}}export{a as route};