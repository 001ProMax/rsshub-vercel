import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i={path:`/cn/news`,name:`Unknown`,maintainers:[],handler:a};async function a(i){let a=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`),10):35,o=`https://www.aqara.cn`,s=new URL(`news`,o).href,{data:c}=await n(s),l=r(c),u=c.match(/(parm\.newsTitle[\S\s]*?arr\.push\(parm\))/g).slice(0,a).map(t=>({title:t.match(/parm\.newsTitle = '(.*?)'/)[1],link:new URL(t.match(/parm\.contentHerf = '(\d+)'/)[1],o).href,pubDate:e(t.match(/parm\.issueTime = '(.*?)'/)[1],`YYYY  年  MM  月  DD  日`)}));u=await Promise.all(u.map(i=>t.tryGet(i.link,async()=>{let{data:t}=await n(i.link),a=r(t);return i.title=a(`h4.fnt_56`).last().text(),i.description=a(`div.news_body`).html(),i.pubDate=e(a(`div.news_date`).first().text(),`YYYY  年  MM  月  DD  日`),i})));let d=l(`link[rel="shortcut icon"]`).prop(`href`).split(`?`)[0];return{item:u,title:l(`title`).text(),link:s,description:l(`meta[name="description"]`).prop(`content`),language:`zh-cn`,image:l(`meta[property="og:image"]`).prop(`content`),icon:d,logo:d,author:l(`meta[name="author"]`).prop(`content`)}}export{i as route};