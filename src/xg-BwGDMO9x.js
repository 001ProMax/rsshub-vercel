import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{invalid_parameter_default as r}from"./invalid-parameter-CUJdROXf.js";import{load as i}from"cheerio";const a=`http://xg.swjtu.edu.cn`,o={tzgg:`${a}/web/Home/PushNewsList?Lmk7LJw34Jmu=010j.shtml`,yhxw:`${a}/web/Home/NewsList?LJw34Jmu=011e.shtml`,dcxy:`${a}/web/Home/ColourfulCollegeNewsList`,xgzj:`${a}/web/Home/NewsList?xvw34vmu=010e.shtml`},s=(t,r)=>{let o=t.find(`h4`).find(`a`),s=t.find(`span.ctxlist-time`).text(),c=o.text(),l=`${a}${o.attr(`href`)}`;return r.tryGet(l,async()=>{try{let t=await n({method:`get`,url:l}),r=i(t.data),a=r(`.detail-content-text`).html();return a||(a=`转发通知`),{title:c,pubDate:e(String(s)),link:l,description:a}}catch(t){if(t.response&&t.response.status===404)return{title:c,pubDate:e(String(s)),link:l,description:``};throw t}})},c={path:`/xg/:code?`,categories:[`university`],example:`/swjtu/xg/tzgg`,parameters:{code:`栏目(默认为tzgg)`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`xg.swjtu.edu.cn/web/Home/PushNewsList`,`xg.swjtu.edu.cn/web/Home/NewsList`,`xg.swjtu.edu.cn/web/Home/ColourfulCollegeNewsList`,`xg.swjtu.edu.cn/web/Publicity/List`,`xg.swjtu.edu.cn/`],target:`/xg`}],name:`扬华素质网`,maintainers:[`mobyw`],handler:l,url:`xg.swjtu.edu.cn/web/Home/PushNewsList`,description:`栏目列表：

| 通知公告 | 扬华新闻 | 多彩学院 | 学工之家 |
| -------- | -------- | -------- | -------- |
| tzgg     | yhxw     | dcxy     | xgzj     |`};async function l(e){let a=e.req.param(`code`)??`tzgg`,c=o[a];if(!c)throw new r(`code not supported`);let l=await n({method:`get`,url:c}),u=i(l.data),d=u(`div.right-side ul.block-ctxlist li`),f=await Promise.all(d.toArray().map(e=>{let n=u(e);return s(n,t)}));return{title:`西南交大-扬华素质网`,link:c,item:f,allowEmpty:!0}}export{c as route};