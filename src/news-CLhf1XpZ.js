import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{calculate as r}from"./util-wnC3eQIN.js";const i={path:`/news`,categories:[`game`],example:`/xiaoheihe/news`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`游戏新闻`,maintainers:[`tssujt`],handler:a};async function a(){let i=r(`https://api.xiaoheihe.cn/bbs/app/feeds/news?os_type=web&app=heybox&client_type=mobile&version=999.0.3&x_client_type=web&x_os_type=Mac&x_app=heybox&heybox_id=-1&appid=900018355&offset=0&limit=20`),a=await n({method:`get`,url:i}),o=a.data.result.links.filter(e=>e.linkid!==void 0),s=o.map(t=>({linkId:t.linkid,link:`https://api.xiaoheihe.cn/v3/bbs/app/api/web/share?link_id=${t.linkid}`,title:t.title,pubDate:e(t.modify_at*1e3),description:t.description}));return s=await Promise.all(s.map(e=>t.tryGet(e.link,async()=>{let t=r(`https://api.xiaoheihe.cn/bbs/app/api/share/data/?os_type=web&app=heybox&client_type=mobile&version=999.0.3&x_client_type=web&x_os_type=Mac&x_app=heybox&heybox_id=-1&offset=0&limit=3&link_id=${e.linkId}&use_concept_type=`),i=await n({method:`get`,url:t});return e.description=i.data.link.content[0].text,delete e.linkId,e}))),{title:`小黑盒游戏新闻`,link:`https://xiaoheihe.cn`,item:s}}export{i as route};