import"./esm-shims-CGUM9TC6.js";import{config as e}from"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as t}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as n}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as r}from"./got-CB83B8oA.js";import i from"markdown-it";const a=i({html:!0}),o={path:`/commits/:owner/:repo`,categories:[`programming`],example:`/gitee/commits/y_project/RuoYi`,parameters:{owner:`用户名`,repo:`仓库名`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`gitee.com/:owner/:repo/commits`]}],name:`仓库提交`,maintainers:[`TonyRL`],handler:s};async function s(i){let{owner:o,repo:s}=i.req.param(),c=`https://gitee.com/api/v5/repos/${o}/${s}/commits`,l=await n.tryGet(c,async()=>(await r(c,{searchParams:{access_token:e.gitee.access_token??void 0,per_page:i.req.query(`limit`)?Number(i.req.query(`limit`)):100,direction:`desc`}})).data),u=l.map(e=>({title:a.renderInline(e.commit.message),description:a.render(e.commit.message),author:e.author?.login||e.commit.author.name,pubDate:t(e.commit.author.date),guid:e.sha,link:e.html_url}));return{title:`${o}/${s} - 提交`,link:`https://gitee.com/${o}/${s}/commits`,item:u}}export{o as route};