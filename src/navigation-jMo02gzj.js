import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{ofetch_default as n}from"./ofetch-ZUQ1sEMc.js";import{getItem as r,pageByNavigationPathQuery as i}from"./utils-ZxnUp1gY.js";const a={path:`/navigation/:path{.+}`,categories:[`traditional-media`],example:`/afr/navigation/markets`,parameters:{path:`Navigation path, can be found in the URL of the page`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.afr.com/path*`]}],name:`Navigation`,maintainers:[`TonyRL`],handler:o,url:`www.afr.com`};async function o(a){let{path:o}=a.req.param(),s=Number.parseInt(a.req.query(`limit`)??`10`),c=await n(`https://api.afr.com/api/content-audience/afr/graphql`,{query:{query:i,operationName:`pageByNavigationPath`,variables:{input:{brandKey:`afr`,navigationPath:`/${o}`,renderName:`web`},firstStories:s,afterStories:``}}}),l=c.data.pageByNavigationPath.page.latestStoriesConnection.edges.map(({node:t})=>({title:t.headlines.headline,description:t.overview.about,link:`https://www.afr.com${t.urls.canonical.path}`,pubDate:e(t.dates.firstPublished),updated:e(t.dates.modified),author:t.byline.filter(e=>e.type===`AUTHOR`).map(e=>e.author.name).join(`, `),category:[t.tags.primary.displayName,...t.tags.secondary.map(e=>e.displayName)],image:t.images&&`https://static.ffx.io/images/${t.images.landscape16x9.mediaId}`})),u=await Promise.all(l.map(e=>t.tryGet(e.link,()=>r(e))));return{title:c.data.pageByNavigationPath.page.seo.title,description:c.data.pageByNavigationPath.page.seo.description,image:`https://www.afr.com/apple-touch-icon-1024x1024.png`,link:`https://www.afr.com/${o}`,item:u}}export{a as route};