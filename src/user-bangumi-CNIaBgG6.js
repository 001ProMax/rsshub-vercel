import"./esm-shims-DtWyl6zt.js";import"./config-CT-9jq-j.js";import"./logger-BsClR5PH.js";import"./proxy--nAk66TF.js";import"./dist-Bbb0mfHh.js";import"./helpers-DzX-lcQO.js";import"./cache-DNP0KCHb.js";import"./render-sowsPyZZ.js";import"./md5-4BNsOP-F.js";import"./ofetch-Dnmc-sKl.js";import{got_default as e}from"./got-CdHCxDMi.js";import"./puppeteer-DUt5HfzK.js";import"./utils-2pSS71Xx.js";import{cache_default as t}from"./cache-GNzx36Iv.js";const n={path:`/user/bangumi/:uid/:type?`,categories:[`social-media`],example:`/bilibili/user/bangumi/208259`,parameters:{uid:`用户 id`,type:`1为番，2为剧，留空为1`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`space.bilibili.com/:uid`],target:`/user/bangumi/:uid`}],name:`用户追番列表`,maintainers:[`wdssmq`],handler:r};async function r(n){let r=n.req.param(`uid`),i=Number(n.req.param(`type`)||1),a=(e=>[``,`bangumi`,`cinema`][e])(i),o=await t.getUsernameFromUID(r),s=await e({method:`get`,url:`https://api.bilibili.com/x/space/bangumi/follow/list?type=${i}&follow_status=0&pn=1&ps=15&vmid=${r}`,headers:{Referer:`https://space.bilibili.com/${r}/${a}`}}),c=s.data;if(c.code!==0)throw Error(`It looks like something went wrong when querying the Bilibili API: code = ${c.code}, message = ${c.message}`);return{title:`${o} 的追番列表`,link:`https://space.bilibili.com/${r}/${a}`,description:`${o} 的追番列表`,item:c.data&&c.data.list&&c.data.list.map(e=>({title:`[${e.new_ep.index_show}]${e.title}`,description:`${e.evaluate}<br><img src="${e.cover}">`,pubDate:new Date(e.new_ep.pub_time??Date.now()).toUTCString(),link:`https://www.bilibili.com/bangumi/play/`+(e.new_ep.id?`ep${e.new_ep.id}`:`ss${e.season_id}`)}))}}export{n as route};