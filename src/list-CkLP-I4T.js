import{__dirname as e,init_esm_shims as t}from"./esm-shims-wKwH419_.js";import{config as n}from"./config-CCdhzIDL.js";import"./logger-tpjCqWRm.js";import"./dist-CTnfpkZH.js";import{art as r}from"./render-CxhTJIsl.js";import{parseDate as i}from"./parse-date-Bgabdhlb.js";import{ofetch_default as a}from"./ofetch-CeSje37P.js";import o from"node:path";t();const s={path:`/post/list/:sort?`,example:`/bc3ts/post/list`,parameters:{sort:"排序方式，`1` 為最新，`2` 為熱門，默认為 `1`"},features:{antiCrawler:!0},radar:[{source:[`web.bc3ts.net`]}],name:`動態`,maintainers:[`TonyRL`],handler:u},c=`https://web.bc3ts.net`,l=t=>r(o.join(e,`templates/media-50bba4a6.art`),{media:t});async function u(e){let{sort:t=`1`}=e.req.param(),r=e.req.query(`limit`)?Number.parseInt(e.req.query(`limit`),10):20,o=await a(`https://app.bc3ts.net/post/list/v2`,{headers:{apikey:`zlF+kaPfem%23we$2@90irpE*_RGjdw`,app_version:`3.0.28`,version:`2.0.0`,"User-Agent":n.trueUA},query:{limits:r,sort_type:t}}),s=o.data.map(e=>({title:e.title??e.content.split(`
`)[0],description:e.content.replaceAll(`
`,`<br>`)+(e.media.length&&l(e.media)),link:`${c}/post/${e.id}`,author:e.user.name,pubDate:i(e.created_time,`x`),category:e.group.name,upvotes:e.like_count,comments:e.comment_count}));return{title:`爆料公社${t===`1`?`最新`:`熱門`}動態`,link:c,language:`zh-TW`,image:`https://img.bc3ts.net/image/web/main/logo-white-new-2023.png`,icon:`https://img.bc3ts.net/image/web/main/logo/logo_icon_6th_2024_192x192.png`,item:s}}export{s as route};