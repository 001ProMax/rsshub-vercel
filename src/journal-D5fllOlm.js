import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{art as n}from"./render-DOz85fGU.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as r}from"./got-CB83B8oA.js";import i from"node:path";t();const a=`https://ieeexplore.ieee.org`,o={name:`IEEE Journal Articles`,maintainers:[`HenryQW`],categories:[`journal`],path:`/journal/:punumber/:earlyAccess?`,parameters:{punumber:"Publication Number, look for `punumber` in the URL",earlyAccess:`Optional, set any value to get early access articles`},example:`/ieee/journal/6287639/preprint`,handler:s};async function s(t){let r=t.req.param(`punumber`),o=!!t.req.param(`earlyAccess`),s=await c(r),{displayTitle:d,currentIssue:f,preprintIssue:p,coverImagePath:m}=s,{issueNumber:h,volume:g}=o?p:f,_=await l(r,h),v=_.records.map(t=>{let r=u(g)(t);return r.description=n(i.join(e,`templates/description-e509e615.art`),{item:r}),r});return{title:d,link:`${a}/xpl/tocresult.jsp?isnumber=${h}`,item:v,image:`${a}${m}`}}async function c(e){let t=await r(`${a}/rest/publication/home/metadata?pubid=${e}`);return t.data}async function l(e,t){let n=await r.post(`${a}/rest/search/pub/${e}/issue/${t}/toc`,{json:{punumber:e,isnumber:t,rowsPerPage:`100`}});return n.data}function u(e){return t=>({abstract:t.abstract||``,authors:t.authors?t.authors.map(e=>e.preferredName).join(`; `):``,description:``,doi:t.doi,link:t.htmlLink,title:t.articleTitle||``,volume:e})}export{o as route};