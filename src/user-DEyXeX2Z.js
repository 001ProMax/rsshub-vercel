import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e,parseRelativeDate as t}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as n}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as r}from"./got-CB83B8oA.js";import{timezone as i}from"./timezone-BrNu6iXe.js";import{load as a}from"cheerio";const o={path:[`/u/:uid`,`/user/:id`],categories:[`programming`],example:`/oschina/u/3920392`,parameters:{uid:`用户 id，可通过查看用户博客网址得到，以 u/数字结尾，数字即为 id`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`my.oschina.net/u/:uid`]}],name:`数字型账号用户博客`,maintainers:[],handler:s};async function s(o){let{id:s,uid:c}=o.req.param(),l=s?await r(`https://my.oschina.net/${s}`):await r(`https://my.oschina.net/u/${c}`),u=a(l.data),d=u(`.user-name .name`).text(),f=u(`#newestBlogList .blog-item`).toArray().map(n=>{n=u(n);let r=n.find(`.extra div .item:nth-of-type(2)`).text(),a=!n.find(`div.label[data-tooltip=审核中]`).length;return n.find(`.label`).remove(),{title:n.find(`.content a.header`).text(),description:n.find(`.description p`).text(),link:n.find(`a.header`).attr(`href`),pubDate:i(/\//.test(r)?e(r,[`YYYY/MM/DD HH:mm`,`MM/DD HH:mm`]):t(r),8),author:d,accessible:a}}),p=await Promise.all(f.map(e=>n.tryGet(e.link,async()=>{if(e.accessible){let t=await r(e.link),n=a(t.data);e.description=n(`.article-detail`).html()}return delete e.accessible,e})));return{title:d+`的博客`,description:u(`.user-text .user-signature`).text(),link:`https://my.oschina.net/u/${s??c}`,item:p}}export{o as route};