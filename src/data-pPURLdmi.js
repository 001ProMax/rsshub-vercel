import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as n}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{art as r}from"./render-DOz85fGU.js";import"./ofetch-ZUQ1sEMc.js";import"./got-CB83B8oA.js";import{invalid_parameter_default as i}from"./invalid-parameter-CUJdROXf.js";import{getData as a}from"./utils-1Y3y6ePS.js";import o from"node:path";t();const s={path:`/news/coronavirus/data/:province?/:city?`,name:`Unknown`,maintainers:[`CaoMeiYouRen`],handler:c};async function c(t){let s=t.req.param(`province`)||``,c=t.req.param(`city`)||``,l=`https://news.qq.com/zt2020/page/feiyan.htm#/`,u=[],d=(await a([`diseaseh5Shelf`]))?.data?.diseaseh5Shelf||{},{lastUpdateTime:f,areaTree:p}=d,m=p?.[0],h=m?.children,g=0,_=0,v=0,y=0,b={},x=``;if(!s||s===`中国`||s===`全国`?(b=m,x=`中国`):(b=h?.find(e=>e.name===s),x=s,c&&(b=b?.children?.find(e=>e.name===c),b&&(x=`${s}-${c}`))),!b)throw new i(`未找到 ${x} 的疫情数据，请检查输入的省市名称是否正确`);g=b.today?.confirm,_=b.total?.nowConfirm,v=b.total?.confirm,y=b.total?.dead;let S=n(b.total?.mtime||f),C=`${x} - 腾讯新闻 - 新型冠状病毒肺炎疫情实时追踪`,w={title:`${x} - 疫情数据`,description:r(o.join(e,`templates/data-1fa59e84.art`),{todayConfirm:g,totalNowConfirm:_,totalConfirm:v,totalDead:y}),pubDate:S,guid:`${l}${x}?pubDate=${S.toISOString()}`};return u.push(w),{title:C,link:l,item:u}}export{s as route};