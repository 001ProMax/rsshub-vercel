import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a=async a=>{let{type:o=`tzgg`}=a.req.param(),s=`https://jwc.upc.edu.cn`,{data:c}=await n(`${s}/${o}/list.htm`),l=i(c),u=l(`ul.news_list`).find(`li`).toArray().map(t=>{t=l(t);let n=t.find(`a`).first(),i=n.attr(`href`);return i=i.replace(`http://`,`https://`),n.attr(`href`).startsWith(`https://`)||(i=`${s}${n.attr(`href`)}`),{title:n.text(),link:i,pubDate:r(e(t.find(`.news_meta`).text()),8)}}),d=await Promise.all(u.map(e=>t.tryGet(e.link,async()=>{try{let{data:t}=await n(e.link),r=i(t);if(e.link.includes(`news.upc.edu.cn`))e.description=r(`.v_news_content`).html(),e.author=r(`.nr-zz h2`).html();else if(e.link.includes(`app.upc.edu.cn`)){let t=r(`body script`).first().html(),n=null;if(t){let e=t.match(/data\s*:\s*function\s*\(\)\s*{\s*return\s*{[^}]*data\s*:\s*({[\s\S]*?})/);if(e&&e[1]){let t=e[1];n=JSON.parse(t)}}e.description=n.content,e.author=n.author}else e.description=r(`.read`).first().html()||`无法获取正文内容，请手动访问`,e.author=r(`.arti_publisher`).html()}catch{e.description=`正文内容获取失败`}return e})));return{title:`${l(`title`).text()}-教务处通知-中国石油大学（华东）`,link:`${s}/${o}/list.htm`,item:d}},o={path:`/jwc/:type?`,categories:[`university`],example:`/upc/jwc/tzgg`,parameters:{type:`分类，见下表，其值与对应网页url路径参数一致，默认为所有通知`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`jwc.upc.edu.cn`,`jwc.upc.edu.cn/:type/list.htm`],target:`/jwc/:type?`}],name:`教务处`,maintainers:[`sddzhyc`],description:`| 所有通知 | 教学·运行 | 学业·学籍 | 教学·研究 | 课程·教材 | 实践·教学 | 创新·创业 | 语言·文字 | 继续·教育 | 本科·招生 |
| -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- | -------- |
| tzgg     | 18519    | 18520   | 18521    |    18522 |    18523 | 18524    |  yywwz   |  jxwjy   |   bkwzs  |`,url:`jwc.upc.edu.cn/tzgg/list.htm`,handler:a};export{o as route};