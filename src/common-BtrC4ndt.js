import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import{config as n}from"./config-C9m9eBw5.js";import{parseDate as r}from"./parse-date-D4osZfpm.js";import{getSubPath as i}from"./common-utils-CI-xkOWZ.js";import{cache_default as a}from"./cache-GwMhal7i.js";import{art as o}from"./render-DOz85fGU.js";import{ofetch_default as s}from"./ofetch-ZUQ1sEMc.js";import c from"node:path";import{load as l}from"cheerio";t();async function u(e){let t=await s(e);return t.results}async function d(t){let d=`https://www.nber.org/api/v1/working_page_listing/contentType/working_paper/_/_/search`,f=await a.tryGet(d,()=>u(d),n.cache.routeExpire,!1),p=await Promise.all(f.filter(e=>i(t)===`/papers`||e.newthisweek).map(t=>{let n=`https://www.nber.org${t.url}`;return a.tryGet(n,async()=>{let i=await s(n),a=l(i),u=a(`meta[name="citation_pdf_url"]`).attr(`content`),d=a(`.page-header__intro-inner`).html();return{title:t.title,author:a(`meta[name="dcterms.creator"]`).attr(`content`),pubDate:r(a(`meta[name="citation_publication_date"]`).attr(`content`),`YYYY/MM/DD`),link:n,doi:a(`meta[name="citation_doi"]`).attr(`content`),description:o(c.join(e,`templates/description-9c2e727f.art`),{fullAbstract:d,downloadLink:u})}})}));return{title:`NBER Working Paper`,link:`https://www.nber.org/papers`,item:p,description:`National Bureau of Economic Research Working Papers articles`}}export{d as handler};