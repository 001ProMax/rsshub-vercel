import"./esm-shims-DtWyl6zt.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./proxy-Br-Rb_Qy.js";import"./dist-CKN2M7CD.js";import"./helpers-DzX-lcQO.js";import{cache_default as e}from"./cache-Sft5n2jg.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import"./ofetch-CWsaZ4vY.js";import{got_default as n}from"./got-RSSJ34bj.js";import"./puppeteer-uO6s7chG.js";import"./puppeteer-utils-C_FH363M.js";import{getCookie as r}from"./pypasswaf-IUS7dkoC.js";import{load as i}from"cheerio";const a=`https://cae.nuaa.edu.cn/`,o=new Map([[`zhxw`,{title:`综合新闻 | 南京航空航天大学自动化学院`,suffix:`5399/list.htm`}],[`dwxz`,{title:`党委行政 | 南京航空航天大学自动化学院`,suffix:`13266/list.htm`}],[`rshz`,{title:`人事/合作 | 南京航空航天大学自动化学院`,suffix:`13267/list.htm`}],[`yjs`,{title:`研究生培养 | 南京航空航天大学自动化学院`,suffix:`13271/list.htm`}],[`bks`,{title:`本科生培养 | 南京航空航天大学自动化学院`,suffix:`13270/list.htm`}],[`xsgz`,{title:`学生工作 | 南京航空航天大学自动化学院`,suffix:`13268/list.htm`}],[`tzgg`,{title:`通知公告 | 南京航空航天大学自动化学院`,suffix:`13264/list.htm`}],[`xsxx`,{title:`学术信息 | 南京航空航天大学自动化学院`,suffix:`13265/list.htm`}],[`dbgg`,{title:`答辩公告 | 南京航空航天大学自动化学院`,suffix:`dbgg/list.htm`}]]),s={path:`/cae/:type/:getDescription?`,name:`Unknown`,maintainers:[`Xm798`],handler:c};async function c(s){let c=s.req.param(`type`),l=o.get(c).suffix,u=!!s.req.param(`getDescription`)||!1,d=new URL(l,a).href,f=await r(a),p={headers:{cookie:f}},m=await n(d,p),h=i(m.data),g=h(`#wp_news_w6 ul li`).slice(0,10).toArray().map(e=>{let t={title:h(e).find(`a`).text(),link:h(e).find(`a`).attr(`href`),date:h(e).find(`span`).text()};return t}),_=await Promise.all(g.map(async r=>{let o=r.title||`tzgg`,s=r.date,c=new URL(r.link,a).href,l=o+`<br><a href="`+c+`" target="_blank">查看原文</a>`;return u&&(l=await e.tryGet(c,async()=>{let e=c.split(`.`),t=e.at(-1);if(t===`htm`||t===`html`){let e=await n(c,p),t=i(e.data);return t(`.wp_articlecontent`).html()+`<br><hr /><a href="`+c+`" target="_blank">查看原文</a>`}})),{title:o,link:c,description:l,pubDate:t(s)}}));return{title:o.get(c).title,link:d,description:`南京航空航天大学自动化学院RSS`,item:_}}export{s as route};