import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as n}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{cache_default as r}from"./cache-GwMhal7i.js";import{art as i}from"./render-DOz85fGU.js";import{ofetch_default as a}from"./ofetch-ZUQ1sEMc.js";import{invalid_parameter_default as o}from"./invalid-parameter-CUJdROXf.js";import s from"node:path";const c=`https://api.myfans.jp`,l=`https://myfans.jp`,u={"google-ga-data":`event328`},d=e=>r.tryGet(`myfans:account:${e}`,async()=>{let t=await a(`${c}/api/v2/users/show_by_username`,{headers:u,query:{username:e}});if(!t.id)throw new o(`This creator does not exist.`);return t}),f=async e=>{let t=await a(`${c}/api/v2/users/${e}/posts`,{headers:u,query:{sort_key:`publish_start_at`,page:1}});return t.data};t();const p={path:`/user/:username`,categories:[`multimedia`],example:`/myfans/user/secret_japan`,parameters:{username:`User handle`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},radar:[{source:[`myfans.jp/:username`,`myfans.jp/:language/:username`]}],name:`User Posts`,maintainers:[`TonyRL`],handler:h},m=(t,n)=>i(s.join(e,`templates/post-e2e0e95c.art`),{postImages:t,body:n});async function h(e){let{username:t}=e.req.param(),r=await d(t),i=await f(r.id),a=i.map(e=>({title:e.body?.replaceAll(`\r
`,` `).trim().split(` `)[0],description:m(e.post_images,e.body?.replaceAll(`\r
`,`<br>`)),pubDate:n(e.published_at),link:`${l}/posts/${e.id}`,author:e.user.name}));return{title:`${r.name} (@${r.username})`,link:`${l}/${r.username}`,description:`${r.posts_count} Post ${r.likes_count} Like ${r.followers_count}
Followers ${r.followings_count} Follow ${r.about.replaceAll(`\r
`,` `)}`,image:r.avatar_url,icon:r.avatar_url,logo:r.avatar_url,language:`ja-JP`,item:a}}export{p as route};