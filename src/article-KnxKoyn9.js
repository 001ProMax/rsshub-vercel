import"./esm-shims-DtWyl6zt.js";import"./config-CT-9jq-j.js";import"./logger-BsClR5PH.js";import"./dist-BrnquCU2.js";import{cache_default as e}from"./cache-DNP0KCHb.js";import{rofetch as t}from"./ofetch-Of9UBhau.js";import{load as n}from"cheerio";const r={path:`/article/:id`,name:`章节`,url:`m.51read.org`,maintainers:[`lazwa34`],example:`/51read/article/152685`,parameters:{id:`小说 id, 可在对应小说页 URL 中找到`},categories:[`reading`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`m.51read.org/xiaoshuo/:id`],target:`/article/:id`},{source:[`51read.org/xiaoshuo/:id`],target:`/article/:id`}],handler:i};async function i(e){let{id:r}=e.req.param(),i=`https://m.51read.org/xiaoshuo/${r}`,o=n(await t(i)),s=`https://m.51read.org/zhangjiemulu/${r}`,c=n(await t(s)),l=c(`.ml-page select`).find(`option`).toArray().map(e=>e.attribs.value).length,u=await a(s,l);return{title:o(`h1`).text(),description:o(`.bi-cot p`).text(),link:i,item:u,image:o(`.bi-img img`).attr(`src`),author:o(`.bi-wt a`).text(),language:`zh-cn`}}const a=async(e,r)=>{let i=`${e}/${r}`,a=n(await t(i)),s=await Promise.all(a(`.kb-jp li>a`).toArray().map(e=>o(e.attribs.href)).toReversed());return s},o=r=>e.tryGet(r,async()=>{let e=n(await t(r));return{title:e(`h1`).text(),description:e(`.kb-cot`).html()||``,link:r}});export{r as route};