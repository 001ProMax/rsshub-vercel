import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i=new Map([[`notice`,`tzgg`],[`news`,`xw`]]),a={path:[`/jwb/:type?`],radar:[{source:[`www.shu.edu.cn/index`],target:`/:type?`}],name:`教务部`,maintainers:[`tuxinghuan`,`GhhG123`],handler:o,description:`| 通知通告 | 新闻 | 政策文件(bug) |
| -------- | ---- | -------- |
| notice   | news | policy   |`};async function o(a){let o=a.req.param(`type`)||`notice`,s=`https://jwb.shu.edu.cn/index/${i.get(o)||o}.htm`,c=await n.get(s),l=r(c.data),u=l(`title`).text(),d=l(`.only-list`).find(`li`).slice(0,10).toArray().map(e=>({title:l(e).find(`a`).text(),link:new URL(l(e).find(`a`).attr(`href`),`https://jwb.shu.edu.cn/`).href,date:l(e).children(`span`).text()})),f=await Promise.all(d.map(i=>t.tryGet(i.link,async()=>{let t=await n.get(i.link),a=r(t.data);return i.author=a(`[id$=_lblUser]`).text().trim(),i.pubDate=e(i.date,`YYYY年MM月DD日`),i.description=a(`.v_news_content`).html()||i.title,i})));return{title:u,link:s,image:`https://www.shu.edu.cn/__local/0/08/C6/1EABE492B0CF228A5564D6E6ABE_779D1EE3_5BF7.png`,item:f}}export{a as route};