import{__dirname as e,init_esm_shims as t}from"./esm-shims-DtWyl6zt.js";import{config as n}from"./config-BpwDbAkH.js";import"./logger-B3QfaIfn.js";import"./dist-CKN2M7CD.js";import{cache_default as r}from"./cache-BWStd97H.js";import{art as i}from"./render-CxhTJIsl.js";import{parseDate as a}from"./parse-date-Bgabdhlb.js";import{ofetch_default as o}from"./ofetch-CYKAhM9L.js";import s from"node:path";t();const c=e=>r.tryGet(`nicovideo:user:${e}`,()=>o(`https://embed.nicovideo.jp/users/${e}`)),l=e=>r.tryGet(`nicovideo:user:${e}:videos`,async()=>{let{data:t}=await o(`https://nvapi.nicovideo.jp/v3/users/${e}/videos`,{headers:{"X-Frontend-Id":`6`},query:{sortKey:`registeredAt`,sortOrder:`desc`,sensitiveContents:`mask`,pageSize:100,page:1}});return t.items},n.cache.routeExpire,!1),u=(t,n)=>i(s.join(e,`templates/video-3a0bdb3a.art`),{video:t,embed:n}),d=async e=>{let{id:t}=e.req.param(),n=!e.req.param(`embed`),r=await c(t),i=await l(t),o=i.map(({essential:e})=>({title:e.title,link:`https://www.nicovideo.jp/watch/${e.id}`,pubDate:a(e.registeredAt),author:[{name:e.owner.name,avatar:e.owner.iconUrl,url:`https://www.nicovideo.jp/user/${e.owner.id}`}],description:u(e,n),image:e.thumbnail.nHdUrl||e.thumbnail.largeUrl||e.thumbnail.middleUrl,upvotes:e.count.like,comments:e.count.comment}));return{title:`${r.nickname} - ニコニコ`,link:`https://www.nicovideo.jp/user/${t}/video`,image:r.icon,item:o}},f={name:`User Videos`,path:`/user/:id/video/:embed?`,parameters:{id:`User ID`,embed:`Default to embed the video, set to any value to disable embedding`},example:`/nicovideo/user/16690815/video`,maintainers:[`TonyRL`],radar:[{source:[`www.nicovideo.jp/user/:id`,`www.nicovideo.jp/user/:id/video`],target:`/user/:id/video`}],handler:d};export{f as route};