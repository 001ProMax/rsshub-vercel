import"./esm-shims-CGUM9TC6.js";import{config as e}from"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as t}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as n}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as r}from"./got-CB83B8oA.js";import{timezone as i}from"./timezone-BrNu6iXe.js";import{load as a}from"cheerio";const o={path:`/bbs/hot`,categories:[`university`],example:`/pku/bbs/hot`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`bbs.pku.edu.cn/v2/hot-topic.php`,`bbs.pku.edu.cn/`]}],name:`北大未名 BBS 全站十大`,maintainers:[`wooddance`],handler:s,url:`bbs.pku.edu.cn/v2/hot-topic.php`,description:`::: warning
  论坛部分帖子正文内容的获取需要用户登录后的 Cookie 值，详情见部署页面的配置模块。
:::`};async function s(){let o=e.pkubbs.cookie,s={};o&&(s.cookie=o);let c=await r(`https://bbs.pku.edu.cn/v2/hot-topic.php`,{headers:s}),l=a(c.body),u=l(`#list-content .list-item`).toArray().map(e=>({url:new URL(l(e).find(`> a.link`).attr(`href`),`https://bbs.pku.edu.cn/v2/`).href,title:l(e).find(`.title`).text()})).slice(0,10),d=await Promise.all(u.map(({url:e,title:o})=>n.tryGet(e,async()=>{try{let n=await r(e,{headers:s}),c=a(n.body),l=c(`.post-card:first-child .sl-triangle-container .down-list span`).text()||c(`.post-card:first-child .sl-triangle-container .title span`).text();return{title:o,description:c(`.post-card:first-child .content`).html(),link:e,guid:e,pubDate:i(t(l,`发表于YYYY-MM-DD HH:mm:ss`),8)}}catch{return{title:o,link:e,guid:e}}})));return{title:`北大未名BBS 全站十大`,link:`https://bbs.pku.edu.cn/v2/hot-topic.php`,description:`北大未名BBS 全站热门话题前十名`,item:d}}export{o as route};