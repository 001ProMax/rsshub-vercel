import"./esm-shims-CGUM9TC6.js";import{config as e}from"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseRelativeDate as t}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as n}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as r}from"./got-CB83B8oA.js";import{load as i}from"cheerio";import a from"p-map";const o={path:`/default`,categories:[`bbs`],example:`/guozaoke/default`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`过早客`,maintainers:[`xiaoshame`],handler:s,url:`guozaoke.com/`};async function s(){let o=`https://www.guozaoke.com/`,s=await r({method:`get`,url:o,headers:{Cookie:e.guozaoke.cookies,"User-Agent":e.ua}}),c=i(s.data),l=c(`div.topic-item`).toArray(),u=l.slice(0,20).map(e=>{let n=c(e),r=n.find(`h3.title a`).text(),i=n.find(`h3.title a`).attr(`href`),a=n.find(`span.username a`).text(),o=n.find(`span.last-touched`).text(),s=t(o),l=i?i.split(`#`)[0]:void 0;return l?{title:r,link:l,author:a,pubDate:s}:void 0}).filter(e=>e!==void 0),d=await a(u,t=>n.tryGet(t.link,async()=>{let n=`https://www.guozaoke.com${t.link}`,a=await r({method:`get`,url:n,headers:{Cookie:e.guozaoke.cookies}}),o=i(a.data),s=o(`div.ui-content`).html();s=s?s.trim():``;let c=o(`.reply-item`).map((e,t)=>{let n=o(t),r=n.find(`span.content`).text().trim(),i=n.find(`span.username`).text();return{comment:r,author:i}});if(c&&c.length>0)for(let e of c)s+=`<br>`+e.author+`: `+e.comment;return t.description=s,t}),{concurrency:2});return{title:`过早客`,link:o,item:d}}export{o as route};