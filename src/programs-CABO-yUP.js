import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as n}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as r}from"./cache-GwMhal7i.js";import{art as i}from"./render-DOz85fGU.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as a}from"./got-CB83B8oA.js";import{timezone as o}from"./timezone-BrNu6iXe.js";import s from"node:path";import{load as c}from"cheerio";t();const l={path:`/programs`,categories:[`shopping`],example:`/shcstheatre/programs`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.shcstheatre.com/Program/programList.aspx`]}],name:`节目列表`,maintainers:[`fuzy112`],handler:u,url:`www.shcstheatre.com/Program/programList.aspx`};async function u(){let t=`https://www.shcstheatre.com/Program/programList.aspx`,l=await a.get(t),u=c(l.data),d=await Promise.all(u(`#datarow .program-name a`).map((c,l)=>{let d=new URL(u(l).attr(`href`),t);return r.tryGet(d.toString(),async()=>{let t=d.searchParams.get(`id`),r=await a.post(`https://www.shcstheatre.com/webapi.ashx?op=GettblprogramCache`,{headers:{"Content-Type":`application/x-www-form-urlencoded; charset=UTF-8`},form:{id:t}}),c=r.data.data.tblprogram[0];return{title:c.SCS_WEB_BRIEFNAME,link:d.toString(),description:i(s.join(e,`templates/description-f9f25b7f.art`),c),pubDate:o(n(c.SJ_DATE_PC),8)}})})),f=u(`.menu-logo img`).attr(`src`);return{title:`上海文化广场 - 节目列表`,link:t,image:f,item:d}}export{l as route};