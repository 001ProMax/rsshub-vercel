import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{URL as r}from"node:url";import{load as i}from"cheerio";const a=`http://www.wzu.edu.cn/index/`,o={wdxw:`温大新闻`,mtwd:`媒体温大`,xswd:`学术温大`,tzgg:`通知公告`,zbxx:`招标信息`,xsgg:`学术公告`};async function s(e){let t=``,o=await n.get(e),s=i(o.data,{decodeEntities:!1});return s(`img`).attr(`src`,(e,t)=>new r(t,a).href),s(`.vsbcontent_video`).each(function(){let e=s(this).find(`script`).attr(`vurl`);return t=new r(e,a).href,s(this).html(`<video width="100%" src="`+t+`"></video>`).html()}),s(`div[id^=vsb_content]`).html()}const c={path:`/news/:type?`,name:`Unknown`,maintainers:[`Chandler-Lu`],handler:l};async function l(c){let l=Number.parseInt(c.req.param(`type`))||0,u=Object.entries(o),[d,f]=u[l],p=new r(d+`.htm`,a).href,m=await n.get(p),h=i(m.data),g=h(`#News-sidebar-b-nav`).find(`li`);return{title:f,link:p,description:`温州大学 - `+f,item:g.toArray().map(async n=>{let o=i(n),c=o(`li>a`),l=c.attr(`href`),u=new r(l,a).href;return{title:c.attr(`title`),description:await t.tryGet(u,()=>s(u)),pubDate:e(o(`li>samp`).text(),`YYYY-MM-DD`),link:u}})}}export{c as route};