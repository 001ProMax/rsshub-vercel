import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";import i from"markdown-it";const a=i({linkify:!0}),o=`https://xiaozhuanlan.com`,s={path:`/column/:id`,categories:[`new-media`],example:`/xiaozhuanlan/column/olddriver-selection`,parameters:{id:`专栏 ID，可在专栏页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`xiaozhuanlan.com/:id`]}],name:`专栏`,maintainers:[`TonyRL`],handler:c};async function c(i){let s=i.req.param(`id`),c=await n(`${o}/${s}`),l=r(c.data),u=l(`.xzl-topic-item`).toArray().map(t=>(t=l(t),t.find(`.topic-has-suggested-item`).remove(),{title:t.find(`h3`).text().trim(),link:new URL(t.find(`.topic-body-link`).attr(`href`),o).href,author:t.find(`.topic-header .xzl-author-lockup`).text().trim(),pubDate:e(t.find(`.topic-header .timeago`).attr(`title`))}));return u=await Promise.all(u.map(e=>t.tryGet(e.link,async()=>{let t=await n(e.link),i=r(t.data);return e.description=a.render(i(`.hidden_markdown_body`).attr(`data-summary`)),i(`.topic-tags`)&&(e.category=i(`.topic-tags label`).toArray().map(e=>i(e).text())),e}))),{title:l(`head title`).text().trim(),link:`${o}/${s}`,description:l(`meta[name=description]`).attr(`content`),item:u}}export{s as route};