import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a=`https://www.ymgal.games`,o={news:`?type=NEWS&page=1`,column:`?type=COLUMN&page=1`},s={path:`/article/:type?`,categories:[`anime`],example:`/ymgal/article`,parameters:{type:`文章类型`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`文章`,maintainers:[`SunBK201`],handler:c,description:`| 全部文章 | 资讯 | 专栏   |
| -------- | ---- | ------ |
| all      | news | column |`};async function c(s){let c=s.req.param(`type`)||`all`,l=`${a}/co/topic/list`+o[c],u=[];if(c===`all`)await Promise.all(Object.values(o).map(async e=>{let t=await n(`${a}/co/topic/list${e}`);u.push(...t.data.data)})),u=u.sort((e,t)=>t.publishTime-e.publishTime).slice(0,10);else{let e=await n(l);u=e.data.data}let d=await Promise.all(u.map(o=>{let s=a+`/co/article/`+o.topicId;return t.tryGet(s,async()=>{let t=await n(s),a=i(t.data),c=a(`article`).html().trim();return{title:o.title,link:s,pubDate:r(e(o.publishTime),8),description:c}})})),f=`全部文章`;return c===`news`?f=`资讯`:c===`column`&&(f=`专栏`),{title:`月幕 Galgame - ${f}`,link:`${a}/co/article`,description:`月幕 Galgame - ${f}`,item:d}}export{s as route};