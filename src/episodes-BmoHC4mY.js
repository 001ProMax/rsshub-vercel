import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{ofetch_default as n}from"./ofetch-ZUQ1sEMc.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import i from"dayjs";import a from"dayjs/plugin/duration.js";import{load as o}from"cheerio";i.extend(a);const s={path:`/explore/:type`,categories:[`multimedia`],example:`/podwise/explore/latest`,parameters:{type:`latest or all episodes.`},radar:[{source:[`podwise.ai/explore/:type`]}],name:`Episodes`,maintainers:[`lyling`],handler:async i=>{let a=i.req.param(`type`),s=`https://podwise.ai/explore/${a}`,u=await n(s),d=o(u),f=d(`#navigator`).next(),p=f.find(`h1`).first().text(),m=f.find(`p`).eq(1).text(),h=f.find(`.group`).toArray().map(t=>{t=d(t);let n=t.find(`a`).first().attr(`href`),i=t.find(`p`).first().text(),a=t.find(`a`).next().children(`span`).text();return{link:`https://podwise.ai${n}`,description:i,pubDate:r(e(a,`DD MMM YYYY`,`en`),8)}}),g=await Promise.all(h.map(e=>t.tryGet(e.link,async()=>{let t=await n(e.link),r=o(t);e.description=r(`summary`).first().html();let i=r(`img[alt="Podcast cover"]`).eq(1),a=i.next().find(`span`).eq(2),s=JSON.parse(r(`script:contains("podName")`).first().text().match(/self\.__next_f\.push\((.+)\)/)?.[1]??``),u=JSON.parse(s[1].slice(2))[1][3].children[3].episode;return e.title=u.title,e.author=u.podName,e.itunes_item_image=u.cover,e.itunes_duration=c(a.text()),e.enclosure_url=u.link,e.enclosure_type=l(u.linkType),e})));return{title:p,description:m,link:s,item:g}}};function c(e){let t=e.match(/(\d+h)?(\d+m)?/),n=t[1]?Number.parseInt(t[1]):0,r=t[2]?Number.parseInt(t[2]):0;return i.duration({hours:n,minutes:r}).asSeconds()}function l(e){switch(e){case`mp3`:return`audio/mpeg`;case`m4a`:return`audio/x-m4a`;case`mp4`:return`video/mp4`;default:return e}}export{s as route};