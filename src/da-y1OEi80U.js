import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";import i from"iconv-lite";const a=`http://www.design.zjut.edu.cn/BigClass.jsp?`,o=new Map([[1,{id:`bigclassid=16`,title:`学院新闻 - 浙工大设建学院`}],[2,{id:`bigclassid=18`,title:`公告通知 - 浙工大设建学院`}],[3,{id:`bigclassid=5&sid=25`,title:`科研申报 - 浙工大设建学院`}],[4,{id:`bigclassid=5&sid=26`,title:`科研成果 - 浙工大设建学院`}],[5,{id:`bigclassid=5&sid=27`,title:`文件与资源 - 浙工大设建学院`}],[6,{id:`bigclassid=20`,title:`学术交流 - 浙工大设建学院`}]]),s={path:`/da/:type`,categories:[`university`],example:`/zjut/da/1`,parameters:{type:`分类，见下表`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`设计与建筑学院`,maintainers:[`yikZero`],url:`www.design.zjut.edu.cn`,handler:c,description:`| 学院新闻 | 公告通知 | 科研申报 | 科研成果 | 文件与资源 | 学术交流 |
| -------- | -------- | -------- | -------- | -------- | -------- |
| 1        | 2        | 3        | 4        | 5        | 6        |`};async function c(s){let c=Number.parseInt(s.req.param(`type`)),l=o.get(c)?.id,u=await n(`${a}${l}`,{responseType:`buffer`});u.data=i.decode(u.data,`gbk`);let d=r(u.data),f=d(`td[class='newstd'] .news2`).toArray().map(t=>{t=d(t);let n=t.find(`a`).text(),r=t.find(`a`).attr(`href`);if(!r)return null;r.startsWith(`http`)||(r=`http://www.design.zjut.edu.cn/`+r);let i=t.next().text().replace(`[`,``).replace(`]`,``);return{title:n,description:``,pubDate:e(i),link:r}}),p=await Promise.all(f.map(e=>t.tryGet(e.link,async()=>{let t=await n(e.link),i=r(t.data);return e.description=i(`div[style="line-height:27px;"]`).html(),e})));return{title:o.get(c)?.title,link:`${a}${l}`,item:p}}export{s as route};