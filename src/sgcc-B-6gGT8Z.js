import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i={path:`/mem/gk/sgcc/:category?`,categories:[`government`],example:`/gov/mem/gk/sgcc/tbzdsgdcbg`,parameters:{category:`分类，见下表，默认为挂牌督办`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.mem.gov.cn/gk/sgcc/:category`],target:`/mem/gk/sgcc/:category`}],name:`事故及灾害查处`,maintainers:[`nczitzk`],handler:a,description:`| 挂牌督办 | 调查报告   |
| -------- | ---------- |
| sggpdbqk | tbzdsgdcbg |`};async function a(i){let{category:a=`sggpdbqk`}=i.req.param(),o=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`),10):30,s=`https://www.mem.gov.cn`,c=new URL(`gk/sgcc/${a}`,s).href,{data:l}=await n(c),u=r(l),d=u(`table.center_main02`).find(`a[title]`).slice(0,o).toArray().map(t=>{t=u(t);let n=RegExp(`\\/sgcc\\/${a}\\/\\.\\.\\.`),r=new URL(`${a}/${t.prop(`href`).replace(/\.\//,``)}`,c).href.replace(n,``);return{title:t.contents().first().text(),link:r,pubDate:e(t.find(`span`).text()),enclosure_url:r,enclosure_type:`application/${r.split(/\./).pop()}`}});d=await Promise.all(d.map(e=>t.tryGet(e.link,async()=>{if(e.link.endsWith(`html`)){let{data:t}=await n(e.link),i=r(t);e.description=i(`#content`).html()}return e})));let f=new URL(u(`link[rel="shortcut icon"]`).prop(`href`),s).href;return{item:d,title:u(`title`).text(),link:c,description:u(`meta[name="ColumnDescription"]`).prop(`content`),language:`zh`,image:new URL(u(`#imag`).prop(`src`),s).href,icon:f,logo:f,subtitle:u(`meta[name="ColumnName"]`).prop(`content`),author:u(`meta[name="SiteName"]`).prop(`content`)}}export{i as route};