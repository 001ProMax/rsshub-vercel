import{parseDate as e}from"./parse-date-D4osZfpm.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{ofetch_default as n}from"./ofetch-ZUQ1sEMc.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a=async e=>{let t=await n(`https://db2.gamersky.com/LabelJsonpAjax.aspx?${new URLSearchParams({jsondata:JSON.stringify({type:`updatenodelabel`,isCache:!0,cacheTime:60,nodeId:e,isNodeId:`true`,page:1})})}`,{parseResponse:e=>JSON.parse(e.match(/\((.+)\);/)?.[1]??`{}`)});return t.body},o=t=>{let n=i(t);return n(`li`).toArray().map(t=>{let i=n(t),a=i.find(`.tt`).length?i.find(`.tt`):i.find(`a`),o=a.text(),s=a.attr(`href`),c=r(e(i.find(`.time`).text()),8),l=i.find(`.txt`).text();if(s)return{title:o,link:s,pubDate:c,description:l}}).filter(e=>e!==void 0)},s=e=>t.tryGet(e.link,async()=>{let t=await n(e.link),r=i(t),a=r(`.Mid2L_con, .MidLcon`);return a.find(`.appGameBuyCardIframe, .GSAppButton, .Mid2L_down`).remove(),a.find(`a`).each((e,t)=>{t.attribs.href?.startsWith(`https://www.gamersky.com/showimage/id_gamersky.shtml?`)&&(t.attribs.href=t.attribs.href.replace(`https://www.gamersky.com/showimage/id_gamersky.shtml?`,``))}),a.find(`img`).each((e,t)=>{t.attribs.src===`http://image.gamersky.com/webimg13/zhuanti/common/blank.png`?t.attribs.src=t.attribs[`data-origin`]:t.attribs.src.endsWith(`_S.jpg`)&&(t.attribs.src=t.attribs.src.replace(`_S.jpg`,`.jpg`))}),a.find(`.Slides li`).each((e,t)=>{t.attribs.style===`display: none;`&&(t.attribs.style=`display: list-item;`)}),e.description=a.html()||e.description,e});function c(e){let t=`|`+e.map(e=>`${e.type}|`).join(``)+`
|`+Array.from({length:e.length}).fill(`---|`).join(``)+`
|`+e.map(e=>`${e.name}|`).join(``)+`
`;return t}export{s as getArticle,a as getArticleList,c as mdTableBuilder,o as parseArticleList};