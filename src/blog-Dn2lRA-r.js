import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{invalid_parameter_default as r}from"./invalid-parameter-CUJdROXf.js";import{isValidHost as i}from"./valid-host-DEPw8oAS.js";import{load as a}from"cheerio";const o=new Set([`all`,`design-resources`,`learn-design`,`inside-eagle`]),s={path:`/blog/:cate?/:language?`,categories:[`blog`],example:`/eagle/blog/en`,parameters:{cate:"Category, get by URL, `all` by default",language:{description:`Language`,options:[{value:`cn`,label:`cn`},{value:`tw`,label:`tw`},{value:`en`,label:`en`}],default:`en`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cn.eagle.cool/blog`],target:`/blog`}],name:`Blog`,maintainers:[`Fatpandac`],handler:c,url:`cn.eagle.cool/blog`};async function c(s){let c=s.req.param(`cate`)??`all`,l=s.req.param(`language`)??`cn`;if(!i(c)||!i(l))throw new r(`Invalid host`);o.has(c)||(l=c,c=`all`);let u=`https://${l}.eagle.cool`,d=`${u}/blog/${c===`all`?``:c}`,f=await n(d),p=a(f.data),m=p(`div.categories-list > div > div > div > ul > li.active`).text(),h=p(`div.post-item`).toArray().map(t=>({title:p(t).find(`div.title`).text(),link:new URL(p(t).find(`a`).attr(`href`),u).href,pubDate:e(p(t).find(`div.metas > a > span`).text().replace(`ãƒ»`,``))})),g=await Promise.all(h.map(e=>t.tryGet(e.link,async()=>{let t=await n(e.link),r=a(t.data);return e.description=r(`div.post-html`).html(),e})));return{title:`eagle - ${m}`,link:d,item:g}}export{s as route};