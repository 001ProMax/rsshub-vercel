import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{ofetch_default as n}from"./ofetch-ZUQ1sEMc.js";import{load as r}from"cheerio";const i={path:`/`,categories:[`new-media`],example:`/newswav`,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`newswav.com/latest`,`newswav.com`]}],name:`Latest`,maintainers:[`TonyRL`],handler:a};async function a(){let i=`https://newswav.com`,a=await n(`https://feed-api.newswav.com/api/web/feeds/latest`,{query:{languages:`en,ms,zh`}}),o=a.data.content.filter(e=>e.contentId!==`AD`).map(t=>({title:t.title,description:t.description,category:t.topics.map(e=>e.en),link:`${i}/article/${t.permalink}`,permalink:t.permalink,pubDate:e(t.publishedAt),author:t.publisher.name,image:t.thumbnailUrl})),s=await Promise.all(o.map(e=>t.tryGet(e.link,async()=>{let t=await n(`https://api.newswav.com/v4/api/v1/web/contents/${e.permalink}`);if(t.contentType===`video`){let n=t.meta.video;return e.description=`<video controls preload="metadata" poster="${n.thumbnailUrl}"><source src="${n.videoUrl}" type="${n.mimeType}"></video><br>${n.content}`,e}else if(t.contentType===`podcast`){let n=t.meta.podcast;return e.description=`<audio controls"><source src="${n.url}" type="audio/mpeg"></audio><br>${n.content}`,e.enclosure_type=`audio/mpeg`,e}let i=t.meta.article,a=r(i.content);a(`*`).contents().filter((e,t)=>t.type===`comment`&&t.data.trim()===`AD`).remove(),a(`iframe`).each((e,t)=>{let n=a(t);(n.attr(`src`)?.includes(`ga4-track.html`)||n.attr(`src`)?.includes(`ga4-v2-track.html`))&&n.remove()}),e.description=a.html();let o=new URL(i.originalUrl);return e.image=o.pathname.startsWith(`/1000x0,q50=/`)?o.pathname.replace(`/1000x0,q50=/`,``):o.pathname,e})));return{title:`Newswav - Malaysiaâ€™s #1 Content Aggregator | Malaysia Breaking News, World News, and Latest News`,description:`Latest news, videos and podcasts on Politics, Lifestyle, Sports, Current Affairs, Business & Finance, Entertainment and more from Malaysia & around the world.`,link:`${i}/latest`,item:s}}export{i as route};