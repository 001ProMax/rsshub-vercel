import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{ofetch_default as n}from"./ofetch-ZUQ1sEMc.js";const r={path:`/user/:username/articles`,categories:[`program-update`],example:`/civitai/user/Chenkin/articles`,parameters:{username:`Username`},radar:[{source:[`civitai.com/user/:username`,`civitai.com/user/:username/articles`]}],name:`User Article`,maintainers:[`TonyRL`],handler:i};async function i(r){let{username:i}=r.req.param(),a=await t.tryGet(`civitai:userProfile:${i}`,async()=>{let e=await n(`https://civitai.com/api/trpc/userProfile.get`,{query:{input:JSON.stringify({json:{username:i}})}});return e.result.data.json}),o=await n(`https://civitai.com/api/trpc/article.getInfinite`,{query:{input:JSON.stringify({json:{period:`AllTime`,periodMode:`published`,sort:`Newest`,username:i,includeDrafts:!1,pending:!0,browsingLevel:1,excludedTagIds:[415792,426772,5188,5249,130818,130820,133182],cursor:null},meta:{values:{cursor:[`undefined`]}}})}});if(!o.result.data.json.items.length)throw Error(`This user has no articles.`);let s=o.result.data.json.items.map(t=>({title:t.title,link:`https://civitai.com/articles/${t.id}`,id:t.id,pubDate:e(t.publishedAt),updated:e(t.publishedAt),author:t.user?.username,category:t.tags.map(e=>e.name),image:`https://image.civitai.com/xG1nkqKTMzGDvpLrqFT7WA/${t.coverImage.url}/${t.coverImage.name}`})),c=await Promise.all(s.map(e=>t.tryGet(e.link,async()=>{let t=await n(`https://civitai.com/api/trpc/article.getById`,{query:{input:JSON.stringify({json:{id:e.id}})}});return e.description=t.result.data.json.content,e})));return{title:`${i} Creator Profile | Civitai`,description:a.profile.message.replaceAll(`
`,` `)||a.profile.bio,link:`https://civitai.com/user/${i}/articles`,image:a.image,item:c}}export{r as route};