import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i={title:{en:`Hong Kong Centre for Health Protection`,zh_cn:`香港卫生防护中心`,zh_tw:`香港衛生防護中心`},important_ft:{en:`Important Topics`,zh_cn:`重要资讯`,zh_tw:`重要資訊`},press_data_index:{en:`Press Releases`,zh_cn:`新闻稿`,zh_tw:`新聞稿`},ResponseLevel:{en:`Response Level`,zh_cn:`应变级别`,zh_tw:`應變級別`},publication:{en:`Periodicals & Publications`,zh_cn:`期刊及刊物`,zh_tw:`期刊及刊物`},HealthAlert:{en:`Health Notice`,zh_cn:`健康通告`,zh_tw:`健康通告`}},a={path:`/chp/:category?/:language?`,radar:[{source:[`dh.gov.hk/`]}],name:`Unknown`,maintainers:[`nczitzk`],handler:o,url:`dh.gov.hk/`};async function o(a){let o={en:`en`,zh_cn:`sc`,zh_tw:`tc`},s=a.req.param(`category`)??`important_ft`,c=a.req.param(`language`)??`zh_tw`,l=`https://www.chp.gov.hk`,u=`${l}/js/${s}.js`,d=`${l}/${o[c]}${s===`press_data_index`?`/media/116`:``}/index.html`,f=await n({method:`get`,url:u}),p=JSON.parse(f.data.match(/"data":(\[{.*}])}/)[1]).map(t=>{let n=``;return n=t.UrlPath_en?t[`UrlPath_${c}`].includes(`http`)?t[`UrlPath_${c}`]:`${l}${t[`UrlPath_${c}`]}`:s===`ResponseLevel`&&t.FilePath_en?t[`FilePath_${c}`].includes(`http`)?t[`FilePath_${c}`]:`${l}${t[`FilePath_${c}`]}`:`${l}/${o[c]}/${s===`publication`?`guideline`:`features`}/${t.InfoBlockID}.html`,{link:n,pubDate:e(t.PublishDate),description:t[`Content_${c}`]??``,title:t[`Title_${c}`]?.replace(/<.*>/,``)??``}}),m=await Promise.all(p.map(e=>t.tryGet(e.link,async()=>{if((s===`important_ft`||s===`press_data_index`)&&(e.link.indexOf(`htm`)>0||e.link.indexOf(`/features/`)>0)){let t=await n({method:`get`,url:e.link}),i=r(t.data);i(`#btmNav, script`).remove(),i(`.contHeader, .title_display_date`).remove(),i(`.printBtn, .bookmarkBtn, .qrBtn, .qr-content`).remove(),e.description=i(`#mainContent, #pressrelease`).html()}return e})));return{title:`${i[s][c]} - ${i.title[c]}`,link:d,item:m}}export{a as route};