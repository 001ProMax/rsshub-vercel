import{parseDate as e}from"./parse-date-D4osZfpm.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{ofetch_default as n}from"./ofetch-ZUQ1sEMc.js";import{load as r}from"cheerio";const i=`https://www.joshwcomeau.com`;async function a(e,t){let i=await n(e),a=r(i),o=a(`header>h1`).text(),s=a(t).toArray().map(e=>{let t=a(e).attr(`href`),n=a(e).find(`span`).text();return{url:t,cardTitle:n}});return{heading:o,urls:s}}async function o(e){let n=await Promise.allSettled(e.map(async e=>await t.tryGet(`joshwcomeau:${e.url}`,async()=>await s(e))));return n.map((t,n)=>t.status===`fulfilled`?t.value:{title:`Error Reading Item`,link:`${i}${e[n]?.url}`})}async function s({url:e,cardTitle:t}){if(e.startsWith(`https`))return{title:t??`External Content`,description:`Read it on external Site`,link:e};let a=await n(`${i}${e}`),o=r(a),s=o(`meta[property="og:title"]`).attr(`content`)?.replace(`â€¢ Josh W. Comeau`,``),l=o(`meta[property="og:description"]`).attr(`content`),u=o(`meta[name="author"]`).attr(`content`),d=o(`div[data-parent-layout]`),f=d.find(`dl:first-child > dd > a`).text(),p=d.find(`dl:first-child > dd:has(span):not(:last-child)`).text(),m=d.find(`dl:last-child > dd:has(span):not(:last-child)`).text(),h=o(`main > article`).html();return{title:s,description:h,author:u,pubDate:c(p),updated:c(m),link:`${i}${e}`,content:{html:h,text:l},category:[f]}}function c(t){let n=t.trim().replaceAll(` `,`/`).replace(`,`,``);return e(n,`MMMM/Do/YYYY`,`en`)}export{a as getRelativeUrlList,o as processList,i as rootUrl};