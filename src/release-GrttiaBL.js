import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{ofetch_default as n}from"./ofetch-ZUQ1sEMc.js";import{ViewType as r}from"./types-A5bA50Mg.js";import{load as i}from"cheerio";const a=async r=>{let a=Number.parseInt(r.req.query(`limit`)??`30`,10),o=new URL(`downloads`,`https://www.python.org`).href,s=await n(o),c=i(s),l=c(`html`).attr(`lang`)??`en`,u=[];return u=c(`div.active-release-list-widget ol.list-row-container li`).slice(0,a).toArray().map(t=>{let n=c(t),r=n.find(`span.release-version`).text(),i=n.find(`span.release-start`).text()?.match(/(\d{4}-\d{2}-\d{2})/)?.[1],a=n.find(`span.release-pep a`).attr(`href`),o=i,s={title:r,pubDate:i?e(i):void 0,link:a,updated:o?e(o):void 0,language:l};return s}),u=await Promise.all(u.map(e=>e.link?t.tryGet(e.link,async()=>{let t=await n(e.link),r=i(t),a=r(`h1.page-title`).text(),o=r(`section#pep-content`).html(),s=r(`meta[property="og:image"]`).attr(`content`),c={title:a,description:o,content:{html:o,text:o},image:s,banner:s,language:l};return{...e,...c}}):e)),{title:c(`div.active-release-list-widget h2.widget-title`).text(),description:c(`meta[property="og:description"]`).attr(`content`),link:o,item:u,allowEmpty:!0,image:c(`meta[property="og:image"]`).attr(`content`),language:l,id:c(`meta[property="og:url"]`).attr(`content`)}},o={path:`/release`,name:`Active Python Releases`,url:`www.python.org`,maintainers:[`nczitzk`],handler:a,example:`/python/release`,parameters:void 0,description:void 0,categories:[`programming`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.python.org`,`www.python.org/downloads`],target:`/release`}],view:r.Articles};export{a as handler,o as route};