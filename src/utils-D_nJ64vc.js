import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import{parseDate as n}from"./parse-date-D4osZfpm.js";import{art as r}from"./render-DOz85fGU.js";import{got_default as i}from"./got-CB83B8oA.js";import a from"node:path";t();const o=`otobanana.com`,s=`https://api.${o}`,c=`https://${o}`,l=(e,t)=>t(`otobanana:user:${e}`,async()=>{let{data:t}=await i(`${s}/users/${e}/`);return t}),u=t=>({title:t.title,description:r(a.join(e,`templates/description-161b5c63.art`),{cast:t}),pubDate:n(t.created_at),link:`https://otobanana.com/cast/${t.id}`,author:`${t.user.name} (@${t.user.username})`,itunes_item_image:t.thumbnail_url,itunes_duration:t.duration_time,enclosure_url:t.audio_url,enclosure_type:`audio/x-m4a`,upvotes:t.like_count,comments:t.comment_count}),d=e=>({title:e.title,description:e.is_open?`配信中のライブ`:`終了しました`,pubDate:n(e.created_at),link:e.room_url,guid:`${e.room_url}#${e.id}`,author:`${e.user.name} (@${e.user.username})`,upvotes:e.like_count,comments:e.comment_count}),f=({id:e,type_label:t,cast:r,message:i})=>{switch(t){case`cast`:return u(r);case`message`:return{title:i.text.split(`
`)[0],description:i.text.replaceAll(`
`,`<br>`),pubDate:n(i.created_at),link:`https://otobanana.com/${t}/${e}`,author:`${i.user.name} (@${i.user.username})`,upvotes:i.like_count,comments:i.comment_count};default:throw Error(`Unknown post type: ${t}`)}};export{s as apiBase,c as baseUrl,l as getUserInfo,u as renderCast,d as renderLive,f as renderPost};