import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as n}from"./parse-date-D4osZfpm.js";import{getSubPath as r}from"./common-utils-CI-xkOWZ.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as i}from"./cache-GwMhal7i.js";import{art as a}from"./render-DOz85fGU.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as o}from"./got-CB83B8oA.js";import s from"node:path";import{load as c}from"cheerio";t();const l={path:[`/work/tags/:tag`,`/tag/:tag`,`*`],radar:[{source:[`logonews.cn/work/tags/:tag`]}],name:`Unknown`,maintainers:[`nczitzk`],handler:u,url:`logonews.cn/`,description:"如 [中国 - 标志情报局](https://www.logonews.cn/tag/china) 的 URL 为 `https://www.logonews.cn/tag/china`，可得路由为 [`/logonews/tag/china`](https://rsshub.app/logonews/tag/china)。"};async function u(t){let l=r(t),u=l.indexOf(`/work`)===0,d=`https://www.logonews.cn${l===`/`?``:l}`,f=await o({method:`get`,url:d}),p=c(f.data),m=p(u?`h2 a`:`a.article-link`).slice(0,t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`)):25).toArray().map(e=>(e=p(e),{link:e.attr(`href`)}));return m=await Promise.all(m.map(t=>i.tryGet(t.link,async()=>{let r=await o({method:`get`,url:t.link}),i=c(r.data);return i(`.iconfont`).remove(),i(`img[data-src]`).each(function(){i(this).attr(`src`,i(this).attr(`data-src`).replace(/_logonews/,``))}),t.title=i(`title`).text(),t.author=i(`.author-links`).text(),t.pubDate=n(i(`meta[property="og:release_date"]`).attr(`content`)),t.category=i(`a.category_link, a[rel="tag"]`).toArray().map(e=>i(e).text().replaceAll(` · `,``)),t.description=a(s.join(e,`templates/description-75fedc0a.art`),{isWork:u,image:i(`meta[property="og:image"]`).attr(`content`),description:i(`.This_Article_content, .w_info`).html()}),t}))),{title:p(`title`).text(),link:d,item:m}}export{l as route};