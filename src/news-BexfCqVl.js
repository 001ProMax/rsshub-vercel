import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as n}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as r}from"./cache-GwMhal7i.js";import{art as i}from"./render-DOz85fGU.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as a}from"./got-CB83B8oA.js";import{rss_parser_default as o}from"./rss-parser-CLRsacVu.js";import s from"node:path";import{load as c}from"cheerio";t();const l=t=>{let n=t(`figure.mainPhoto`),r=n.find(`img`),a=n.find(`span.copyright`),o=n.find(`span.imageDescription`);return i(s.join(e,`templates/image-230aff8e.art`),{url:r.attr(`src`),alt:r.attr(`alt`)?.trim(),author:a.text()?.trim(),caption:o.text()?.trim()})},u=t=>{let n=t(`[itemprop="articleBody"]`);return t(`*`).contents().filter(function(){return this.nodeType===8}).remove(),n.find(`aside`).remove(),n.find(`.videoPlayerContainer`).remove(),n.find(`.pulsevideo`).remove(),n.find(`.adsContainer`).remove(),n.find(`.placeholder`).remove(),n.find(`.contentPremium`).removeAttr(`style`),n.find(`div.image`).each((n,r)=>{let a=t(r).find(`img`),o=t(r).find(`span.author`),c=t(r).find(`span.caption`),l=i(s.join(e,`templates/image-230aff8e.art`),{url:a.attr(`src`),alt:a.attr(`alt`)?.trim(),caption:c.text()?.trim(),author:o.text()?.trim()});t(r).replaceWith(l)}),n};t();const d={path:`/news`,categories:[`new-media`],example:`/onet/news`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wiadomosci.onet.pl/`]}],name:`News`,maintainers:[`Vegann`],handler:f,url:`wiadomosci.onet.pl/`,description:"This route provides a better reading experience (full text articles) over the official one for `https://wiadomosci.onet.pl`."};async function f(){let t=await o.parseURL(`https://wiadomosci.onet.pl/.feed`),d=await Promise.all(t.items.map(async t=>{let{description:o,author:d,category:f}=await r.tryGet(t.link,async()=>{let{data:n}=await a(t.link,{headers:{referer:`https://www.onet.pl/`}}),r=c(n),o=u(r),d=l(r),f=i(s.join(e,`templates/article-fc2b2fbf.art`),{mainImage:d,lead:r(`#lead`).text()?.trim(),content:o.html()?.trim()}),p=r(`.authorNameWrapper span[itemprop="name"]`).text()?.trim(),m=r(`span.relatedTopic`).text()?.trim();return{description:f,author:p,category:m}});return{title:t.title,link:t.link,description:o,author:d,category:f,pubDate:n(t.pubDate),guid:t.id}}));return{title:t.title,link:t.link,description:t.title,item:d,language:`pl`,image:`https://ocdn.eu/wiadomosciucs/static/logo2017/onet2017big_dark.png`}}export{d as route};