import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{ofetch_default as n}from"./ofetch-ZUQ1sEMc.js";import{load as r}from"cheerio";const i={path:`/blog`,categories:[`blog`],example:`/railway/blog`,url:`blog.railway.com`,name:`Blog`,maintainers:[`jihuayu`],handler:a};async function a(e){let t=Number.parseInt(e.req.query(`limit`)||`10`),n=await o(t);return{title:`Railway articles`,link:`https://blog.railway.com`,item:n}}const o=async i=>{let a=await n(`https://blog.railway.com/rss.xml`,{responseType:`text`}),o=r(a,{xml:!0});return Promise.all(o(`item`).toArray().slice(0,i).map(n=>{let r=o(n).find(`guid`).text();return t.tryGet(`railway:blogs:${r}`,async()=>{let t=o(n).find(`title`).text(),i=o(n).find(`pubDate`).text(),a=o(n).find(`link`).text(),{content:c}=await s(a);return{guid:r,title:t,link:a,pubDate:e(i),description:c}})}))},s=async e=>{let t=await n(e),i=r(t),a=i(`article > section `);return{content:a.html()??void 0}};export{s as fetchArticleDetails,o as fetchArticles,i as route};