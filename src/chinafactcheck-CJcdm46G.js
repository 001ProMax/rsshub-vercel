import"./esm-shims-CGUM9TC6.js";import{config as e}from"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as t}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as n}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as r}from"./got-CB83B8oA.js";import{load as i}from"cheerio";const a=e=>(e(`*[style]`).removeAttr(`style`),e(`br`).remove(),e(`span:empty`).remove(),e(`span`).each((t,n)=>{e(n).html().trim()===`&nbsp;`&&e(n).remove()}),e(`p:empty`).remove(),e(`p`).each((t,n)=>{e(n).html().trim()===``&&e(n).remove()}),e),o=async n=>{let o=await r(n,{headers:{"user-agent":e.trueUA}}),c=a(i(o.data)),l=c(`.content-head h2`).text().trim(),u=c(`.content-persons p span:last`).text().trim(),d=t(c(`.content-time`).text().trim(),`YYYY-MM-DD`),f=c(`div[class=content-list-box]`).html(),p=c(`.content-tags a[rel="tag"]`).toArray().map(e=>c(e).text().trim());return new s(l,u,d,f,p)};var s=class{constructor(e,t,n,r,i){this.title=e,this.author=t,this.pubDate=n,this.description=r,this.category=i}},c={siteLink:`https://chinafactcheck.com`,cleanDom:a,getArticleDetail:o,ArticleDetail:s,trueUA:e.trueUA};const l={path:`/`,radar:[{source:[`chinafactcheck.com/`],target:``}],name:`Unknown`,maintainers:[`kdanfly`],handler:u,url:`chinafactcheck.com/`};async function u(){let e=await r(c.siteLink,{headers:{"user-agent":c.trueUA}}),t=i(e.data),a=t(`.post-info-box .post-thumb a`).toArray().map(e=>({link:t(e).attr(`href`)})),o=await Promise.all(a.map(e=>n.tryGet(e.link,async()=>{let{title:t,author:n,pubDate:r,description:i,category:a}=await c.getArticleDetail(e.link);return e.title=t,e.author=n,e.pubDate=r,e.description=i,e.category=a,e})));return{title:t(`head title`).text(),link:c.siteLink,item:o}}export{l as route};