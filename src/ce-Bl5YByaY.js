import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{rss_parser_default as r}from"./rss-parser-CLRsacVu.js";import{fixArticleContent as i}from"./wechat-mp-BhyqE9dN.js";import{load as a}from"cheerio";const o=`Mozilla/5.0 (X11; Linux x86_64) RSS Reader`,s={path:`/ce/:id`,categories:[`new-media`],example:`/wechat/ce/595a5b14d7164e53908f1606`,parameters:{id:`公众号 id，在 [CareerEngine](https://search.careerengine.us/) 搜索公众号，通过 URL 中找到对应的公众号 id`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cimidata.com/a/:id`]}],name:`公众号（CareerEngine 来源）`,maintainers:[`HenryQW`],handler:c};async function c(s){let c=s.req.param(`id`),l=await r.parseString(await n.get(`https://posts.careerengine.us/author/${c}/rss`,{headers:{"User-Agent":o}}).then(e=>e.data)),u=await Promise.all(l.items.splice(0,10).map(r=>(r.link=r.link.replace(/^http:\/\//,`https://`),t.tryGet(r.link,async()=>{let t=await n.get(r.link,{headers:{"User-Agent":o}}),s=a(t.data),c=i(s(`.post`)),l=r.pubDate;if(!l||l===`Invalid Date`){let t=s(`.post-date`).text().replaceAll(/\s+|发表/g,``);l=e(t,`YYYY年MM月DD日`),l=new Date(l.getTime()-l.getTimezoneOffset()*60*1e3)}return{title:r.title,description:c,pubDate:l,link:r.link}}))));return{title:`微信公众号 - ${l.title}`,link:`https://posts.careerengine.us/author/${c}/posts`,description:l.description,item:u}}export{s as route};