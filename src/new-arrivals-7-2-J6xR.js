import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{art as n}from"./render-DOz85fGU.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as r}from"./got-CB83B8oA.js";import i from"node:path";import{load as a}from"cheerio";t();const o={path:`/new-arrivals/:query?`,categories:[`shopping`],example:`/zagg/new-arrivals/brand=164&cat=3038,3041`,parameters:{query:`query, search page querystring`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`New Arrivals`,maintainers:[`EthanWng97`],handler:s,description:"For instance, in `https://www.zagg.com/en_us/new-arrivals?brand=164&cat=3038%2C3041`, the query is `brand=164&cat=3038%2C3041`"};async function s(t){let o=t.req.param(`query`),s=new URLSearchParams(o),c=s.get(`brand`),l=s.get(`cat`),u=await r({headers:{"X-Requested-With":`XMLHttpRequest`},method:`post`,url:`https://www.zagg.com/en_us/new-arrivals`,searchParams:{cat:l,brand:c}}),d=u.data.products,f=a(d),p=f(`.item.product.product-item`).toArray().map(t=>{let r={},a=f(t).find(`.product.details-box`).html();r.link=f(t).find(`.product-item-link`).eq(0).attr(`href`),r.title=f(t).find(`.product-item-link`).text();let o=/(https.*?)\?/,s=f(t).find(`img`).eq(0).attr(`data-src`).match(o)[1],c=n(i.join(e,`templates/new-arrivals-5b741265.art`),{imgUrl:s});return r.description=a+c,r});return{title:`Zagg - New Arrivals`,link:u.url,description:`Zagg - New Arrivals`,item:p.map(e=>({title:e.title,description:e.description,link:e.link}))}}export{o as route};