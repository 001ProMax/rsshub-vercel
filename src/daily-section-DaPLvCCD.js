import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./md5-4BNsOP-F.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{header as r,processImage as i}from"./utils-DXQ16GV2.js";const a={path:`/daily/section/:sectionId`,categories:[`social-media`],example:`/zhihu/daily/section/2`,parameters:{sectionId:`合集 id，可在 https://news-at.zhihu.com/api/7/sections 找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`daily.zhihu.com/*`],target:`/daily`}],name:`知乎日报 - 合集`,maintainers:[`ccbikai`],handler:o,url:`daily.zhihu.com/*`};async function o(a){let o=a.req.param(`sectionId`),s=await n({method:`get`,url:`https://news-at.zhihu.com/api/7/section/${o}`,headers:{...r,Referer:`https://news-at.zhihu.com/api/7/section/${o}`}}),c=s.data.stories.filter(e=>e.url.startsWith(`https://daily.zhihu.com/`)),l=await Promise.all(c.map(r=>{let a=`https://news-at.zhihu.com/api/7/news/`+r.id,o={title:r.title,pubDate:e(r.date,`YYYYMMDD`),description:``,link:`https://daily.zhihu.com/story/`+r.id};return t.tryGet(`https://daily.zhihu.com/story/${r.id}`,async()=>{let e=await n({method:`get`,url:a,headers:{Referer:a}});return o.description=i(e.data.body.replaceAll(/<div class="meta">([\S\s]*?)<\/div>/g,`<strong>$1</strong>`).replaceAll(/<\/?h2.*?>/g,``)),o})}));return{title:`${s.data.name} - 知乎日报`,link:`https://daily.zhihu.com`,description:`每天3次，每次7分钟`,image:`http://static.daily.zhihu.com/img/new_home_v3/mobile_top_logo.png`,item:l}}export{a as route};