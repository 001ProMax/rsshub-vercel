import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i=async i=>{let a=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`),10):10,o=`https://junhe.com`,s=new URL(`legal-updates`,o).href,{data:c}=await n(s),l=r(c),u=l(`html`).prop(`lang`),d=l(`a.content-wrap`).slice(0,a).toArray().map(t=>(t=l(t),{title:t.find(`h1.news.detail`).text(),pubDate:e(t.find(`p.date`).text(),`YYYY.MM.DD`),link:new URL(t.prop(`href`),o).href}));d=await Promise.all(d.map(i=>t.tryGet(i.link,async()=>{let{data:t}=await n(i.link),a=r(t),o=a(`h1.d-title`).text(),s=a(`div.d-content`).html(),c=a(`p.d-pub-date`).text().split(/\s/);return i.title=o,i.description=s,i.pubDate=e(c[0],`YYYY.MM.DD`),i.author=c.slice(1).join(`/`),i.content={html:s,text:a(`div.d-content`).text()},i.language=u,i})));let f=new URL(l(`a.site-logo img`).prop(`src`),o).href;return{title:l(`title`).text(),description:l(`meta[name="description"]`).prop(`content`),link:s,item:d,allowEmpty:!0,image:f,author:`君合律师事务所`,language:u}},a={path:`/legal-updates`,name:`君合法评`,url:`junhe.com`,maintainers:[`nczitzk`],handler:i,example:`/junhe/legal-updates`,description:``,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`/legal-updates`],target:`/legal-updates`}]};export{i as handler,a as route};