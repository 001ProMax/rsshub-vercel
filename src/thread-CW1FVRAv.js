import"./esm-shims-DtWyl6zt.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./dist-CKN2M7CD.js";import{cache_default as e}from"./cache-Sft5n2jg.js";import{parseDate as t}from"./parse-date-Bgabdhlb.js";import{ofetch_default as n}from"./ofetch-CWsaZ4vY.js";const r={path:`/threads/:type?`,categories:[`bbs`],example:`/deepin/threads/latest`,parameters:{type:{description:`主题类型`,options:[{value:`hot`,label:`最热主题`},{value:`latest`,label:`最新主题`}]}},name:`首页主题列表`,maintainers:[`myml`],radar:[{source:[`bbs.deepin.org`],target:`/threads/latest`}],handler:a},i={hot:{where:`hot_value`,title:`最热主题`},latest:{where:`id`,title:`最新主题`}};async function a(r){let a=i.latest;r.req.param(`type`)===`hot`&&(a=i.hot);let o=await n(`https://bbs.deepin.org.cn/api/v1/thread/index`,{query:{languages:`zh_CN`,order:`updated_at`,where:a.where},headers:{accept:`application/json`}}),s=await Promise.all(o.ThreadIndex.map(r=>{let i=`https://bbs.deepin.org.cn/post/`+r.id;return e.tryGet(i,async()=>{let e={id:String(r.id),title:r.subject,link:i,pubDate:t(r.created_at),author:r.user.nickname,category:[r.forum.name],description:``},a=await n(`https://bbs.deepin.org.cn/api/v1/thread/info?id=`+e.id);if(a){let t=a;e.description=t.data.post.message}return e})}));return{title:`deepin论坛主页 - `+a.title,link:`https://bbs.deepin.org`,item:s}}export{r as route};