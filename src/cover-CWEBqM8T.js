import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{baseUrl as r,journalMap as i}from"./utils-UrPCrISD.js";import{load as a}from"cheerio";import{CookieJar as o}from"tough-cookie";const s={path:`/cover`,categories:[`journal`],example:`/nature/cover`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`nature.com/`]}],name:`Cover Story`,maintainers:[`y9c`,`pseudoyu`],handler:c,url:`nature.com/`,description:`Subscribe to the cover images of the Nature journals, and get the latest publication updates in time.`};async function c(){let s=new o;await n(`https://www.nature.com`,{cookieJar:s});let c=i.items.filter(e=>e.id).map(e=>({...e,link:`${r}/${e.title}/current-issue`})),l=await Promise.all(c.map(r=>t.tryGet(r.link,async()=>{let{id:t,name:i,link:o}=r,c=await n(o,{cookieJar:s}),l=a(c.data),u=l(`meta[property="og:url"]`).attr(`content`),d=/volumes\/(?<volume>\d+)\/issues\/(?<issue>\d+)/,{volume:f,issue:p}=u?.match(d)?.groups??{},m=`https://media.springernature.com/full/springer-static/cover-hires/journal/${t}/${f}/${p}?as=webp`,h=`<div align="center"><img src="${m}" alt="Volume ${f} Issue ${p}"></div>`,g=l(`title`).text().split(`,`)[1].trim(),_=l(`div[data-test=issue-description]`).html()??``;return{title:`${i} | Volume ${f} Issue ${p}`,description:h+_,link:c.url,pubDate:e(g,`MMMM YYYY`)}})));return{title:`Nature Covers Story`,description:`Find out the cover story of some Nature journals.`,link:r,item:l}}export{s as route};