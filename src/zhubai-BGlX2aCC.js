import"./esm-shims-DtWyl6zt.js";import"./config-CT-9jq-j.js";import"./logger-BsClR5PH.js";import"./dist-BrnquCU2.js";import"./helpers-DzX-lcQO.js";import{parseDate as e}from"./parse-date-Bgabdhlb.js";import"./ofetch-Of9UBhau.js";import{got_default as t}from"./got-Cw3q2eEq.js";import{InvalidParameterError as n}from"./invalid-parameter-BQKLs9qN.js";import{isValidHost as r}from"./valid-host-DEPw8oAS.js";const i={path:`/posts/:id`,categories:[`blog`],example:`/zhubai/posts/via`,parameters:{id:"`id` 为竹白主页 url 中的三级域名，如 via.zhubai.love 的 `id` 为 `via`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`文章`,maintainers:[`naixy28`],handler:a,description:"::: tip\n  在路由末尾处加上 `?limit=限制获取数目` 来限制获取条目数量，默认值为`20`\n:::"};async function a(i){let a=i.req.param(`id`),o=i.req.query(`limit`)?Number.parseInt(i.req.query(`limit`)):20;if(!r(a))throw new n(`Invalid id`);let s=await t({method:`get`,url:`https://${a}.zhubai.love/api/publications/${a}/posts?publication_id_type=token&limit=${o}`,headers:{Referer:`https://${a}.zhubai.love/`}}),c=s.data.data,{name:l,description:u}=c[0].publication;return{title:l,link:`https://${a}.zhubai.love/`,description:u,item:c.map(t=>({title:t.title,pubDate:e(t.created_at),link:`https://${a}.zhubai.love/posts/${t.id}`,author:l}))}}export{i as route};