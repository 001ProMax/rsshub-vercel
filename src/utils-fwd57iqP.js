import{parseDate as e}from"./parse-date-D4osZfpm.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{got_default as n}from"./got-CB83B8oA.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";import a from"iconv-lite";var o={parseFeed:async({subjectid:o})=>{let s=`https://www.dapenti.com/blog/blog.asp?name=xilei&subjectid=${o}`,c=await n({method:`get`,url:s,headers:{Referer:s},responseType:`buffer`}),l=a.decode(c.data,`gb2312`),u=i(l),d=u(`li`,`ul`).slice(0,3).toArray(),f=await Promise.all(d.map(s=>t.tryGet(`https://www.dapenti.com/blog/${u(s).find(`a`).attr(`href`)}`,async()=>{let t=u(s),c=`https://www.dapenti.com/blog/${t.find(`a`).attr(`href`)}`,l=await n({method:`get`,url:c,headers:{Referer:c},responseType:`buffer`}),d=a.decode(l.data,`gbk`),f=i(d,{decodeEntities:!1})(`body > table > tbody > tr > td.oblog_t_2 > div > table > tbody > tr:nth-child(2) > td`),p=f.find(`span span.oblog_text`).text().split(`发布于`);f.find(`table, .adsbygoogle`).remove();let m=o.toString()===`70`?7:3;for(let e=0;e<m;e++)f.children().first().remove();for(let e=0;e<8;e++)f.children().last().remove();let h={title:t.text(),author:p[0].trim(),description:f.html(),pubDate:r(e(p[1]?.trim()),8),link:c};return h})));return{title:`喷嚏-${o}`,link:s,item:f}}};export{o as utils_default};