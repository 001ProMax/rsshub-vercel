import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{timezone as r}from"./timezone-BrNu6iXe.js";const i=[`hakka`,`political`,`medical`,`local`,`international`],a=`https://www.hakkatv.org.tw`,o=`https://api.hakkatv.org.tw`,s={path:`/news/:type?`,categories:[`traditional-media`],example:`/hakkatv/news`,parameters:{type:`新聞，見下表，留空為全部`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`hakkatv.org.tw/news`],target:`/news`}],name:`新聞首頁`,maintainers:[`TonyRL`],handler:c,url:`hakkatv.org.tw/news`,description:`| 客家焦點 | 政經要聞  | 民生醫療 | 地方風采 | 國際萬象      |
| -------- | --------- | -------- | -------- | ------------- |
| hakka    | political | medical  | local    | international |`};async function c(s){let c=s.req.param(`type`),l=c?(await n(`${o}/api/news/index`,{searchParams:{per:4,"sort[created_at]":`desc`,type:c,keywords:``}})).data.data:await Promise.all(i.map(async e=>{let{data:t}=await n(`${o}/api/news/index`,{searchParams:{per:4,"sort[created_at]":`desc`,type:e,keywords:``}});return t.data})),u=l.flat().map(t=>({title:t.title,pubDate:r(e(t.created_at),8),author:t.author,link:`${a}/news-detail/${t.id}`,id:t.id})),d=await Promise.all(u.map(e=>t.tryGet(e.link,async()=>{let{data:t}=await n(`${o}/api/news/read/${e.id}`);return e.category=t.tag.map(e=>e.tag),e.description=t.content.replaceAll(`
`,`<br>`),delete e.id,e})));return{title:`新聞首頁 - 客家電視台`,description:`客家電視是屬於全民、以至於全世界客家族群的頻道，亦是為傳播客家文化而存在，定位為「全體客家族群之媒體」。`,link:`${a}/news`,language:`zh-TW`,item:d}}export{s as route};