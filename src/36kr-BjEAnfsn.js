import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import{getSubPath as t}from"./common-utils-CI-xkOWZ.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as n}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as r}from"./got-CB83B8oA.js";import{ProcessItem as i,rootUrl as a}from"./utils-DPAlDoEn.js";import{load as o}from"cheerio";const s={"/information":`/information/web_news`,"/information/latest":`/information/web_news`,"/information/recommend":`/information/web_recommend`,"/information/life":`/information/happy_life`,"/information/estate":`/information/real_estate`,"/information/workplace":`/information/web_zhichang`},c={path:`/:category/:subCategory?/:keyword?`,categories:[`new-media`],example:`/36kr/newsflashes`,parameters:{category:`分类，必填项`,subCategory:`子分类，选填项，目的是为了兼容老逻辑`,keyword:`关键词，选填项，仅搜索文章/快讯时有效`},name:`资讯, 快讯, 用户文章, 主题文章, 专题文章, 搜索文章, 搜索快讯`,maintainers:[`nczitzk`,`fashioncj`],description:`| 最新资讯频道 | 快讯 | 推荐资讯 | 生活 | 房产 | 职场 | 搜索文章 | 搜索快讯 |
| ------- | -------- | -------- | -------- | -------- | --------| -------- | -------- |
| news | newsflashes | recommend | life | estate | workplace | search/articles/关键词 | search/articles/关键词 |`,handler:l};async function l(c){let l=t(c).replace(/^\/news(?!flashes)/,`/information`).replace(/\/search\/article/,`/search/articles`),u=`${a}${Object.hasOwn(s,l)?s[l]:l}`,d=await r({method:`get`,url:u}),f=o(d.data),p=JSON.parse(d.data.match(/"itemList":(\[.*?])/)[1]),m=p.slice(0,c.req.query(`limit`)?Number.parseInt(c.req.query(`limit`)):30).filter(e=>e.itemType!==0).map(t=>(t=t.templateMaterial??t,{title:t.widgetTitle.replaceAll(/<\/?em>/g,``),author:t.author,pubDate:e(t.publishTime),link:`${a}/${l===`/newsflashes`?`newsflashes`:`p`}/${t.itemId}`,description:t.widgetContent??t.content}));return/^\/(search|newsflashes)/.test(l)||(m=await Promise.all(m.map(e=>i(e,n.tryGet)))),{title:`36氪 - ${f(`title`).text().split(`_`)[0]}`,link:u,item:m}}export{c as route};