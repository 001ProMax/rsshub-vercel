import{__dirname as e,init_esm_shims as t}from"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as n}from"./cache-GwMhal7i.js";import{art as r}from"./render-DOz85fGU.js";import"./md5-4BNsOP-F.js";import"./ofetch-ZUQ1sEMc.js";import"./got-CB83B8oA.js";import"./config-not-found-BVqhRP9D.js";import{defaultDomain as i,getApiUrl as a,getRootUrl as o,processApiItems as s}from"./utils-BGFcBXUE.js";import c from"node:path";t();const l={path:`/album/:id`,categories:[`anime`],example:`/18comic/album/292282`,parameters:{id:`专辑 id，可在专辑页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`jmcomic.group/`]}],name:`专辑`,maintainers:[`nczitzk`],handler:u,url:`jmcomic.group/`,description:`::: tip
  专辑 id 不包括 URL 中标题的部分。
:::`};async function u(t){let l=t.req.param(`id`),{domain:u=i}=t.req.query(),d=o(u),f=`${d}/album/${l}`,p=`${a()}/album?id=${l}`,m=await s(p),h=m.tags,g=m.author.join(`, `),_=m.description,v=m.addtime,y=[];return m.series.length===0?y.push({title:m.name,link:`${d}/photo/${l}`,guid:`${d}/photo/${l}`,updated:new Date(v*1e3),pubDate:new Date(v*1e3),category:h,author:g,description:r(c.join(e,`templates/description-afe7e434.art`),{introduction:_,images:[`https://cdn-msp3.${u}/media/albums/${l}_3x4.jpg`],cover:`https://cdn-msp3.${u}/media/albums/${l}_3x4.jpg`,category:h})}):(y=await Promise.all(m.series.map((t,i)=>n.tryGet(`18comic:album:${t.id}`,async()=>{let n=`${a()}/chapter?id=${t.id}`,o=await s(n),l={},f=i+1;return l.title=`第${String(f)}話 ${t.name===``?`${String(f)}`:t.name}`,l.link=`${d}/photo/${t.id}`,l.guid=`${d}/photo/${t.id}`,l.updated=new Date(o.addtime*1e3),l.pubDate=v,l.category=h,l.author=g,l.description=r(c.join(e,`templates/description-afe7e434.art`),{introduction:_,images:[`https://cdn-msp3.${u}/media/albums/${t.id}_3x4.jpg`],cover:`https://cdn-msp3.${u}/media/albums/${t.id}_3x4.jpg`,category:h}),l}))),y=y.toReversed()),{title:`${m.name} - 禁漫天堂`,link:f.replace(/\?$/,``),item:y,allowEmpty:!0,description:_}}export{l as route};