import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i={path:`/shopping-guide/:category?/:language?`,categories:[`new-media`],example:`/consumer/shopping-guide`,parameters:{category:"分类，见下表，默认为 `trivia`",language:"语言，见上表，默认为 `tc`"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`消費全攻略`,maintainers:[`TonyRL`],handler:a,description:`| 冷知識 | 懶人包 | 特集     | 銀髮一族           | 飲食煮意         | 科技達人   | 健康美容          | 規劃人生                    | 消閒娛樂                  | 家品家電        | 親子時光        | 綠色生活     |
| ------ | ------ | -------- | ------------------ | ---------------- | ---------- | ----------------- | --------------------------- | ------------------------- | --------------- | --------------- | ------------ |
| trivia | tips   | features | silver-hair-market | food-and-cooking | tech-savvy | health-and-beauty | life-and-financial-planning | leisure-and-entertainment | home-appliances | family-and-kids | green-living |`};async function a(i){let{category:a=`trivia`,language:o=`tc`}=i.req.param(),s=`https://www.consumer.org.hk`,c=`${s}/${o}/shopping-guide/${a}`,{data:l}=await n(c,{headers:{cookie:`consumer_pagination={${encodeURI(`"228c"`)}:24}`}}),u=r(l),d=u(`.shadow-long-blk`).toArray().map(t=>{t=u(t);let n=t.find(`.item-info li`).toArray().map(e=>u(e).text().trim());return{title:t.find(`h2`).text().trim(),description:t.find(`p`).text().trim(),link:`${s}${t.attr(`href`)}`,pubDate:e(n.shift(),`YYYY-MM-DD`),category:n}}),f=await Promise.all(d.map(e=>t.tryGet(e.link,async()=>{let{data:t}=await n(e.link),i=r(t),a=i(`.article-img-blk`);return a.find(`img`).each((e,t)=>{t=i(t),t.attr(`src`)&&t.attr(`srcset`)&&(t.removeAttr(`srcset`),t.attr(`src`,t.attr(`src`).replace(/\/\d+c\d+\//,`/0p0/`)))}),e.description=a.html()+i(`article .ckec`).html(),e})));return{title:u(`head title`).text(),link:c,image:u(`meta[property="og:image"]`).attr(`content`),logo:u(`link[rel="apple-touch-icon"]`).attr(`href`),icon:u(`link[rel="apple-touch-icon"]`).attr(`href`),item:f}}export{i as route};