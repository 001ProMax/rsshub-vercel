import{parseDate as e}from"./parse-date-D4osZfpm.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{got_default as n}from"./got-CB83B8oA.js";import*as r from"cheerio";const i=t=>t.map(t=>({title:t.title,description:t.summary,pubDate:e(t.date_published),link:`https://www.guokr.com/article/${t.id}/`,author:t.author.nickname,category:t.subject?.name,id:t.id,channels:t.channels})),a=e=>t.tryGet(e.link,async()=>{let{data:t}=await n(`https://apis.guokr.com/minisite/article/${e.id}.json`),i=r.load(t.result.content);return i(`#meta_content`).remove(),i(`div`).each((e,t)=>{let n=i(t);n.attr(`style`,n.attr(`style`)?.replaceAll(/(?:display:\s*none|visibility:\s*hidden|opacity:\s*0);?/g,``))}),i(`img`).each((e,t)=>{let n=i(t);n.attr(`data-src`)&&n.attr(`src`,n.attr(`data-src`))}),e.description=i.html(),e});export{a as parseItem,i as parseList};