import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{load as r}from"cheerio";const i=`https://www.setn.com`,a={娛樂:`https://star.setn.com`,健康:`https://health.setn.com`,旅遊:`https://travel.setn.com`,富房網:`https://fuhouse.setn.com`,女孩:`https://watch.setn.com`},o={即時:``,熱門:0,政治:6,社會:41,國際:5,兩岸:68,生活:4,運動:34,地方:97,財經:2,名家:9,新奇:42,科技:7,汽車:12,寵物:47,HOT焦點:31},s=e=>{let t=Object.hasOwn(a,e)?a[e]:i;return Object.hasOwn(o,e)?`${t}/ViewAll.aspx${o[e]===``?``:`?PageGroupID=${o[e]}`}`:`${t}/viewall`},c={path:`/:category?`,categories:[`traditional-media`],example:`/setn`,parameters:{category:`分类，见下表，默认为即時`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`setn.com/ViewAll.aspx`,`setn.com/`],target:``}],name:`新聞`,maintainers:[`nczitzk`],handler:l,url:`setn.com/ViewAll.aspx`,description:`| 即時 | 熱門 | 娛樂 | 政治 | 社會 |
| ---- | ---- | ---- | ---- | ---- |

| 國際 | 兩岸 | 生活 | 健康 | 旅遊 |
| ---- | ---- | ---- | ---- | ---- |

| 運動 | 地方 | 財經 | 富房網 | 名家 |
| ---- | ---- | ---- | ------ | ---- |

| 新奇 | 科技 | 汽車 | 寵物 | 女孩 | HOT 焦點 |
| ---- | ---- | ---- | ---- | ---- | -------- |`};async function l(o){let c=o.req.param(`category`)??`即時`,l=o.req.query(`limit`)?Number.parseInt(o.req.query(`limit`)):42,u=s(c),d=await n({method:`get`,url:u}),f=r(d.data),p=f(`#NewsList, .newsList, .hotNewsList`).find(`.newsItems, .st-news, .all_three_list, div.title-word`).slice(0,l).toArray().map(e=>{e=f(e);let t=e.find(`a`).last(),n=t.attr(`href`).replaceAll(/(\?|&)utm_campaign=.*/g,``);return{title:t.text(),link:n.startsWith(`http`)?n:`${Object.hasOwn(a,c)?a[c]:i}${n}`}});return p=await Promise.all(p.map(i=>t.tryGet(i.link,async()=>{let t=await n({method:`get`,url:i.link}),a=r(t.data);return a(`#gad_setn_innity_oop_1x1`).remove(),i.author=a(`meta[property="author"]`).attr(`content`),i.category=[a(`meta[property="article:section"]`).attr(`content`),...a(`meta[name="news_keywords"]`).attr(`content`).split(`,`)],i.pubDate=e(a(`meta[property="article:published_time"]`).attr(`content`)),i.description=a(`article, .content-p`).html(),i}))),{title:`三立新聞網 - ${c}`,link:u,item:p}}export{c as route};