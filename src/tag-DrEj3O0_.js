import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import"./helpers-nWIDkd0K.js";import{cache_default as t}from"./cache-GwMhal7i.js";import"./ofetch-ZUQ1sEMc.js";import{got_default as n}from"./got-CB83B8oA.js";import{timezone as r}from"./timezone-BrNu6iXe.js";import{load as i}from"cheerio";const a={path:`/tag/:name`,categories:[`new-media`],example:`/ithome/tag/win11`,parameters:{name:`标签名称，可从网址链接中获取`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`ithome.com/tag/:name`]}],name:`标签`,maintainers:[`Fatpandac`],handler:o};async function o(a){let o=a.req.param(`name`),s=`https://www.ithome.com/tag/${o}`,c=await n(s),l=i(c.data),u=l(`ul.bl > li`).toArray().map(t=>({title:l(t).find(`h2 > a`).text(),link:l(t).find(`h2 > a`).attr(`href`),pubDate:r(e(l(t).find(`div.c`).attr(`data-ot`)),8)})),d=await Promise.all(u.map(e=>t.tryGet(e.link,async()=>{let t;try{t=await n(e.link)}catch{}if(!t)return;let r=i(t.data),a=r(`div.post_content`);return a.find(`img[data-original]`).each((e,t)=>{t=l(t),t.attr(`src`,t.attr(`data-original`)),t.removeAttr(`class`),t.removeAttr(`data-original`)}),e.description=a.html(),e.author=r(`span.author_baidu > strong`).text(),e})));return{title:`IT之家 - ${o}标签`,link:s,item:d.filter(Boolean)}}export{a as route};