import"./esm-shims-CGUM9TC6.js";import"./config-C9m9eBw5.js";import"./logger-CC3afzWM.js";import{parseDate as e}from"./parse-date-D4osZfpm.js";import"./dist-0j_z2rfc.js";import{cache_default as t}from"./cache-GwMhal7i.js";import{ofetch_default as n}from"./ofetch-ZUQ1sEMc.js";import{load as r}from"cheerio";const i={path:`/:type`,categories:[`new-media`],example:`/kelownacapnews/local-news`,parameters:{type:`Type of news`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.kelownacapnews.com/:type`],target:`/:type`}],name:`News`,maintainers:[`hualiong`],url:`www.kelownacapnews.com`,description:`\`type\` is as follows:
  
| News type     | Value         | News type    | Value        |
| ------------- | ------------- | ------------ | ------------ |
| News          | news          | Sports       | sports       |
| Local News    | local-news    | Business     | business     |
| Canadian News | national-news | Trending Now | trending-now |
| World News    | world-news    | Opinion      | opinion      |
| Entertainment | entertainment |              |              |`,handler:async i=>{let a=i.req.param(`type`),o=`https://www.kelownacapnews.com`,s=await n(`${o}/${a}`),c=r(s),l=c(`.media`).toArray().map(t=>{let n=c(t);return{title:n.find(`.media-heading`).text(),pubDate:e(n.find(`.media-links time`).attr(`datetime`)),link:o+n.attr(`href`)}}),u=await Promise.all(l.map(e=>t.tryGet(e.link,async()=>{let t=await n(e.link),i=r(t),a=i(`.details-file`);a.length||(a=i(`#sliderImgs .tablist-item .galleryWrap`));let o=i(`.details-byline`),s=o.find(`.profile-title`);s.length&&(e.author=s.find(`a`).text());let c=``;if(a.length>1)for(let e of a.toArray()){let t=i(e);c+=`<figure style="margin: 10px 0 0 0"><img src='${t.data(`src`)}' /><figcaption>${t.attr(`title`)}</figcaption></figure>`}else c=`<figure style="margin: 0">${a.html()}</figure>`;return e.description=c+i(`.details-body`).html(),e})));return{title:`${c(`.body-title`).text()} - Kelowna Capital News`,link:`${o}/${a}`,item:u}}};export{i as route};